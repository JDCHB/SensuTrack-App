import{h as d,R as y,T as E,V as M,W as N,X as T,Y as w,u as L,j as A,Z as I,_ as O,q as i}from"./BmWwM6au.js";import{b as q,l as S}from"./JbnazOOx.js";const C=Symbol("is custom element"),R=Symbol("is html");function U(e){if(d){var r=!1,a=()=>{if(!r){if(r=!0,e.hasAttribute("value")){var f=e.value;k(e,"value",null),e.value=f}if(e.hasAttribute("checked")){var s=e.checked;k(e,"checked",null),e.checked=s}}};e.__on_r=a,y(a),q()}}function k(e,r,a,f){var s=V(e);d&&(s[r]=e.getAttribute(r),r==="src"||r==="srcset"||r==="href"&&e.nodeName==="LINK")||s[r]!==(s[r]=a)&&(r==="loading"&&(e[E]=a),a==null?e.removeAttribute(r):typeof a!="string"&&D(e).includes(r)?e[r]=a:e.setAttribute(r,a))}function V(e){return e.__attributes??(e.__attributes={[C]:e.nodeName.includes("-"),[R]:e.namespaceURI===M})}var m=new Map;function D(e){var r=m.get(e.nodeName);if(r)return r;m.set(e.nodeName,r=[]);for(var a,f=e,s=Element.prototype;s!==f;){a=T(f);for(var o in a)a[o].set&&r.push(o);f=N(f)}return r}function Y(e,r,a=r){var f=w();S(e,"input",s=>{var o=s?e.defaultValue:e.value;if(o=u(e)?h(o):o,a(o),f&&o!==(o=r())){var l=e.selectionStart,_=e.selectionEnd;e.value=o??"",_!==null&&(e.selectionStart=l,e.selectionEnd=Math.min(_,e.value.length))}}),(d&&e.defaultValue!==e.value||L(r)==null&&e.value)&&a(u(e)?h(e.value):e.value),A(()=>{var s=r();u(e)&&s===h(e.value)||e.type==="date"&&!s&&!e.value||s!==e.value&&(e.value=s??"")})}const n=new Set;function j(e,r,a,f,s=f){var o=a.getAttribute("type")==="checkbox",l=e;let _=!1;if(r!==null)for(var t of r)l=l[t]??(l[t]=[]);l.push(a),S(a,"change",()=>{var c=a.__value;o&&(c=g(l,c,a.checked)),s(c)},()=>s(o?[]:null)),A(()=>{var c=f();if(d&&a.defaultChecked!==a.checked){_=!0;return}o?(c=c||[],a.checked=c.includes(a.__value)):a.checked=I(a.__value,c)}),O(()=>{var c=l.indexOf(a);c!==-1&&l.splice(c,1)}),n.has(l)||(n.add(l),i(()=>{l.sort((c,v)=>c.compareDocumentPosition(v)===4?-1:1),n.delete(l)})),i(()=>{if(_){var c;if(o)c=g(l,c,a.checked);else{var v=l.find(b=>b.checked);c=v==null?void 0:v.__value}s(c)}})}function g(e,r,a){for(var f=new Set,s=0;s<e.length;s+=1)e[s].checked&&f.add(e[s].__value);return a||f.delete(r),Array.from(f)}function u(e){var r=e.type;return r==="number"||r==="range"}function h(e){return e===""?null:+e}export{j as a,Y as b,U as r,k as s};
