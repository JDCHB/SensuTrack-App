import{t as z,a as L}from"../chunks/DAy9PkhU.js";import{i as N}from"../chunks/CHjcBrZ9.js";import{k as R,l as F,m as s,n as J,o as n,t as p,v as C,w as i,x as l,y as M}from"../chunks/V2kXoyKe.js";import{e as S}from"../chunks/Nn6L6OkE.js";import{b as A,r as G}from"../chunks/BBr6DWM0.js";import{b as H}from"../chunks/DBCRKDJt.js";import{g as Q}from"../chunks/D7j5owh8.js";var U=z(`<button class="vibrant-button login-button svelte-rkqes"><i class="bi bi-box-arrow-in-left svelte-rkqes"></i> VOLVER</button> <div class="password-wrapper svelte-rkqes"><div class="password-container svelte-rkqes"><div class="password-card svelte-rkqes"><div class="password-header svelte-rkqes"><h2 class="password-title svelte-rkqes">Cambio de Contraseña</h2> <p class="password-subtitle svelte-rkqes">Por favor, ingrese su correo electrónico registrado en el
                    sistema</p></div> <div class="password-form svelte-rkqes"><div class="input-group svelte-rkqes"><label for="correo" class="vibrant-label svelte-rkqes">Correo Electrónico</label> <input type="email" class="vibrant-input svelte-rkqes" placeholder="ejemplo@correo.com" id="correo" required></div> <button class="vibrant-button svelte-rkqes"><i class="bi bi-send-fill svelte-rkqes"></i> ENVIAR CÓDIGO</button></div></div></div> <div class="loader-container svelte-rkqes"><div class="vibrant-loader svelte-rkqes"><span class="svelte-rkqes">S</span> <span class="svelte-rkqes">e</span> <span class="svelte-rkqes">n</span> <span class="svelte-rkqes">s</span> <span class="svelte-rkqes">u</span> <span class="svelte-rkqes">T</span> <span class="svelte-rkqes">r</span> <span class="svelte-rkqes">a</span> <span class="svelte-rkqes">c</span> <span class="svelte-rkqes">k</span></div></div></div> <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet" class="svelte-rkqes">`,1);function se(x,T){R(T,!1);const j="service_j9bousa",B="template_zszjdla",E="dFD1OdFitzwQblEX0";let m="",a=C(""),r=0,o=C();function u(e){e&&(e.style.display="flex")}function f(e){e&&(e.style.display="none")}function I(){return r=(Math.random()+1).toString(36).substring(4),r}async function O(){p(a,document.getElementById("correo").value);try{u(s(o));const t=await(await fetch("https://proyectomascotas.onrender.com/Validar_Correo",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s(a)})})).json();console.log(t),f(s(o)),t.email?(I(r),emailjs.init(E),emailjs.send(j,B,{r,email:s(a)}).then(c=>{}).catch(c=>{}),b()):Swal.fire({position:"top",icon:"error",title:"Correo no encontrado"})}catch(e){console.log(e)}}async function V(){try{u(s(o));const t=await(await fetch("https://proyectomascotas.onrender.com/update_contraseña",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s(a),password:m})})).json();console.log("Respuesta del servidor:",t),f(s(o)),t.mensaje=="Contraseña actualizada exitosamente"?(Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:y=>{y.onmouseenter=Swal.stopTimer,y.onmouseleave=Swal.resumeTimer}}).fire({icon:"success",iconColor:"white",color:"white",background:"green",title:"Contraseñass cambiada exitosamente"}),setTimeout(()=>{window.location.href="/"},3500)):Swal.fire({title:"Error",text:"Hubo un problema al cambiar la contraseña.",icon:"error"})}catch(e){console.log(e)}}function b(){Swal.fire({title:"Validacion",html:`
                        <div class="card-header">Ingrese la clave enviada al correo<div/>
                        <input class="mt-2 form-control" id="ingaturrona"></input>
                    `,icon:"warning",showCancelButton:!0,allowOutsideClick:!1,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Validar"}).then(e=>{const t=document.getElementById("ingaturrona").value;e.isConfirmed?t==r?Swal.fire({title:"Cambio de clave",html:`
                                    <div class="card-header">Ingrese su nueva clave<div/>
                                    <input class="mt-2 form-control" id="clave_nueva_1"></input>
                                `,icon:"warning",allowOutsideClick:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Validar"}).then(c=>{m=document.getElementById("clave_nueva_1").value,c.isConfirmed&&V()}):Swal.fire({title:"Error",text:"El codigo es incorrecto... Por favor, intentalo de nuevo.",icon:"error"}).then(()=>{b()}):e.isDismissed})}N();var h=U(),k=F(h),w=n(k,2),d=i(w),g=i(d),q=n(i(g),2),v=i(q),_=n(i(v),2);G(_),l(v);var D=n(v,2);l(q),l(g),l(d);var P=n(d,2);H(P,e=>p(o,e),()=>s(o)),l(w),M(2),S("click",k,()=>Q("/")),A(_,()=>s(a),e=>p(a,e)),S("click",D,O),L(x,h),J()}export{se as component};
