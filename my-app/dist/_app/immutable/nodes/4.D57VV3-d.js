import{t as A,a as C}from"../chunks/nQzwvEh3.js";import{i as Le}from"../chunks/BnUuZUax.js";import{h as Ne,a as Ct,b as At,l as e,ai as It,c as Dt,r as ot,s as Qe,d as Ke,g as He,D as Rt,e as ct,f as dt,p as Ot,J as vt,Q as jt,v as O,aw as st,ax as et,N as rt,ay as tt,az as lt,aA as Nt,I as Mt,aB as Lt,a6 as Pt,aC as at,aD as zt,B as Ut,A as qt,L as Gt,aE as ut,q as $t,aF as Jt,i as mt,Z as Ht,k as Pe,w as l,n as o,o as a,a7 as me,aG as pt,t,x as xe,m as ze,y as Ge,aH as bt,aI as ft,aJ as it}from"../chunks/BmWwM6au.js";import{l as Ft,e as J}from"../chunks/JbnazOOx.js";import{i as oe}from"../chunks/B8BZ22IT.js";import{r as we,b as Ae,a as gt,s as _t}from"../chunks/BeOCEM56.js";import{b as ht}from"../chunks/C1ormfhT.js";import{s as K}from"../chunks/BK6br9vx.js";import{o as Me,c as Ze}from"../chunks/DTJiLZCU.js";function Re(c,s){return s}function Vt(c,s,r,n){for(var d=[],f=s.length,E=0;E<f;E++)Nt(s[E].e,d,!0);var p=f>0&&d.length===0&&r!==null;if(p){var L=r.parentNode;Mt(L),L.append(r),n.clear(),qe(c,s[0].prev,s[f-1].next)}Lt(d,()=>{for(var z=0;z<f;z++){var w=s[z];p||(n.delete(w.k),qe(c,w.prev,w.next)),Pt(w.e,!p)}})}function Oe(c,s,r,n,d,f=null){var E=c,p={flags:s,items:new Map,first:null},L=(s&ut)!==0;if(L){var z=c;E=Ne?Qe(qt(z)):z.appendChild(Gt())}Ne&&Ct();var w=null,ee=!1,k=It(()=>{var g=r();return jt(g)?g:g==null?[]:vt(g)});At(()=>{var g=e(k),_=g.length;if(ee&&_===0)return;ee=_===0;let W=!1;if(Ne){var H=E.data===Dt;H!==(_===0)&&(E=ot(),Qe(E),Ke(!1),W=!0)}if(Ne){for(var V=null,X,B=0;B<_;B++){if(He.nodeType===8&&He.data===Rt){E=He,W=!0,Ke(!1);break}var u=g[B],y=n(u,B);X=yt(He,p,V,null,u,y,B,d,s,r),p.items.set(y,X),V=X}_>0&&Qe(ot())}Ne||Zt(g,p,E,d,s,n,r),f!==null&&(_===0?w?ct(w):w=dt(()=>f(E)):w!==null&&Ot(w,()=>{w=null})),W&&Ke(!0),e(k)}),Ne&&(E=He)}function Zt(c,s,r,n,d,f,E){var ne,re,le,ce;var p=(d&Jt)!==0,L=(d&(at|tt))!==0,z=c.length,w=s.items,ee=s.first,k=ee,g,_=null,W,H=[],V=[],X,B,u,y;if(p)for(y=0;y<z;y+=1)X=c[y],B=f(X,y),u=w.get(B),u!==void 0&&((ne=u.a)==null||ne.measure(),(W??(W=new Set)).add(u));for(y=0;y<z;y+=1){if(X=c[y],B=f(X,y),u=w.get(B),u===void 0){var P=k?k.e.nodes_start:r;_=yt(P,s,_,_===null?s.first:_.next,X,B,y,n,d,E),w.set(B,_),H=[],V=[],k=_.next;continue}if(L&&Yt(u,X,y,d),(u.e.f&et)!==0&&(ct(u.e),p&&((re=u.a)==null||re.unfix(),(W??(W=new Set)).delete(u))),u!==k){if(g!==void 0&&g.has(u)){if(H.length<V.length){var U=V[0],x;_=U.prev;var q=H[0],D=H[H.length-1];for(x=0;x<H.length;x+=1)nt(H[x],U,r);for(x=0;x<V.length;x+=1)g.delete(V[x]);qe(s,q.prev,D.next),qe(s,_,q),qe(s,D,U),k=U,_=D,y-=1,H=[],V=[]}else g.delete(u),nt(u,k,r),qe(s,u.prev,u.next),qe(s,u,_===null?s.first:_.next),qe(s,_,u),_=u;continue}for(H=[],V=[];k!==null&&k.k!==B;)(k.e.f&et)===0&&(g??(g=new Set)).add(k),V.push(k),k=k.next;if(k===null)continue;u=k}H.push(u),_=u,k=u.next}if(k!==null||g!==void 0){for(var te=g===void 0?[]:vt(g);k!==null;)(k.e.f&et)===0&&te.push(k),k=k.next;var Z=te.length;if(Z>0){var ae=(d&ut)!==0&&z===0?r:null;if(p){for(y=0;y<Z;y+=1)(le=te[y].a)==null||le.measure();for(y=0;y<Z;y+=1)(ce=te[y].a)==null||ce.fix()}Vt(s,te,ae,w)}}p&&$t(()=>{var ve;if(W!==void 0)for(u of W)(ve=u.a)==null||ve.apply()}),rt.first=s.first&&s.first.e,rt.last=_&&_.e}function Yt(c,s,r,n){(n&at)!==0&&lt(c.v,s),(n&tt)!==0?lt(c.i,r):c.i=r}function yt(c,s,r,n,d,f,E,p,L,z){var w=(L&at)!==0,ee=(L&zt)===0,k=w?ee?O(d):st(d):d,g=(L&tt)===0?E:st(E),_={i:g,v:k,k:f,a:null,e:null,prev:r,next:n};try{return _.e=dt(()=>p(c,k,g,z),Ne),_.e.prev=r&&r.e,_.e.next=n&&n.e,r===null?s.first=_:(r.next=_,r.e.next=_.e),n!==null&&(n.prev=_,n.e.prev=_.e),_}finally{}}function nt(c,s,r){for(var n=c.next?c.next.e.nodes_start:r,d=s?s.e.nodes_start:r,f=c.e.nodes_start;f!==n;){var E=Ut(f);d.before(f),f=E}}function qe(c,s,r){s===null?c.first=r:(s.next=r,s.e.next=r&&r.e),r!==null&&(r.prev=s,r.e.prev=s&&s.e)}function Wt(c,s,r){var n=c==null?"":""+c;return s&&(n=n?n+" "+s:s),n===""?null:n}function $e(c,s,r,n,d,f){var E=c.__className;if(Ne||E!==r||E===void 0){var p=Wt(r,n);(!Ne||p!==c.getAttribute("class"))&&(p==null?c.removeAttribute("class"):c.className=p),c.__className=r}return f}function wt(c,s,r){if(c.multiple)return Qt(c,s);for(var n of c.options){var d=Fe(n);if(Ht(d,s)){n.selected=!0;return}}(!r||s!==void 0)&&(c.selectedIndex=-1)}function Xt(c,s){mt(()=>{var r=new MutationObserver(()=>{var n=c.__value;wt(c,n)});return r.observe(c,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{r.disconnect()}})}function Et(c,s,r=s){var n=!0;Ft(c,"change",d=>{var f=d?"[selected]":":checked",E;if(c.multiple)E=[].map.call(c.querySelectorAll(f),Fe);else{var p=c.querySelector(f)??c.querySelector("option:not([disabled])");E=p&&Fe(p)}r(E)}),mt(()=>{var d=s();if(wt(c,d,n),n&&d===void 0){var f=c.querySelector(":checked");f!==null&&(d=Fe(f),r(d))}c.__value=d,n=!1}),Xt(c)}function Qt(c,s){for(var r of c.options)r.selected=~s.indexOf(Fe(r))}function Fe(c){return"__value"in c?c.__value:c.value}function Ve(c){return function(...s){var r=s[0];return r.preventDefault(),c==null?void 0:c.apply(this,s)}}var Kt=A("<option> </option>"),ea=A('<div class="form-wrapper svelte-3crwtj"><div class="form-title svelte-3crwtj">REGISTRO DE USUARIOS</div> <form class="vibrant-form svelte-3crwtj"><input class="vibrant-input svelte-3crwtj" placeholder="Nombre" type="text" autocomplete="off" required> <input class="vibrant-input svelte-3crwtj" placeholder="Apellido" type="text" autocomplete="off" required> <input class="vibrant-input svelte-3crwtj" placeholder="Documento" type="text" autocomplete="off" required> <input class="vibrant-input svelte-3crwtj" placeholder="Teléfono" type="text" autocomplete="off" required> <input class="vibrant-input svelte-3crwtj" placeholder="Correo Electrónico" type="email" autocomplete="off" required> <input class="vibrant-input svelte-3crwtj" placeholder="Contraseña" type="password" autocomplete="off" required> <input class="vibrant-input svelte-3crwtj" id="Confirmar_Contraseña" placeholder="Confirmar Contraseña" type="password" autocomplete="off" required> <select id="roles" class="vibrant-select svelte-3crwtj"><option disabled selected>Seleccione el Rol:</option><!></select> <button class="vibrant-button svelte-3crwtj">REGISTRAR USUARIO</button></form></div>');function ta(c,s){Pe(s,!1);let r=O(""),n=O(""),d=O(""),f="",E=O(""),p=O(""),L=O(""),z=O(""),w=O([]),ee=!0,k=null;Me(async()=>{const te=await(await fetch("https://proyectomascotas.onrender.com/get_roles/")).json();l(w,te.resultado),console.log(e(w))});const g=Ze();async function _(){if(f=document.getElementById("Confirmar_Contraseña").value,f===e(d))try{const D=await Swal.fire({title:"¿Estás seguro?",text:"¡Desea registrar un nuevo Usuario a SensuTrack!?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sí, registrar!",customClass:{popup:"swal-popup",title:"custom-title"}}),te=parseInt(e(z),10);if(isNaN(te)){alert("Por favor, seleccione un rol válido."),g("hideLoader");return}if(D.isConfirmed){g("showLoader");const ae=await(await fetch("https://proyectomascotas.onrender.com/create_user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e(L),password:e(d),nombre:e(r),apellido:e(n),documento:e(E),telefono:e(p),id_rol:e(z),estado:ee})})).json();console.log("Respuesta del servidor:",ae),g("hideLoader"),ae.resultado==="Usuario creado"?Swal.fire({title:"¡Registrado!,¡Bienvenid@ "+e(r)+"!",icon:"success",customClass:{popup:"swal-popup",title:"custom-title"}}):ae.resultado==="El usuario ya existe"&&Swal.fire({icon:"error",title:"Error",text:"Lo sentimos, el usuario ya existe."})}else Swal.fire({title:"REGISTRO CANCELADO",icon:"error",customClass:{popup:"swal-popup",title:"custom-title"}})}catch(D){k=D.message,g("hideLoader"),alert("Error en la solicitud: "+k)}else Swal.fire({title:"Parece que ha ocurrido un error",text:"No son iguales las contraseñas, porfavor intente de nuevo :]",icon:"error",customClass:{popup:"swal-popup",title:"custom-title"}})}Le();var W=ea(),H=o(a(W),2),V=a(H);we(V);var X=o(V,2);we(X);var B=o(X,2);we(B);var u=o(B,2);we(u);var y=o(u,2);we(y);var P=o(y,2);we(P);var U=o(P,4);me(()=>{e(z),pt(()=>{e(w)})});var x=a(U);x.value=x.__value="";var q=o(x);Oe(q,1,()=>e(w),Re,(D,te)=>{var Z=Kt(),ae={},ne=a(Z,!0);t(Z),me(()=>{ae!==(ae=e(te).id)&&(Z.value=(Z.__value=e(te).id)??""),K(ne,e(te).nombre)}),C(D,Z)}),t(U),xe(2),t(H),t(W),Ae(V,()=>e(r),D=>l(r,D)),Ae(X,()=>e(n),D=>l(n,D)),Ae(B,()=>e(E),D=>l(E,D)),Ae(u,()=>e(p),D=>l(p,D)),Ae(y,()=>e(L),D=>l(L,D)),Ae(P,()=>e(d),D=>l(d,D)),Et(U,()=>e(z),D=>l(z,D)),J("submit",H,Ve(_)),C(c,W),ze()}var aa=A('<div class="vibrant-loader svelte-1cmc1uo"><div class="loader-bar svelte-1cmc1uo"></div></div>'),oa=A('<p class="error-message svelte-1cmc1uo"> </p>'),sa=A('<tr class="svelte-1cmc1uo"><td class="svelte-1cmc1uo"> </td><td class="svelte-1cmc1uo"> </td><td class="svelte-1cmc1uo"> </td><td class="svelte-1cmc1uo"> </td><td class="svelte-1cmc1uo"> </td><td class="svelte-1cmc1uo"> </td><td class="svelte-1cmc1uo"><span> </span></td></tr>'),ra=A('<h3 class="results-title svelte-1cmc1uo">Discapacitados Registrados</h3> <div class="table-container svelte-1cmc1uo"><table class="vibrant-table svelte-1cmc1uo"><thead class="svelte-1cmc1uo"><tr class="svelte-1cmc1uo"><th class="svelte-1cmc1uo">Id</th><th class="svelte-1cmc1uo">Nombre</th><th class="svelte-1cmc1uo">Género</th><th class="svelte-1cmc1uo">Tipo de Ceguera</th><th class="svelte-1cmc1uo">Cuidador</th><th class="svelte-1cmc1uo">Fecha y Hora</th><th class="svelte-1cmc1uo">Estado</th></tr></thead><tbody class="svelte-1cmc1uo"></tbody></table></div> <div class="export-action svelte-1cmc1uo"><button class="export-button svelte-1cmc1uo"><i class="bi bi-download svelte-1cmc1uo"></i> Exportar como PDF</button></div>',1),la=A('<div class="report-container svelte-1cmc1uo"><h2 class="report-title svelte-1cmc1uo">Reportes</h2> <div class="report-section svelte-1cmc1uo"><select class="vibrant-select svelte-1cmc1uo" id="opcion" required><option class="svelte-1cmc1uo">Discapacitados</option><option class="svelte-1cmc1uo">Usuarios</option><option class="svelte-1cmc1uo">Otro</option></select></div> <div class="date-range svelte-1cmc1uo"><div class="date-input svelte-1cmc1uo"><label for="desde_ciegos" class="vibrant-label svelte-1cmc1uo">Desde:</label> <input type="date" id="desde_ciegos" class="vibrant-date svelte-1cmc1uo"></div> <div class="date-input svelte-1cmc1uo"><label for="hasta_ciegos" class="vibrant-label svelte-1cmc1uo">Hasta:</label> <input type="date" id="hasta_ciegos" class="vibrant-date svelte-1cmc1uo"></div></div> <div class="report-action svelte-1cmc1uo"><button class="vibrant-button svelte-1cmc1uo"><i class="bi bi-file-earmark-text svelte-1cmc1uo"></i> Generar Reporte</button></div></div> <div class="report-results svelte-1cmc1uo" id="MostrarReporte"><!></div> <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet" class="svelte-1cmc1uo">',1);function ia(c,s){Pe(s,!1);let r=O([]),n=O(!1),d=O(null),f,E="",p="",L=O(!1);async function z(){try{if(l(n,!0),l(L,!1),l(d,null),f=document.getElementById("opcion").value,E=document.getElementById("desde_ciegos").value,p=document.getElementById("hasta_ciegos").value,console.log({fecha1:E,fecha2:p}),!E||!p){Swal.fire({icon:"error",title:"Error",text:"Por favor, selecciona ambas fechas."});return}const x=await fetch("https://proyectomascotas.onrender.com/Ciegos_Report",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fecha1:E,fecha2:p})});if(!x.ok)throw new Error("Error al cargar los datos");const q=await x.json();console.log(q),l(r,q.resultado),l(L,!0),setTimeout(()=>globalThis.$("#myTable").DataTable(),0)}catch(x){l(d,x.message),console.error("Error al generar reporte:",x)}finally{l(n,!1)}}function w(){const{jsPDF:x}=window.jspdf,q=new x,D=["Id","Nombre","Género","Tipo de Ceguera","Cuidador","Fecha","Estado"],te=e(r).map(Z=>[Z.id,Z.nombre,Z.genero,Z.tipo_ceguera,Z.nombre_cuidador,Z.fecha,Z.estado]);q.text(20,20,"Reporte de discapacitados visuales registrados en la página"),q.autoTable(D,te,{startY:30}),q.save("ReporteDiscapacitados.pdf"),Swal.fire({position:"center",icon:"success",title:"Se exportó de manera exitosa",showConfirmButton:!1,timer:1500})}Le();var ee=la(),k=Ge(ee),g=o(a(k),2),_=a(g),W=a(_);W.value=W.__value="1";var H=o(W);H.value=H.__value="2";var V=o(H);V.value=V.__value="3",t(_),t(g);var X=o(g,4),B=a(X);t(X),t(k);var u=o(k,2),y=a(u);{var P=x=>{var q=aa();C(x,q)},U=(x,q)=>{{var D=Z=>{var ae=oa(),ne=a(ae);t(ae),me(()=>K(ne,`Error: ${e(d)??""}`)),C(Z,ae)},te=(Z,ae)=>{{var ne=re=>{var le=ra(),ce=o(Ge(le),2),ve=a(ce),v=o(a(ve));Oe(v,5,()=>e(r),Re,(I,h)=>{var S=sa(),T=a(S),m=a(T,!0);t(T);var i=o(T),M=a(i,!0);t(i);var F=o(i),R=a(F,!0);t(F);var b=o(F),j=a(b,!0);t(b);var Y=o(b),Q=a(Y,!0);t(Y);var se=o(Y),$=a(se,!0);t(se);var de=o(se),ie=a(de),_e=a(ie,!0);t(ie),t(de),t(S),me(()=>{K(m,e(h).id),K(M,e(h).nombre),K(R,e(h).genero),K(j,e(h).tipo_ceguera),K(Q,e(h).nombre_cuidador),K($,e(h).fecha),$e(ie,1,`status-${e(h).estado?"active":"inactive"}`,"svelte-1cmc1uo"),K(_e,e(h).estado?"Activo":"Inactivo")}),C(I,S)}),t(v),t(ve),t(ce);var N=o(ce,2),G=a(N);t(N),J("click",G,w),C(re,le)};oe(Z,re=>{e(L)&&re(ne)},ae)}};oe(x,Z=>{e(d)?Z(D):Z(te,!1)},q)}};oe(y,x=>{e(n)?x(P):x(U,!1)})}t(u),xe(2),J("click",B,z),C(c,ee),ze()}var na=A('<option class="svelte-tkblz5"> </option>'),ca=A('<div class="gps-container svelte-tkblz5"><h2 class="gps-title svelte-tkblz5">REGISTRAR GPS</h2> <form class="vibrant-form svelte-tkblz5"><div class="input-group svelte-tkblz5"><p class="input-description svelte-tkblz5">Registre el Número de Serie del GPS:</p> <input id="numero_serie" type="text" class="vibrant-input svelte-tkblz5" placeholder="Ingrese el Serial del GPS" required></div> <div class="input-group svelte-tkblz5"><p class="input-description svelte-tkblz5">Usuarios Discapacitados Registrados:</p> <select id="ciegos" class="vibrant-select svelte-tkblz5" required><option disabled selected class="svelte-tkblz5">Selecciona el Discapacitado que tendrá el GPS</option><!></select></div> <button class="vibrant-button svelte-tkblz5"><i class="bi bi-check-circle-fill svelte-tkblz5"></i> CONFIRMAR REGISTRO</button></form></div> <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet" class="svelte-tkblz5">',1);function da(c,s){Pe(s,!1);let r=O(""),n=100,d=O(""),f=!0,E=null,p=null,L=O({});Me(async()=>{const y=await(await fetch("https://proyectomascotas.onrender.com/get_discapacitadosV_SIN_GPS/")).json();l(L,y.resultado),console.log(e(L))});const z=Ze();async function w(){try{z("showLoader");const u=await fetch("https://proyectomascotas.onrender.com/create_gps",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({numero_serie:e(r),nivel_bateria:n,id_ciego_vinculado:parseInt(e(d)),estado:f})}),y=await u.json();if(console.log(y),z("hideLoader"),u.ok)E=y.resultado,p=null,l(r,""),l(d,""),Swal.fire({title:"El GPS ha sido Registrado Exitosamente!",icon:"success",confirmButtonText:"OK"});else throw swalWithBootstrapButtons.fire({title:"Parece que ha ocurrido un error",text:"Revise que todo este correcto porfavor :]",icon:"error"}),new Error(y.detail||"Ocurrió un error")}catch(u){p=u.message,z("hideLoader"),E=null}}Le();var ee=ca(),k=Ge(ee),g=o(a(k),2),_=a(g),W=o(a(_),2);we(W),t(_);var H=o(_,2),V=o(a(H),2);me(()=>{e(d),pt(()=>{e(L)})});var X=a(V);X.value=X.__value="";var B=o(X);Oe(B,1,()=>e(L),Re,(u,y)=>{var P=na(),U={},x=a(P,!0);t(P),me(()=>{U!==(U=e(y).id)&&(P.value=(P.__value=e(y).id)??""),K(x,e(y).nombre)}),C(u,P)}),t(V),t(H),xe(2),t(g),t(k),xe(2),Ae(W,()=>e(r),u=>l(r,u)),Et(V,()=>e(d),u=>l(d,u)),J("submit",g,Ve(w)),C(c,ee),ze()}var va=A('<div class="mobile-loading svelte-1chucrw"><div class="spinner-border text-primary" role="status"><span class="visually-hidden">Loading...</span></div> <div>Cargando datos...</div></div>'),ua=A('<div class="alert alert-danger text-center"> </div>'),ma=A('<div class="no-results-message svelte-1chucrw"><i class="bi bi-exclamation-circle svelte-1chucrw"></i> No se encontraron resultados</div>'),pa=A('<button class="mobile-btn deactivate svelte-1chucrw"><i class="bi bi-lock"></i> <span>Desactivar</span></button>'),ba=A('<button class="mobile-btn activate svelte-1chucrw"><i class="bi bi-unlock"></i> <span>Activar</span></button>'),fa=A('<tr class="svelte-1chucrw"><td data-label="Usuario" class="svelte-1chucrw"> </td><td data-label="Nombre" class="svelte-1chucrw"> </td><td data-label="Apellido" class="svelte-1chucrw"> </td><td data-label="Documento" class="svelte-1chucrw"> </td><td data-label="Teléfono" class="svelte-1chucrw"> </td><td data-label="Estado" class="text-center svelte-1chucrw"><span> </span></td><td data-label="Acciones" class="text-center svelte-1chucrw"><div class="mobile-actions svelte-1chucrw"><button class="mobile-btn edit svelte-1chucrw"><i class="bi bi-pencil"></i> <span>Editar</span></button> <!></div></td></tr>'),ga=A('<div class="mobile-table-responsive svelte-1chucrw"><table class="mobile-table svelte-1chucrw" id="myTable"><thead class="svelte-1chucrw"><tr class="svelte-1chucrw"><th>Usuario</th><th>Nombre</th><th>Apellido</th><th>Documento</th><th>Teléfono</th><th>Estado</th><th>Acciones</th></tr></thead><tbody></tbody></table></div>'),_a=A(`<div id="Mostrarusuario"><div class="mobile-users-container svelte-1chucrw"><h2 class="mobile-users-title svelte-1chucrw"><i class="bi bi-people-fill me-2"></i>USUARIOS</h2> <div class="mobile-search-container svelte-1chucrw"><i class="bi bi-search svelte-1chucrw"></i> <input type="text" class="mobile-search-input svelte-1chucrw" placeholder="Buscar por nombre, correo o documento..."></div> <!></div></div> <div class="mobile-modal fade svelte-1chucrw" id="nav-listado" role="tabpanel" aria-labelledby="nav-listado-tab"><div class="container text-center"><p class="text-warning"></p></div> <div class="mobile-modal-card svelte-1chucrw"><div class="mobile-modal-header svelte-1chucrw"><h5><b>Editando Usuario</b></h5> <button class="mobile-close-btn svelte-1chucrw" aria-label="Cerrar edición de usuario"><i class="bi bi-x-lg"></i></button></div> <div class="mobile-modal-body svelte-1chucrw"><div class="mobile-form-group svelte-1chucrw"><label for="nombres" class="svelte-1chucrw"><b>Nombre:</b></label> <input type="text" id="nombres" placeholder="Nombres" maxlength="100" readonly="" class="svelte-1chucrw"></div> <div class="mobile-form-group svelte-1chucrw"><label for="apellidos" class="svelte-1chucrw"><b>Apellido:</b></label> <input type="text" id="apellidos" placeholder="Apellidos" readonly="" class="svelte-1chucrw"></div> <div class="mobile-form-group svelte-1chucrw"><label for="documento" class="svelte-1chucrw"><b>Documento:</b></label> <input type="text" id="documento" placeholder="Documento de identidad" readonly="" class="svelte-1chucrw"></div> <div class="mobile-form-group svelte-1chucrw"><label for="telefono" class="svelte-1chucrw"><b>Teléfono:</b></label> <input type="text" id="telefono" placeholder="Teléfono" maxlength="20" readonly="" class="svelte-1chucrw"></div> <div class="mobile-form-group svelte-1chucrw"><label for="correo" class="svelte-1chucrw"><b>Correo:</b></label> <input type="text" id="correo" placeholder="Correo electrónico" readonly="" class="svelte-1chucrw"></div> <div class="mobile-form-group svelte-1chucrw"><label for="estado" class="svelte-1chucrw"><b>Estado:</b></label> <select id="estado" class="svelte-1chucrw"><option>Activar</option><option>Desactivar</option></select></div> <div class="mobile-modal-footer svelte-1chucrw"><p>¡Al terminar de editar, haga clic en actualizar para guardar
                    los cambios!</p> <button class="mobile-update-btn svelte-1chucrw"><b>Actualizar</b></button></div></div></div></div> <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">`,1);function ha(c,s){Pe(s,!1);let r=O({}),n=O(!0),d=O(null),f=O(!1);Me(async()=>{try{console.log("2");const v=await fetch("https://proyectomascotas.onrender.com/get_users");if(!v.ok)throw new Error("Error al cargar los datos");const N=await v.json();l(r,N.resultado),console.log(e(r)),setTimeout(()=>{globalThis.$("#myTable").DataTable()},0)}catch(v){l(d,v.message)}finally{l(n,!1)}});async function E(){l(f,!1),document.getElementById("nav-listado").setAttribute("class","fade"),document.getElementById("Mostrarusuario").removeAttribute("class"),location.reload()}var p=1;async function L(v,N){l(f,!0),console.log("Editando a "+N);const G=document.getElementById("nav-listado");G.removeAttribute("class"),console.log(G),p=v,console.log(Number.isInteger(p)),console.log(p);let I=document.getElementById("Mostrarusuario");I.setAttribute("class","fade"),console.log(I);const h=I.parentElement;console.log(h),h.insertBefore(G,I),console.log("NO Entra al try de buscar");try{console.log("Entra al try de buscar");const S=await fetch(`https://proyectomascotas.onrender.com/get_user/${p}`,{method:"GET",headers:{"Content-Type":"application/json"}}),T=await S.json();console.log(S),console.log(T),console.log("Buscando al usuario seleccionado"),l(r,T.apellido),console.log(e(r)),document.getElementById("nombres").value=T.nombre,document.getElementById("apellidos").value=T.apellido,document.getElementById("documento").value=T.documento,document.getElementById("telefono").value=T.telefono,document.getElementById("correo").value=T.email,console.log("verificando el estado: "+T.estado);const m=T.estado?"1":"0";document.getElementById("estado").value=m;const i=document.getElementById("nombres");i.removeAttribute("readonly"),i.focus(),document.getElementById("apellidos").removeAttribute("readonly"),document.getElementById("documento").removeAttribute("readonly"),document.getElementById("telefono").removeAttribute("readonly"),document.getElementById("correo").removeAttribute("readonly"),document.getElementById("estado").removeAttribute("readonly")}catch(S){l(d,S.message)}finally{l(n,!1)}}async function z(){console.log(p);let v=document.getElementById("nombres").value,N=document.getElementById("apellidos").value,G=document.getElementById("documento").value,I=document.getElementById("telefono").value,h=document.getElementById("correo").value,S=document.getElementById("estado").value;S=S==="1",console.log("ID DE ESTADO ENVIADO A LA BASE DE DATOS ES "+S);try{console.log("Entra al try de actualzar");const T=await fetch(`https://proyectomascotas.onrender.com/update_user_admin/${p}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:h,nombre:v,apellido:N,documento:G,telefono:I,estado:S})});console.log("Actualizado"),Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:i=>{i.onmouseenter=Swal.stopTimer,i.onmouseleave=Swal.resumeTimer}}).fire({icon:"success",iconColor:"white",color:"white",background:"#00bdff",title:"usuario actualizado con exito"}),setTimeout(()=>{const i=document.getElementById("nav-listado");i.setAttribute("class","fade");let M=document.getElementById("Mostrarusuario");M.removeAttribute("class"),i.parentElement.insertBefore(M,i),location.reload()},3e3)}catch(T){console.error("Error al actualizar el usuario:",T),Swal.fire({icon:"error",title:"Error",text:T.message})}finally{l(n,!1)}}async function w(v){let N=0,G=v,I=N!==0;try{const h=await fetch(`https://proyectomascotas.onrender.com/update_estado_user/${G}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({estado:I})}),S=await h.json();h.ok?(Swal.mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:m=>{m.onmouseenter=Swal.stopTimer,m.onmouseleave=Swal.resumeTimer}}).fire({icon:"error",iconColor:"white",color:"white",background:"#ff4e4e",title:"El Usuario a sido desactivado de manera exitosa"}),setTimeout(()=>{location.reload()},3500)):alert("Error al desactivar: "+S.message||"Error desconocido")}catch(h){alert("Error en la solicitud: "+h.message)}}async function ee(v){let N=1,G=v,I=N===1;try{const h=await fetch(`https://proyectomascotas.onrender.com/update_estado_user/${G}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({estado:I})}),S=await h.json();h.ok?(Swal.mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:m=>{m.onmouseenter=Swal.stopTimer,m.onmouseleave=Swal.resumeTimer}}).fire({icon:"success",iconColor:"#000000",color:"black",background:"#76fa78",title:"El usuario se ha activado de manera exitosa"}),setTimeout(()=>{location.reload()},3500)):alert("Error al Activar: "+S.message||"Error desconocido")}catch(h){alert("Error en la solicitud: "+h.message)}}let k=O([]),g=O("");function _(v,N){if(!N)return v;const G=N.toLowerCase();return v.filter(I=>I.nombre.toLowerCase().includes(G)||I.email.toLowerCase().includes(G)||I.documento.toLowerCase().includes(G)||I.apellido.toLowerCase().includes(G))}function W(v){l(g,v)}bt(()=>(e(r),e(g)),()=>{l(k,_(e(r),e(g)))}),ft(),Le();var H=_a(),V=Ge(H),X=a(V),B=o(a(X),2),u=o(a(B),2);t(B);var y=o(B,2);{var P=v=>{var N=va();C(v,N)},U=(v,N)=>{{var G=h=>{var S=ua(),T=a(S,!0);t(S),me(()=>K(T,e(d))),C(h,S)},I=(h,S)=>{{var T=i=>{},m=(i,M)=>{{var F=b=>{var j=ma();C(b,j)},R=b=>{var j=ga(),Y=a(j),Q=o(a(Y));Oe(Q,5,()=>e(k),Re,(se,$)=>{var de=fa(),ie=a(de),_e=a(ie,!0);t(ie);var pe=o(ie),je=a(pe,!0);t(pe);var ue=o(pe),Te=a(ue,!0);t(ue);var he=o(ue),ke=a(he,!0);t(he);var be=o(he),Ie=a(be,!0);t(be);var fe=o(be),ge=a(fe),Be=a(ge,!0);t(ge),t(fe);var Ee=o(fe),Se=a(Ee),De=a(Se),ye=o(De,2);{var Ye=Ue=>{var Ce=pa();J("click",Ce,()=>w(e($).id)),C(Ue,Ce)},We=Ue=>{var Ce=ba();J("click",Ce,()=>ee(e($).id)),C(Ue,Ce)};oe(ye,Ue=>{e($).estado?Ue(Ye):Ue(We,!1)})}t(Se),t(Ee),t(de),me(()=>{K(_e,e($).email),K(je,e($).nombre),K(Te,e($).apellido),K(ke,e($).documento),K(Ie,e($).telefono),$e(ge,1,`mobile-badge ${e($).estado?"active":"inactive"}`,"svelte-1chucrw"),K(Be,e($).estado?"Activo":"Desactivado")}),J("click",De,()=>L(e($).id)),C(se,de)}),t(Q),t(Y),t(j),C(b,j)};oe(i,b=>{e(k).length===0?b(F):b(R,!1)},M)}};oe(h,i=>{e(f)?i(T):i(m,!1)},S)}};oe(v,h=>{e(d)?h(G):h(I,!1)},N)}};oe(y,v=>{e(n)?v(P):v(U,!1)})}t(X),t(V);var x=o(V,2),q=o(a(x),2),D=a(q),te=o(a(D),2);t(D);var Z=o(D,2),ae=o(a(Z),10),ne=o(a(ae),2),re=a(ne);re.value=re.__value="1";var le=o(re);le.value=le.__value="0",t(ne),t(ae);var ce=o(ae,2),ve=o(a(ce),2);t(ce),t(Z),t(q),t(x),xe(2),J("input",u,v=>W(v.target.value)),J("click",te,()=>E()),J("click",ve,z),C(c,H),ze()}var ya=A('<div class="mobile-loading svelte-1i34bfc"><div class="spinner-border text-primary" role="status"><span class="visually-hidden">Loading...</span></div> <div>Cargando datos...</div></div>'),wa=A('<div class="alert alert-danger text-center"> </div>'),Ea=A('<div class="no-results-message svelte-1i34bfc"><i class="bi bi-exclamation-circle svelte-1i34bfc"></i> No se encontraron resultados</div>'),xa=A('<button class="mobile-btn deactivate svelte-1i34bfc"><i class="bi bi-lock"></i> <span>Desactivar</span></button>'),Ta=A('<button class="mobile-btn activate svelte-1i34bfc"><i class="bi bi-unlock"></i> <span>Activar</span></button>'),ka=A('<tr class="svelte-1i34bfc"><td data-label="Nombre" class="svelte-1i34bfc"> </td><td data-label="Género" class="svelte-1i34bfc"> </td><td data-label="Tipo de Ceguera" class="svelte-1i34bfc"> </td><td data-label="Estado" class="text-center svelte-1i34bfc"><span> </span></td><td data-label="Acciones" class="text-center svelte-1i34bfc"><div class="mobile-actions svelte-1i34bfc"><button class="mobile-btn edit svelte-1i34bfc"><i class="bi bi-pencil"></i> <span>Editar</span></button> <!></div></td></tr>'),Ba=A('<div class="mobile-table-responsive svelte-1i34bfc"><table class="mobile-table svelte-1i34bfc" id="myTable"><thead class="svelte-1i34bfc"><tr class="svelte-1i34bfc"><th>Nombre</th><th>Género</th><th>Tipo de Ceguera</th><th>Estado</th><th>Acciones</th></tr></thead><tbody></tbody></table></div>'),Sa=A(`<div id="MostrarDiscapacitado"><div class="mobile-users-container svelte-1i34bfc"><h2 class="mobile-users-title svelte-1i34bfc"><i class="bi bi-person-heart me-2"></i>DISCAPACITADOS</h2> <div class="mobile-search-container svelte-1i34bfc"><i class="bi bi-search svelte-1i34bfc"></i> <input type="text" class="mobile-search-input svelte-1i34bfc" placeholder="Buscar por nombre, género o tipo de ceguera..."></div> <!></div></div> <div class="mobile-modal fade svelte-1i34bfc" id="nav-listado" role="tabpanel" aria-labelledby="nav-listado-tab"><div class="mobile-modal-card svelte-1i34bfc"><div class="mobile-modal-header svelte-1i34bfc"><h5><b>Editando Discapacitado</b></h5> <button class="mobile-close-btn svelte-1i34bfc" aria-label="Cerrar edición"><i class="bi bi-x-lg"></i></button></div> <div class="mobile-modal-body svelte-1i34bfc"><div class="mobile-form-group svelte-1i34bfc"><label for="nombres" class="svelte-1i34bfc"><b>Nombre:</b></label> <input type="text" id="nombres" placeholder="Nombres" maxlength="100" readonly="" class="svelte-1i34bfc"></div> <div class="mobile-form-group svelte-1i34bfc"><label for="genero" class="svelte-1i34bfc"><b>Género:</b></label> <input type="text" id="genero" placeholder="Género" readonly="" class="svelte-1i34bfc"></div> <div class="mobile-form-group svelte-1i34bfc"><label for="tipo_ceguera" class="svelte-1i34bfc"><b>Tipo de Ceguera:</b></label> <input type="text" id="tipo_ceguera" placeholder="Tipo de Ceguera" readonly="" class="svelte-1i34bfc"></div> <div class="mobile-form-group svelte-1i34bfc"><label for="estado" class="svelte-1i34bfc"><b>Estado:</b></label> <select id="estado" class="svelte-1i34bfc"><option>Activar</option><option>Desactivar</option></select></div> <div class="mobile-modal-footer svelte-1i34bfc"><p>¡Al terminar de editar, haga clic en actualizar para guardar
                    los cambios!</p> <button class="mobile-update-btn svelte-1i34bfc"><b>Actualizar</b></button></div></div></div></div> <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">`,1);function Ca(c,s){Pe(s,!1);let r=O({}),n=O(!0),d=O(null),f=O(!1);Me(async()=>{try{console.log("2");const v=await fetch("https://proyectomascotas.onrender.com/get_discapacitadosVCOMPLETOS");if(!v.ok)throw new Error("Error al cargar los datos");const N=await v.json();l(r,N.resultado),console.log(e(r)),setTimeout(()=>{globalThis.$("#myTable").DataTable()},0)}catch(v){l(d,v.message)}finally{l(n,!1)}});async function E(){l(f,!1),document.getElementById("nav-listado").setAttribute("class","fade"),document.getElementById("MostrarDiscapacitado").removeAttribute("class"),location.reload()}var p=1;async function L(v,N){l(f,!0),console.log("Editando a "+N);const G=document.getElementById("nav-listado");G.removeAttribute("class"),console.log(G),p=v,console.log(Number.isInteger(p)),console.log(p);let I=document.getElementById("MostrarDiscapacitado");I.setAttribute("class","fade"),console.log(I);const h=I.parentElement;console.log(h),h.insertBefore(G,I),console.log("NO Entra al try de buscar");try{console.log("Entra al try de buscar");const S=await fetch(`https://proyectomascotas.onrender.com/get_discapacitadoV/${p}`,{method:"GET",headers:{"Content-Type":"application/json"}}),T=await S.json();console.log(S),console.log(T),console.log("Buscando al usuario seleccionado"),l(r,T.nombre),console.log(e(r)),document.getElementById("nombres").value=T.nombre,document.getElementById("genero").value=T.id_genero_discapacitado,document.getElementById("tipo_ceguera").value=T.id_tipo_ceguera,console.log("verificando el estado: "+T.estado);const m=T.estado?"1":"0";document.getElementById("estado").value=m;const i=document.getElementById("nombres");i.removeAttribute("readonly"),i.focus(),document.getElementById("genero").removeAttribute("readonly"),document.getElementById("tipo_ceguera").removeAttribute("readonly"),document.getElementById("estado").removeAttribute("readonly")}catch(S){l(d,S.message)}finally{l(n,!1)}}async function z(){console.log(p);let v=document.getElementById("nombres").value,N=document.getElementById("genero").value,G=document.getElementById("tipo_ceguera").value,I=document.getElementById("estado").value;console.log("ID DE ESTADO ENVIADO A LA BASE DE DATOS ES "+I);try{console.log("Entra al try de actualzar");const h=await fetch(`https://proyectomascotas.onrender.com/update_user/${p}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({nombre:v,genero:N,tipo_ceguera:G,estado:I})});console.log("Actualizado"),Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:T=>{T.onmouseenter=Swal.stopTimer,T.onmouseleave=Swal.resumeTimer}}).fire({icon:"success",iconColor:"white",color:"white",background:"#00bdff",title:"Discapacitado actualizado con exito"}),setTimeout(()=>{const T=document.getElementById("nav-listado");T.setAttribute("class","fade");let m=document.getElementById("MostrarDiscapacitado");m.removeAttribute("class"),T.parentElement.insertBefore(m,T),location.reload()},3e3)}catch(h){l(d,h.message)}finally{l(n,!1)}}async function w(v){let N=0,G=v,I=N!==0;try{const h=await fetch(`https://proyectomascotas.onrender.com/update_estado_discapacitado/${G}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({estado:I})}),S=await h.json();h.ok?(Swal.mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:m=>{m.onmouseenter=Swal.stopTimer,m.onmouseleave=Swal.resumeTimer}}).fire({icon:"error",iconColor:"white",color:"white",background:"#ff4e4e",title:"El Discapacitado a sido desactivado de manera exitosa"}),setTimeout(()=>{location.reload()},3500)):alert("Error al desactivar: "+S.message||"Error desconocido")}catch(h){alert("Error en la solicitud: "+h.message)}}async function ee(v){let N=1,G=v,I=N===1;try{const h=await fetch(`https://proyectomascotas.onrender.com/update_estado_discapacitado/${G}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({estado:I})}),S=await h.json();h.ok?(Swal.mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:m=>{m.onmouseenter=Swal.stopTimer,m.onmouseleave=Swal.resumeTimer}}).fire({icon:"success",iconColor:"#000000",color:"black",background:"#76fa78",title:"El Discapacitado se ha activado de manera exitosa"}),setTimeout(()=>{location.reload()},3500)):alert("Error al Activar: "+S.message||"Error desconocido")}catch(h){alert("Error en la solicitud: "+h.message)}}let k=O([]),g=O("");function _(v,N){if(!N||typeof v>"u")return v;const G=N.toLowerCase();return v.filter(I=>I.nombre&&I.nombre.toLowerCase().includes(G)||I.genero&&I.genero.toLowerCase().includes(G)||I.tipo_ceguera&&I.tipo_ceguera.toLowerCase().includes(G))}function W(v){l(g,v)}bt(()=>(e(r),e(g)),()=>{l(k,_(e(r),e(g)))}),ft(),Le();var H=Sa(),V=Ge(H),X=a(V),B=o(a(X),2),u=o(a(B),2);t(B);var y=o(B,2);{var P=v=>{var N=ya();C(v,N)},U=(v,N)=>{{var G=h=>{var S=wa(),T=a(S,!0);t(S),me(()=>K(T,e(d))),C(h,S)},I=(h,S)=>{{var T=i=>{},m=(i,M)=>{{var F=b=>{var j=Ea();C(b,j)},R=b=>{var j=Ba(),Y=a(j),Q=o(a(Y));Oe(Q,5,()=>e(k),Re,(se,$)=>{var de=ka(),ie=a(de),_e=a(ie,!0);t(ie);var pe=o(ie),je=a(pe,!0);t(pe);var ue=o(pe),Te=a(ue,!0);t(ue);var he=o(ue),ke=a(he),be=a(ke,!0);t(ke),t(he);var Ie=o(he),fe=a(Ie),ge=a(fe),Be=o(ge,2);{var Ee=De=>{var ye=xa();J("click",ye,()=>w(e($).id)),C(De,ye)},Se=De=>{var ye=Ta();J("click",ye,()=>ee(e($).id)),C(De,ye)};oe(Be,De=>{e($).estado?De(Ee):De(Se,!1)})}t(fe),t(Ie),t(de),me(()=>{K(_e,e($).nombre),K(je,e($).genero),K(Te,e($).tipo_ceguera),$e(ke,1,`mobile-badge ${e($).estado?"active":"inactive"}`,"svelte-1i34bfc"),K(be,e($).estado?"Activo":"Desactivado")}),J("click",ge,()=>L(e($).id,e($).nombre)),C(se,de)}),t(Q),t(Y),t(j),C(b,j)};oe(i,b=>{e(r).length===0?b(F):b(R,!1)},M)}};oe(h,i=>{e(f)?i(T):i(m,!1)},S)}};oe(v,h=>{e(d)?h(G):h(I,!1)},N)}};oe(y,v=>{e(n)?v(P):v(U,!1)})}t(X),t(V);var x=o(V,2),q=a(x),D=a(q),te=o(a(D),2);t(D);var Z=o(D,2),ae=o(a(Z),6),ne=o(a(ae),2),re=a(ne);re.value=re.__value="1";var le=o(re);le.value=le.__value="0",t(ne),t(ae);var ce=o(ae,2),ve=o(a(ce),2);t(ce),t(Z),t(q),t(x),xe(2),J("input",u,v=>W(v.target.value)),J("click",te,()=>E()),J("click",ve,z),C(c,H),ze()}var Aa=A('<div class="row justify-content-center text-center"><div class="col-12 mb-2">Cargando datos...</div> <div class="spinner-border text-primary" role="status"><span class="visually-hidden">Loading...</span></div></div>'),Ia=A('<div class="alert alert-danger text-center"> </div>'),Da=A('<button class="btn btn-sm btn-outline-danger"><i class="bi bi-lock"></i> <span class="d-none d-md-inline">Desactivar</span></button>'),Ra=A('<button class="btn btn-sm btn-outline-success"><i class="bi bi-unlock"></i> <span class="d-none d-md-inline">Activar</span></button>'),Oa=A('<tr><td> </td><td class="text-center"><span> </span></td><td class="text-center"><div class="d-flex flex-wrap gap-1 justify-content-center"><button class="btn btn-sm btn-outline-primary"><i class="bi bi-pencil"></i> <span class="d-none d-md-inline">Editar</span></button> <!></div></td></tr>'),ja=A('<div class="table-responsive"><table class="table table-hover table-bordered align-middle" id="myTable"><thead class="thead-light text-center"><tr><th>Nombre</th><th>Estado</th><th>Opciones</th></tr></thead><tbody></tbody></table></div>'),Na=A('<label class="checkbox-label svelte-1stzg1k"><input type="checkbox"> </label>'),Ma=A(`<div class="wrapper svelte-1stzg1k"><div class="title small-title svelte-1stzg1k" style="color: dodgerblue;">REGISTRO DE ROLES</div> <form class="class-form svelte-1stzg1k"><input class="form__input small-input svelte-1stzg1k" placeholder="Nombre del Rol" type="text" required> <button class="flip-card__btn small-btn svelte-1stzg1k">Confirmar</button></form></div> <div id="MostrarRoles"><div class="container py-4 bg-light rounded shadow"><h2 class="text-center mb-4 pb-2 border-bottom border-3 border-primary fw-bold"><i class="bi bi-diagram-3 me-2"></i> Lista de Roles</h2> <!></div></div> <div class="fade" id="nav-listado" role="tabpanel" aria-labelledby="nav-listado-tab"><div class="container text-center"><p class="text-orange"></p></div> <div class="card border-dark shadow" style="width: 60%; margin-left: 20%;"><div class="card-header row g-2"><h5 class="card-title col-lg-11"><b>Editando Rol</b></h5> <button class="btn btn-close col-lg-1" aria-label="Cerrar edición de usuario"></button></div> <div class="card-body" style="margin-left: 10%;"><div class="row"><div class="col-lg-2"><p class="card-text"><b>Nombre:</b></p></div> <div class="col-lg-10"><input type="text" placeholder="Nombre del Modulo" id="nombre" maxlength="100" style="border: none; width: 55%;" readonly=""></div></div> <fieldset class="checkbox-group svelte-1stzg1k"><legend class="svelte-1stzg1k">Seleccione los módulos:</legend> <div class="checkbox-container svelte-1stzg1k"></div></fieldset> <div class="row pt-3"><div class="col-lg-2"><p class="card-text"><b>Estado:</b></p></div> <div class="col-lg-10"><select id="estado" name="opciones" style="border: none; width: 55%;"><option>Activar</option><option>Desactivar</option></select></div></div> <div class="row" style="margin-top: 4%;"><div class="col-lg-9">¡Al terminar de editar, darle click en actualizar para
                    guardar los cambios!</div> <div class="col-lg-3 text-end"><button class="btn btn-outline-info"><b>Actualizar</b></button></div> <div id="estado" class="col-lg-10"></div></div></div></div></div>`,1);function La(c,s){Pe(s,!1);const r=[];let n=O(""),d=!0,f=O({}),E=O({}),p=O(!0),L=O(null),z=O([]);Me(async()=>{const i=await(await fetch("https://proyectomascotas.onrender.com/get_modulos/")).json();l(E,i.resultado),console.log("ando ando",e(E))});const w=Ze();async function ee(){try{if((await Swal.fire({title:"¿Estás seguro?",text:"¡Desea registrar el siguiente Rol!? "+e(n),icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sí, registrar!",customClass:{popup:"swal-popup",title:"custom-title"}})).isConfirmed){w("showLoader");const i=await fetch("https://proyectomascotas.onrender.com/create_rol",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nombre:e(n),estado:d})}),M=await i.json();console.log(M),w("hideLoader"),i.ok?Swal.fire({title:"¡Se ha registrado el Rol llamado "+e(n)+" con exito!",icon:"success",customClass:{popup:"swal-popup",title:"custom-title"}}):alert("Error en el registro")}else console.log("Registro Cancelado")}catch(m){l(L,m.message),w("hideLoader"),alert("Error en la solicitud: "+e(L))}}Me(async()=>{try{console.log("2");const m=await fetch("https://proyectomascotas.onrender.com/get_roles");if(!m.ok)throw new Error("Error al cargar los datos");const i=await m.json();l(f,i.resultado),console.log(e(f)),setTimeout(()=>{globalThis.$("#myTable").DataTable()},0)}catch(m){l(L,m.message)}finally{l(p,!1)}});async function k(){document.getElementById("nav-listado").setAttribute("class","fade"),document.getElementById("MostrarRoles").removeAttribute("class"),location.reload()}var g=1;async function _(m,i){console.log("Editando el Rol "+i);const M=document.getElementById("nav-listado");M.removeAttribute("class"),console.log(M),g=m,console.log(Number.isInteger(g)),console.log(g);let F=document.getElementById("MostrarRoles");F.setAttribute("class","fade"),console.log(F);const R=F.parentElement;console.log(R),R.insertBefore(M,F),console.log("NO Entra al try de buscar");const j=await(await fetch("https://proyectomascotas.onrender.com/get_modulos/")).json();l(E,j.resultado),console.log("ando ando",e(E));try{console.log("Entra al try de buscar");const Y=await fetch(`https://proyectomascotas.onrender.com/get_rol/${g}`,{method:"GET",headers:{"Content-Type":"application/json"}}),Q=await Y.json();console.log(Y),console.log(Q),console.log("Buscando el Rol seleccionado"),l(f,Q.nombre),console.log(e(f)),document.getElementById("nombre").value=Q.nombre,console.log("Verificando el estado: "+Q.estado);const se=Q.estado?"1":"0";document.getElementById("estado").value=se;const $=document.getElementById("nombre");$.removeAttribute("readonly"),$.focus(),document.getElementById("estado").removeAttribute("readonly")}catch(Y){l(L,Y.message)}finally{l(p,!1)}}async function W(){console.log(g);let m=document.getElementById("nombre").value,i=document.getElementById("estado").value;console.log("ID DE ESTADO ENVIADO A LA BASE DE DATOS ES "+i);try{console.log("Entra al try de actualzar");const M=await fetch(`https://proyectomascotas.onrender.com/update_rol/${g}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({nombre:m,estado:i})});console.log("Actualizado");const F=await fetch(`https://proyectomascotas.onrender.com/update_moduloXrol02/${g}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_rol:g,id_modulo:e(z)})});console.log("Actualizado"),Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:b=>{b.onmouseenter=Swal.stopTimer,b.onmouseleave=Swal.resumeTimer}}).fire({icon:"success",iconColor:"white",color:"white",background:"#00bdff",title:"Rol actualizado exitosamente"}),setTimeout(()=>{const b=document.getElementById("nav-listado");b.setAttribute("class","fade");let j=document.getElementById("MostrarRoles");j.removeAttribute("class"),b.parentElement.insertBefore(j,b),location.reload()},3e3)}catch(M){l(L,M.message)}finally{l(p,!1)}}async function H(m){let i=0,M=m,F=i!==0;try{const R=await fetch(`https://proyectomascotas.onrender.com/update_estado_rol/${M}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({estado:F})}),b=await R.json();R.ok?(Swal.mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:Y=>{Y.onmouseenter=Swal.stopTimer,Y.onmouseleave=Swal.resumeTimer}}).fire({icon:"error",iconColor:"white",color:"white",background:"#ff4e4e",title:"El Rol a sido desactivado de manera exitosa"}),setTimeout(()=>{location.reload()},3500)):alert("Error al desactivar: "+b.message||"Error desconocido")}catch(R){alert("Error en la solicitud: "+R.message)}}async function V(m){let i=1,M=m,F=i===1;try{const R=await fetch(`https://proyectomascotas.onrender.com/update_estado_rol/${M}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({estado:F})}),b=await R.json();R.ok?(Swal.mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:Y=>{Y.onmouseenter=Swal.stopTimer,Y.onmouseleave=Swal.resumeTimer}}).fire({icon:"success",iconColor:"#000000",color:"black",background:"#76fa78",title:"El Rol se ha activado de manera exitosa"}),setTimeout(()=>{location.reload()},3500)):alert("Error al Activar: "+b.message||"Error desconocido")}catch(R){alert("Error en la solicitud: "+R.message)}}Le();var X=Ma(),B=Ge(X),u=o(a(B),2),y=a(u);we(y),xe(2),t(u),t(B);var P=o(B,2),U=a(P),x=o(a(U),2);{var q=m=>{var i=Aa();C(m,i)},D=(m,i)=>{{var M=R=>{var b=Ia(),j=a(b,!0);t(b),me(()=>K(j,e(L))),C(R,b)},F=R=>{var b=ja(),j=a(b),Y=o(a(j));Oe(Y,5,()=>e(f),Re,(Q,se)=>{var $=Oa(),de=a($),ie=a(de,!0);t(de);var _e=o(de),pe=a(_e),je=a(pe,!0);t(pe),t(_e);var ue=o(_e),Te=a(ue),he=a(Te),ke=o(he,2);{var be=fe=>{var ge=Da();J("click",ge,()=>H(e(se).id)),C(fe,ge)},Ie=fe=>{var ge=Ra();J("click",ge,()=>V(e(se).id)),C(fe,ge)};oe(ke,fe=>{e(se).estado?fe(be):fe(Ie,!1)})}t(Te),t(ue),t($),me(()=>{K(ie,e(se).nombre),$e(pe,1,`badge fs-6 ${e(se).estado?"bg-success":"bg-danger"}`),K(je,e(se).estado?"Activo":"Desactivado")}),J("click",he,()=>_(e(se).id,e(se).nombre)),C(Q,$)}),t(Y),t(j),t(b),C(R,b)};oe(m,R=>{e(L)?R(M):R(F,!1)},i)}};oe(x,m=>{e(p)?m(q):m(D,!1)})}t(U),t(P);var te=o(P,2),Z=o(a(te),2),ae=a(Z),ne=o(a(ae),2);t(ae);var re=o(ae,2),le=o(a(re),2),ce=o(a(le),2);Oe(ce,5,()=>e(E),Re,(m,i)=>{var M=Na(),F=a(M);we(F);var R,b=o(F);t(M),me(()=>{R!==(R=e(i).id)&&(F.value=(F.__value=e(i).id)??""),K(b,` ${e(i).nombre??""}`)}),gt(r,[],F,()=>(e(i).id,e(z)),j=>l(z,j)),C(m,M)}),t(ce),t(le);var ve=o(le,2),v=o(a(ve),2),N=a(v),G=a(N);G.value=G.__value="1";var I=o(G);I.value=I.__value="0",t(N),t(v),t(ve);var h=o(ve,2),S=o(a(h),2),T=a(S);t(S),xe(2),t(h),t(re),t(Z),t(te),Ae(y,()=>e(n),m=>l(n,m)),J("submit",u,Ve(ee)),J("click",ne,()=>k()),J("click",T,W),C(c,X),ze()}var Pa=A('<div class="row justify-content-center text-center"><div class="col-12 mb-2">Cargando datos...</div> <div class="spinner-border text-primary" role="status"><span class="visually-hidden">Loading...</span></div></div>'),za=A('<div class="alert alert-danger text-center"> </div>'),Ua=A('<button class="btn btn-sm btn-outline-danger"><i class="bi bi-lock"></i> <span class="d-none d-md-inline">Desactivar</span></button>'),qa=A('<button class="btn btn-sm btn-outline-success"><i class="bi bi-unlock"></i> <span class="d-none d-md-inline">Activar</span></button>'),Ga=A('<tr><td> </td><td> </td><td class="text-center"><span> </span></td><td class="text-center"><div class="d-flex flex-wrap gap-1 justify-content-center"><button class="btn btn-sm btn-outline-primary"><i class="bi bi-pencil"></i> <span class="d-none d-md-inline">Editar</span></button> <!></div></td></tr>'),$a=A('<div class="table-responsive"><table class="table table-hover table-bordered align-middle" id="myTable"><thead><tr><th>Nombre</th><th>Descripcion</th><th>Estado</th><th>Opciones</th></tr></thead><tbody></tbody></table></div>'),Ja=A(`<div class="wrapper svelte-t5nwrd"><div class="title small-title svelte-t5nwrd" style="color: dodgerblue;">REGISTRO DE MODULOS</div> <form class="class-form svelte-t5nwrd"><input class="form__input small-input svelte-t5nwrd" placeholder="Nombre del Modulo" type="text" required> <input class="form__input small-input svelte-t5nwrd" placeholder="Descripcion del Modulo" type="text" required> <input class="form__input small-input svelte-t5nwrd" placeholder="Ubicacion del Modulo" type="text" required> <input class="form__input small-input svelte-t5nwrd" placeholder="Ingrese el icono que tendra el Modulo (Boostrap)" type="text" required> <button class="flip-card__btn small-btn svelte-t5nwrd">Confirmar</button></form></div> <div id="MostrarModulos"><div class="container py-4 bg-light rounded shadow"><h2 class="text-center mb-4 pb-2 border-bottom border-3 border-primary fw-bold"><i class="bi-grid-3x3-gap-fill me-2"></i>Lista de Modulos</h2> <!></div></div> <div class="fade" id="nav-listado" role="tabpanel" aria-labelledby="nav-listado-tab"><div class="container text-center"><p class="text-orange"></p></div> <div class="card border-dark shadow" style="width: 60%; margin-left: 20%;"><div class="card-header row g-2"><h5 class="card-title col-lg-11"><b>Editando Modulo</b></h5> <button class="btn btn-close col-lg-1" aria-label="Cerrar edición de usuario"></button></div> <div class="card-body" style="margin-left: 10%;"><div class="row"><div class="col-lg-2"><p class="card-text"><b>Nombre:</b></p></div> <div class="col-lg-10"><input type="text" placeholder="Nombre del Modulo" id="nombre" maxlength="100" style="border: none; width: 55%;" readonly=""></div></div> <div class="row pt-3"><div class="col-lg-2"><p class="card-text"><b>Descripcion:</b></p></div> <div class="col-lg-10"><input type="text" placeholder="Descripcion del Modulo" id="descripcion" style="border: none; width: 55%;" readonly=""></div></div> <div class="row pt-3"><div class="col-lg-2"><p class="card-text"><b>Ubicación:</b></p></div> <div class="col-lg-10"><input type="text" placeholder="Descripcion del Modulo" id="ubicacion" style="border: none; width: 55%;" readonly=""></div></div> <div class="row pt-3"><div class="col-lg-2"><p class="card-text"><b>Estilo:</b></p></div> <div class="col-lg-10"><input type="text" placeholder="Descripcion del Modulo" id="estilo" style="border: none; width: 55%;" readonly=""></div></div> <div class="row pt-3"><div class="col-lg-2"><p class="card-text"><b>Estado:</b></p></div> <div class="col-lg-10"><select id="estado" name="opciones" style="border: none; width: 55%;"><option>Activar</option><option>Desactivar</option></select></div></div> <div class="row" style="margin-top: 4%;"><div class="col-lg-9">¡Al terminar de editar, darle click en actualizar para
                    guardar los cambios!</div> <div class="col-lg-3 text-end"><button class="btn btn-outline-info"><b>Actualizar</b></button></div> <div id="estado" class="col-lg-10"></div></div></div></div></div>`,1);function Ha(c,s){Pe(s,!1);let r=O(""),n=O(""),d=O(""),f=O(""),E=!0,p=O({}),L=O(!0),z=O(null);const w=Ze();async function ee(){try{if((await Swal.fire({title:"¿Estás seguro?",text:"¡Desea registrar el siguiente Modulo!?: "+e(r),icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sí, registrar!",customClass:{popup:"swal-popup",title:"custom-title"}})).isConfirmed){w("showLoader");const M=await fetch("https://proyectomascotas.onrender.com/create_modulo",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nombre:e(r),descripcion:e(n),ubicacion:e(d),estado:E,estilo:e(f)})}),F=await M.json();console.log(F),w("hideLoader"),M.ok?(Swal.fire({title:"¡Se ha registrado el Modulo llamado "+e(r)+" con exito!",icon:"success",customClass:{popup:"swal-popup",title:"custom-title"}}),setTimeout(()=>{location.reload()},3500)):alert("Error en el registro")}else console.log("Registro Cancelado")}catch(i){l(z,i.message),w("hideLoader"),alert("Error en la solicitud: "+e(z))}}Me(async()=>{try{console.log("2");const i=await fetch("https://proyectomascotas.onrender.com/get_modulos");if(!i.ok)throw new Error("Error al cargar los datos");const M=await i.json();l(p,M.resultado),console.log(e(p)),setTimeout(()=>{globalThis.$("#myTable").DataTable()},0)}catch(i){l(z,i.message)}finally{l(L,!1)}});async function k(){document.getElementById("nav-listado").setAttribute("class","fade"),document.getElementById("MostrarModulos").removeAttribute("class"),location.reload()}var g=1;async function _(i,M){console.log("Editando el modulo "+M);const F=document.getElementById("nav-listado");F.removeAttribute("class"),console.log(F),g=i,console.log(Number.isInteger(g)),console.log(g);let R=document.getElementById("MostrarModulos");R.setAttribute("class","fade"),console.log(R);const b=R.parentElement;console.log(b),b.insertBefore(F,R),console.log("NO Entra al try de buscar");try{console.log("Entra al try de buscar");const j=await fetch(`https://proyectomascotas.onrender.com/get_modulo/${g}`,{method:"GET",headers:{"Content-Type":"application/json"}}),Y=await j.json();console.log(j),console.log(Y),console.log("Buscando el Modulo seleccionado"),l(p,Y.nombre),console.log(e(p)),document.getElementById("nombre").value=Y.nombre,document.getElementById("descripcion").value=Y.descripcion,document.getElementById("ubicacion").value=Y.ubicacion,document.getElementById("estilo").value=Y.estilo,console.log("verificando el estado: "+Y.estado);const Q=Y.estado?"1":"0";document.getElementById("estado").value=Q;const se=document.getElementById("nombre");se.removeAttribute("readonly"),se.focus(),document.getElementById("descripcion").removeAttribute("readonly"),document.getElementById("ubicacion").removeAttribute("readonly"),document.getElementById("estilo").removeAttribute("readonly"),document.getElementById("estado").removeAttribute("readonly")}catch(j){l(z,j.message)}finally{l(L,!1)}}async function W(){console.log(g);let i=document.getElementById("nombre").value,M=document.getElementById("descripcion").value,F=document.getElementById("ubicacion").value,R=document.getElementById("estilo").value,b=document.getElementById("estado").value;console.log("ID DE ESTADO ENVIADO A LA BASE DE DATOS ES "+b);try{console.log("Entra al try de actualzar");const j=await fetch(`https://proyectomascotas.onrender.com/update_modulo/${g}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({nombre:i,descripcion:M,ubicacion:F,estilo:R,estado:b})});console.log("Actualizado"),Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:Q=>{Q.onmouseenter=Swal.stopTimer,Q.onmouseleave=Swal.resumeTimer}}).fire({icon:"success",iconColor:"white",color:"white",background:"#00bdff",title:"Modulo actualizado exitosamente"}),setTimeout(()=>{const Q=document.getElementById("nav-listado");Q.setAttribute("class","fade");let se=document.getElementById("MostrarModulos");se.removeAttribute("class"),Q.parentElement.insertBefore(se,Q),location.reload()},3e3)}catch(j){l(z,j.message)}finally{l(L,!1)}}async function H(i){let M=0,F=i,R=M!==0;try{const b=await fetch(`https://proyectomascotas.onrender.com/update_estado_modulo/${F}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({estado:R})}),j=await b.json();b.ok?(Swal.mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:Q=>{Q.onmouseenter=Swal.stopTimer,Q.onmouseleave=Swal.resumeTimer}}).fire({icon:"error",iconColor:"white",color:"white",background:"#ff4e4e",title:"El Modulo a sido desactivado de manera exitosa"}),setTimeout(()=>{location.reload()},3500)):alert("Error al desactivar: "+j.message||"Error desconocido")}catch(b){alert("Error en la solicitud: "+b.message)}}async function V(i){let M=1,F=i,R=M===1;try{const b=await fetch(`https://proyectomascotas.onrender.com/update_estado_modulo/${F}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({estado:R})}),j=await b.json();b.ok?(Swal.mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:Q=>{Q.onmouseenter=Swal.stopTimer,Q.onmouseleave=Swal.resumeTimer}}).fire({icon:"success",iconColor:"#000000",color:"black",background:"#76fa78",title:"El Modulo se ha activado de manera exitosa"}),setTimeout(()=>{location.reload()},3500)):alert("Error al Activar: "+j.message||"Error desconocido")}catch(b){alert("Error en la solicitud: "+b.message)}}Le();var X=Ja(),B=Ge(X),u=o(a(B),2),y=a(u);we(y);var P=o(y,2);we(P);var U=o(P,2);we(U);var x=o(U,2);we(x),xe(2),t(u),t(B);var q=o(B,2),D=a(q),te=o(a(D),2);{var Z=i=>{var M=Pa();C(i,M)},ae=(i,M)=>{{var F=b=>{var j=za(),Y=a(j,!0);t(j),me(()=>K(Y,e(z))),C(b,j)},R=b=>{var j=$a(),Y=a(j),Q=o(a(Y));Oe(Q,5,()=>e(p),Re,(se,$)=>{var de=Ga(),ie=a(de),_e=a(ie,!0);t(ie);var pe=o(ie),je=a(pe,!0);t(pe);var ue=o(pe),Te=a(ue),he=a(Te,!0);t(Te),t(ue);var ke=o(ue),be=a(ke),Ie=a(be),fe=o(Ie,2);{var ge=Ee=>{var Se=Ua();J("click",Se,()=>H(e($).id)),C(Ee,Se)},Be=Ee=>{var Se=qa();J("click",Se,()=>V(e($).id)),C(Ee,Se)};oe(fe,Ee=>{e($).estado?Ee(ge):Ee(Be,!1)})}t(be),t(ke),t(de),me(()=>{K(_e,e($).nombre),K(je,e($).descripcion),$e(Te,1,`badge ${e($).estado?"bg-success":"bg-danger"}`),K(he,e($).estado?"Activo":"Desactivado")}),J("click",Ie,()=>_(e($).id,e($).nombre)),C(se,de)}),t(Q),t(Y),t(j),C(b,j)};oe(i,b=>{e(z)?b(F):b(R,!1)},M)}};oe(te,i=>{e(L)?i(Z):i(ae,!1)})}t(D),t(q);var ne=o(q,2),re=o(a(ne),2),le=a(re),ce=o(a(le),2);t(le);var ve=o(le,2),v=o(a(ve),8),N=o(a(v),2),G=a(N),I=a(G);I.value=I.__value="1";var h=o(I);h.value=h.__value="0",t(G),t(N),t(v);var S=o(v,2),T=o(a(S),2),m=a(T);t(T),xe(2),t(S),t(ve),t(re),t(ne),Ae(y,()=>e(r),i=>l(r,i)),Ae(P,()=>e(n),i=>l(n,i)),Ae(U,()=>e(d),i=>l(d,i)),Ae(x,()=>e(f),i=>l(f,i)),J("submit",u,Ve(ee)),J("click",ce,()=>k()),J("click",m,W),C(c,X),ze()}var Fa=A('<div class="admin-container svelte-frsr9g"><div class="admin-card svelte-frsr9g"><div class="card-header svelte-frsr9g"><h2>📊 Panel de Estadísticas</h2></div> <div class="card-body svelte-frsr9g"><div class="iframe-container svelte-frsr9g"><iframe title="SensuTrack - Estadísticas" src="https://app.powerbi.com/view?r=eyJrIjoiZWE4NDU5OWUtNDZiMi00M2RjLTk0NTUtZWUxZDkyMjMwZDQyIiwidCI6IjFlOWFhYmU4LTY3ZjgtNGYxYy1hMzI5LWE3NTRlOTI0OTlhZSIsImMiOjR9" frameborder="0" allowfullscreen="" class="svelte-frsr9g"></iframe></div></div></div></div>');function Va(c){var s=Fa();C(c,s)}var Za=A('<div class="row justify-content-center text-center"><div class="col-12 mb-2">Cargando datos...</div> <div class="spinner-border text-primary" role="status"><span class="visually-hidden">Loading...</span></div></div>'),Ya=A('<div class="alert alert-danger text-center"> </div>'),Wa=A('<button class="btn btn-sm btn-outline-danger"><i class="bi bi-lock"></i> <span class="d-none d-md-inline">Desactivar</span></button>'),Xa=A('<button class="btn btn-sm btn-outline-success"><i class="bi bi-unlock"></i> <span class="d-none d-md-inline">Activar</span></button>'),Qa=A('<tr><td> </td><td> </td><td> </td><td> </td><td> </td><td class="text-center"><span> </span></td><td class="text-center"><div class="d-flex flex-wrap gap-1 justify-content-center"><button class="btn btn-sm btn-outline-primary"><i class="bi bi-pencil"></i> <span class="d-none d-md-inline">Editar</span></button> <!></div></td></tr>'),Ka=A('<div class="table-responsive"><table class="table table-hover table-bordered align-middle" id="myTable"><thead class="thead-light text-center"><tr><th>ID</th><th>Usuario</th><th>Latitud</th><th>Longitud</th><th>Lugar</th><th>Estado</th><th>Opcion</th></tr></thead><tbody></tbody></table></div>'),eo=A('<div id="Mostrarusuario"><div class="container py-4"><h2 class="text-center mb-4 pb-2 border-bottom border-3 border-primary fw-bold"><i class="bi-clock-history me-2"></i>Historial de Ubicaciones</h2> <!></div></div>');function to(c,s){Pe(s,!1);let r=O([]),n=O(!0),d=O(null);Me(async()=>{try{const w=await fetch("http://localhost:3000/historial");if(!w.ok)throw new Error("Error al cargar los datos");const ee=await w.json();console.log(ee),l(r,Array.isArray(ee)?ee:[ee]),setTimeout(()=>{globalThis.$&&globalThis.$.fn.DataTable?globalThis.$("#myTable").DataTable():console.error("jQuery o DataTables no están cargados")},0)}catch(w){l(d,w.message)}finally{l(n,!1)}}),Le();var f=eo(),E=a(f),p=o(a(E),2);{var L=w=>{var ee=Za();C(w,ee)},z=(w,ee)=>{{var k=_=>{var W=Ya(),H=a(W,!0);t(W),me(()=>K(H,e(d))),C(_,W)},g=_=>{var W=Ka(),H=a(W),V=o(a(H));Oe(V,5,()=>e(r),Re,(X,B)=>{var u=Qa(),y=a(u),P=a(y,!0);t(y);var U=o(y),x=a(U,!0);t(U);var q=o(U),D=a(q,!0);t(q);var te=o(q),Z=a(te,!0);t(te);var ae=o(te),ne=a(ae,!0);t(ae);var re=o(ae),le=a(re),ce=a(le,!0);t(le),t(re);var ve=o(re),v=a(ve),N=a(v),G=o(N,2);{var I=S=>{var T=Wa();J("click",T,()=>desactivar(e(B).id)),C(S,T)},h=S=>{var T=Xa();J("click",T,()=>activar(e(B).id)),C(S,T)};oe(G,S=>{e(B).estado?S(I):S(h,!1)})}t(v),t(ve),t(u),me(()=>{K(P,e(B).id),K(x,e(B).id_usuario),K(D,e(B).latitud),K(Z,e(B).longitud),K(ne,e(B).lugar),$e(le,1,`badge ${e(B).estado?"bg-success":"bg-danger"}`),K(ce,e(B).estado?"Activo":"Desactivado")}),J("click",N,()=>editar(e(B).id,e(B).nombre)),C(X,u)}),t(V),t(H),t(W),C(_,W)};oe(w,_=>{e(d)?_(k):_(g,!1)},ee)}};oe(p,w=>{e(n)?w(L):w(z,!1)})}t(E),t(f),C(c,f),ze()}var ao=A('<option class="svelte-1r4v3de"> </option>'),oo=A('<label class="checkbox-label svelte-1r4v3de"><input type="checkbox" name="modulo" class="svelte-1r4v3de"> </label>'),so=A('<div class="wrapper svelte-1r4v3de"><div class="title small-title svelte-1r4v3de" style="color: dodgerblue;">REGISTRO DE MODULOSXROL</div> <form class="class-form svelte-1r4v3de"><span class="svelte-1r4v3de">Roles:</span> <select id="roles" class="form__input svelte-1r4v3de" required><option disabled selected class="svelte-1r4v3de">Selecciona un rol</option><!></select> <fieldset class="checkbox-group svelte-1r4v3de"><legend class="svelte-1r4v3de">Módulos:</legend> <span class="svelte-1r4v3de">Selecciona los Modulos que tendra el Rol seleccionado:</span> <div class="checkbox-container svelte-1r4v3de"></div></fieldset> <button class="flip-card__btn small-btn svelte-1r4v3de">Confirmar</button></form> <div class="loader-container svelte-1r4v3de"><div class="loader-text svelte-1r4v3de"><span class="svelte-1r4v3de">S</span> <span class="svelte-1r4v3de">e</span> <span class="svelte-1r4v3de">n</span> <span class="svelte-1r4v3de">s</span> <span class="svelte-1r4v3de">u</span> <span class="svelte-1r4v3de">T</span> <span class="svelte-1r4v3de">r</span> <span class="svelte-1r4v3de">a</span> <span class="svelte-1r4v3de">c</span> <span class="svelte-1r4v3de">k</span></div></div></div>');function ro(c,s){Pe(s,!1);const r=[];let n="",d=!0,f=O([]),E=[],p=O({}),L=O({}),z=null,w=O();Me(async()=>{const U=await(await fetch("https://proyectomascotas.onrender.com/get_modulos/")).json();l(p,U.resultado),console.log(e(p));const q=await(await fetch("https://proyectomascotas.onrender.com/get_roles/")).json();l(L,q.resultado),console.log(e(L))});function ee(P){P&&(P.style.display="flex")}function k(P){P&&(P.style.display="none")}async function g(){console.log(e(f)),console.log(E),n=document.getElementById("roles").value;try{if((await Swal.fire({title:"¿Estás seguro?",text:"¡Desea registrar el siguiente ModuloxRol!?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sí, registrar!",customClass:{popup:"swal-popup",title:"custom-title"}})).isConfirmed){ee(e(w));const U=await fetch("https://proyectomascotas.onrender.com/create_moduloXrol",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_modulo:e(f),id_rol:n,estado:d})}),x=await U.json();console.log(x),k(e(w)),U.ok?(Swal.fire({title:"¡Se ha registrado el ModuloxRol con exito ",icon:"success",customClass:{popup:"swal-popup",title:"custom-title"}}),setTimeout(()=>{location.reload()},3500)):alert("Error en el registro")}else console.log("Registro Cancelado")}catch(P){z=P.message,k(e(w)),alert("Error en la solicitud: "+z)}}Le();var _=so(),W=o(a(_),2),H=o(a(W),2),V=a(H);V.value=V.__value="";var X=o(V);Oe(X,1,()=>e(L),Re,(P,U)=>{var x=ao(),q={},D=a(x,!0);t(x),me(()=>{q!==(q=e(U).id)&&(x.value=(x.__value=e(U).id)??""),K(D,e(U).nombre)}),C(P,x)}),t(H);var B=o(H,2),u=o(a(B),4);Oe(u,5,()=>e(p),Re,(P,U)=>{var x=oo(),q=a(x);we(q);var D,te=o(q);t(x),me(()=>{_t(q,"id",`modulo-${e(U).id??""}`),D!==(D=e(U).id)&&(q.value=(q.__value=e(U).id)??""),K(te,` ${e(U).nombre??""}`)}),gt(r,[],q,()=>(e(U).id,e(f)),Z=>l(f,Z)),C(P,x)}),t(u),t(B),xe(2),t(W);var y=o(W,2);ht(y,P=>l(w,P),()=>e(w)),t(_),J("submit",W,Ve(g)),C(c,_),ze()}var lo=A('<button class="overlay svelte-1ig2dkm" aria-label="Cerrar menú"></button>'),io=A(`<div class="admin-welcome svelte-1ig2dkm"><h1 class="svelte-1ig2dkm">👋 ¡Bienvenido, Administrador!</h1> <p class="subtitle svelte-1ig2dkm">Este panel te permite tener el control total del sistema
                    para apoyar a las personas ciegas con eficiencia y
                    seguridad.</p></div>`),no=A('<div class="mobile-layout svelte-1ig2dkm"><header class="mobile-header svelte-1ig2dkm"><button class="menu-button svelte-1ig2dkm"><i class="bi bi-list svelte-1ig2dkm"></i></button> <h1 class="svelte-1ig2dkm">Admin</h1> <div class="header-spacer svelte-1ig2dkm"></div></header> <div><nav class="svelte-1ig2dkm"><button class="svelte-1ig2dkm"><i class="bi bi-person-add svelte-1ig2dkm"></i> <span class="svelte-1ig2dkm">Registrar Usuario</span></button> <button class="svelte-1ig2dkm"><i class="bi bi-file-earmark-spreadsheet svelte-1ig2dkm"></i> <span class="svelte-1ig2dkm">Reportes</span></button> <button class="svelte-1ig2dkm"><i class="bi bi-geo-alt svelte-1ig2dkm"></i> <span class="svelte-1ig2dkm">Registrar GPS</span></button> <button class="svelte-1ig2dkm"><i class="bi bi-table svelte-1ig2dkm"></i> <span class="svelte-1ig2dkm">Tabla Usuarios</span></button> <button class="svelte-1ig2dkm"><i class="bi bi-table svelte-1ig2dkm"></i> <span class="svelte-1ig2dkm">Tabla Discapacitados</span></button> <button class="svelte-1ig2dkm"><i class="bi bi-person-badge svelte-1ig2dkm"></i> <span class="svelte-1ig2dkm">Registrar Roles</span></button> <button class="svelte-1ig2dkm"><i class="bi bi-stack svelte-1ig2dkm"></i> <span class="svelte-1ig2dkm">Registrar Módulos</span></button> <button class="svelte-1ig2dkm"><i class="bi bi-shield-lock svelte-1ig2dkm"></i> <span class="svelte-1ig2dkm">Asignar Módulo</span></button> <button class="svelte-1ig2dkm"><i class="bi bi-graph-up svelte-1ig2dkm"></i> <span class="svelte-1ig2dkm">Tablero</span></button> <button class="svelte-1ig2dkm"><i class="bi bi-map svelte-1ig2dkm"></i> <span class="svelte-1ig2dkm">Ubicaciones</span></button> <button class="logout svelte-1ig2dkm"><i class="bi bi-power svelte-1ig2dkm"></i> <span class="svelte-1ig2dkm">Cerrar Sesión</span></button></nav></div> <!> <main class="mobile-content svelte-1ig2dkm"><!> <div class="loader-container svelte-1ig2dkm"><div class="loader-text svelte-1ig2dkm"><span class="svelte-1ig2dkm">S</span> <span class="svelte-1ig2dkm">e</span> <span class="svelte-1ig2dkm">n</span> <span class="svelte-1ig2dkm">s</span> <span class="svelte-1ig2dkm">u</span> <span class="svelte-1ig2dkm">T</span> <span class="svelte-1ig2dkm">r</span> <span class="svelte-1ig2dkm">a</span> <span class="svelte-1ig2dkm">c</span> <span class="svelte-1ig2dkm">k</span></div></div></main></div> <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet" class="svelte-1ig2dkm">',1);function ho(c){let s=O("X"),r=O(),n=O(!1);function d(){it(r,e(r).style.display="flex")}function f(){it(r,e(r).style.display="none")}function E(){l(n,!e(n))}function p(){localStorage.clear(),window.location.href="/"}function L(){l(s,"registro_usuario"),l(n,!1)}function z(){l(s,"reportes"),l(n,!1)}function w(){l(s,"registro_gps"),l(n,!1)}function ee(){l(s,"tabla_usuarios"),l(n,!1)}function k(){l(s,"tabla_discapacitados"),l(n,!1)}function g(){l(s,"registro_roles"),l(n,!1)}function _(){l(s,"registro_modulos"),l(n,!1)}function W(){l(s,"modulos_por_rol"),l(n,!1)}function H(){l(s,"tablero"),l(n,!1)}function V(){l(s,"historial_ubicaciones"),l(n,!1)}var X=no(),B=Ge(X),u=a(B),y=a(u);xe(4),t(u);var P=o(u,2),U=a(P),x=a(U),q=o(x,2),D=o(q,2),te=o(D,2),Z=o(te,2),ae=o(Z,2),ne=o(ae,2),re=o(ne,2),le=o(re,2),ce=o(le,2),ve=o(ce,2);t(U),t(P);var v=o(P,2);{var N=m=>{var i=lo();J("click",i,E),C(m,i)};oe(v,m=>{e(n)&&m(N)})}var G=o(v,2),I=a(G);{var h=m=>{var i=io();C(m,i)},S=(m,i)=>{{var M=R=>{ta(R,{$$events:{showLoader:d,hideLoader:f}})},F=(R,b)=>{{var j=Q=>{ia(Q,{})},Y=(Q,se)=>{{var $=ie=>{da(ie,{$$events:{showLoader:d,hideLoader:f}})},de=(ie,_e)=>{{var pe=ue=>{ha(ue,{})},je=(ue,Te)=>{{var he=be=>{Ca(be,{})},ke=(be,Ie)=>{{var fe=Be=>{La(Be,{$$events:{showLoader:d,hideLoader:f}})},ge=(Be,Ee)=>{{var Se=ye=>{Ha(ye,{$$events:{showLoader:d,hideLoader:f}})},De=(ye,Ye)=>{{var We=Ce=>{ro(Ce,{})},Ue=(Ce,xt)=>{{var Tt=Je=>{Va(Je)},kt=(Je,Bt)=>{{var St=Xe=>{to(Xe,{})};oe(Je,Xe=>{e(s)==="historial_ubicaciones"&&Xe(St)},Bt)}};oe(Ce,Je=>{e(s)==="tablero"?Je(Tt):Je(kt,!1)},xt)}};oe(ye,Ce=>{e(s)==="modulos_por_rol"?Ce(We):Ce(Ue,!1)},Ye)}};oe(Be,ye=>{e(s)==="registro_modulos"?ye(Se):ye(De,!1)},Ee)}};oe(be,Be=>{e(s)==="registro_roles"?Be(fe):Be(ge,!1)},Ie)}};oe(ue,be=>{e(s)==="tabla_discapacitados"?be(he):be(ke,!1)},Te)}};oe(ie,ue=>{e(s)==="tabla_usuarios"?ue(pe):ue(je,!1)},_e)}};oe(Q,ie=>{e(s)==="registro_gps"?ie($):ie(de,!1)},se)}};oe(R,Q=>{e(s)==="reportes"?Q(j):Q(Y,!1)},b)}};oe(m,R=>{e(s)==="registro_usuario"?R(M):R(F,!1)},i)}};oe(I,m=>{e(s)==="X"?m(h):m(S,!1)})}var T=o(I,2);ht(T,m=>l(r,m),()=>e(r)),t(G),t(B),xe(2),me(()=>{_t(y,"aria-label",e(n)?"Cerrar menú":"Abrir menú"),$e(P,1,`mobile-sidebar ${e(n)?"open":""}`,"svelte-1ig2dkm")}),J("click",y,E),J("click",x,L),J("click",q,z),J("click",D,w),J("click",te,ee),J("click",Z,k),J("click",ae,g),J("click",ne,_),J("click",re,W),J("click",le,H),J("click",ce,V),J("click",ve,p),C(c,X)}export{ho as component};
