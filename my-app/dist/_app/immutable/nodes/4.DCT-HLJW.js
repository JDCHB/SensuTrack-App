import{t as A,a as I}from"../chunks/BiFTqAz5.js";import{i as Ce}from"../chunks/BO4Ofuen.js";import{h as Ie,a as Bt,b as St,l as e,ai as It,c as At,r as Ke,s as Ze,d as Ye,g as Ge,D as Ct,e as rt,f as lt,p as Dt,J as it,Q as Rt,v as U,aw as et,ax as We,N as tt,ay as Xe,az as at,aA as Ot,I as jt,aB as Nt,a6 as Mt,aC as Qe,aD as Pt,B as zt,A as Lt,L as Ut,aE as nt,q as $t,aF as qt,i as ct,Z as Gt,k as De,w as l,n as o,o as a,a7 as ve,aG as dt,t,x as Ee,m as Re,y as Me,aH as ot}from"../chunks/C1IVKEZp.js";import{l as Jt,e as V}from"../chunks/jLK-eqbf.js";import{i as le}from"../chunks/CCRyYZTv.js";import{r as fe,b as ye,a as vt,s as ut}from"../chunks/CVTxyvDs.js";import{b as mt}from"../chunks/nj7IJUNJ.js";import{s as ee}from"../chunks/gTXRWDML.js";import{o as Ae,c as Fe}from"../chunks/CAomzxLl.js";function xe(n,s){return s}function Ht(n,s,r,i){for(var d=[],g=s.length,u=0;u<g;u++)Ot(s[u].e,d,!0);var x=g>0&&d.length===0&&r!==null;if(x){var j=r.parentNode;jt(j),j.append(r),i.clear(),Ne(n,s[0].prev,s[g-1].next)}Nt(d,()=>{for(var P=0;P<g;P++){var h=s[P];x||(i.delete(h.k),Ne(n,h.prev,h.next)),Mt(h.e,!x)}})}function Te(n,s,r,i,d,g=null){var u=n,x={flags:s,items:new Map,first:null},j=(s&nt)!==0;if(j){var P=n;u=Ie?Ze(Lt(P)):P.appendChild(Ut())}Ie&&Bt();var h=null,te=!1,E=It(()=>{var f=r();return Rt(f)?f:f==null?[]:it(f)});St(()=>{var f=e(E),m=f.length;if(te&&m===0)return;te=m===0;let Z=!1;if(Ie){var Y=u.data===At;Y!==(m===0)&&(u=Ke(),Ze(u),Ye(!1),Z=!0)}if(Ie){for(var W=null,X,T=0;T<m;T++){if(Ge.nodeType===8&&Ge.data===Ct){u=Ge,Z=!0,Ye(!1);break}var v=f[T],p=i(v,T);X=pt(Ge,x,W,null,v,p,T,d,s,r),x.items.set(p,X),W=X}m>0&&Ze(Ke())}Ie||Ft(f,x,u,d,s,i,r),g!==null&&(m===0?h?rt(h):h=lt(()=>g(u)):h!==null&&Dt(h,()=>{h=null})),Z&&Ye(!0),e(E)}),Ie&&(u=Ge)}function Ft(n,s,r,i,d,g,u){var _,R,$,J;var x=(d&qt)!==0,j=(d&(Qe|Xe))!==0,P=n.length,h=s.items,te=s.first,E=te,f,m=null,Z,Y=[],W=[],X,T,v,p;if(x)for(p=0;p<P;p+=1)X=n[p],T=g(X,p),v=h.get(T),v!==void 0&&((_=v.a)==null||_.measure(),(Z??(Z=new Set)).add(v));for(p=0;p<P;p+=1){if(X=n[p],T=g(X,p),v=h.get(T),v===void 0){var S=E?E.e.nodes_start:r;m=pt(S,s,m,m===null?s.first:m.next,X,T,p,i,d,u),h.set(T,m),Y=[],W=[],E=m.next;continue}if(j&&Vt(v,X,p,d),(v.e.f&We)!==0&&(rt(v.e),x&&((R=v.a)==null||R.unfix(),(Z??(Z=new Set)).delete(v))),v!==E){if(f!==void 0&&f.has(v)){if(Y.length<W.length){var N=W[0],y;m=N.prev;var M=Y[0],D=Y[Y.length-1];for(y=0;y<Y.length;y+=1)st(Y[y],N,r);for(y=0;y<W.length;y+=1)f.delete(W[y]);Ne(s,M.prev,D.next),Ne(s,m,M),Ne(s,D,N),E=N,m=D,p-=1,Y=[],W=[]}else f.delete(v),st(v,E,r),Ne(s,v.prev,v.next),Ne(s,v,m===null?s.first:m.next),Ne(s,m,v),m=v;continue}for(Y=[],W=[];E!==null&&E.k!==T;)(E.e.f&We)===0&&(f??(f=new Set)).add(E),W.push(E),E=E.next;if(E===null)continue;v=E}Y.push(v),m=v,E=v.next}if(E!==null||f!==void 0){for(var ae=f===void 0?[]:it(f);E!==null;)(E.e.f&We)===0&&ae.push(E),E=E.next;var G=ae.length;if(G>0){var oe=(d&nt)!==0&&P===0?r:null;if(x){for(p=0;p<G;p+=1)($=ae[p].a)==null||$.measure();for(p=0;p<G;p+=1)(J=ae[p].a)==null||J.fix()}Ht(s,ae,oe,h)}}x&&$t(()=>{var b;if(Z!==void 0)for(v of Z)(b=v.a)==null||b.apply()}),tt.first=s.first&&s.first.e,tt.last=m&&m.e}function Vt(n,s,r,i){(i&Qe)!==0&&at(n.v,s),(i&Xe)!==0?at(n.i,r):n.i=r}function pt(n,s,r,i,d,g,u,x,j,P){var h=(j&Qe)!==0,te=(j&Pt)===0,E=h?te?U(d):et(d):d,f=(j&Xe)===0?u:et(u),m={i:f,v:E,k:g,a:null,e:null,prev:r,next:i};try{return m.e=lt(()=>x(n,E,f,P),Ie),m.e.prev=r&&r.e,m.e.next=i&&i.e,r===null?s.first=m:(r.next=m,r.e.next=m.e),i!==null&&(i.prev=m,i.e.prev=m.e),m}finally{}}function st(n,s,r){for(var i=n.next?n.next.e.nodes_start:r,d=s?s.e.nodes_start:r,g=n.e.nodes_start;g!==i;){var u=zt(g);d.before(g),g=u}}function Ne(n,s,r){s===null?n.first=r:(s.next=r,s.e.next=r&&r.e),r!==null&&(r.prev=s,r.e.prev=s&&s.e)}function Zt(n,s,r){var i=n==null?"":""+n;return s&&(i=i?i+" "+s:s),i===""?null:i}function ze(n,s,r,i,d,g){var u=n.__className;if(Ie||u!==r||u===void 0){var x=Zt(r,i);(!Ie||x!==n.getAttribute("class"))&&(x==null?n.removeAttribute("class"):n.className=x),n.__className=r}return g}function bt(n,s,r){if(n.multiple)return Wt(n,s);for(var i of n.options){var d=Je(i);if(Gt(d,s)){i.selected=!0;return}}(!r||s!==void 0)&&(n.selectedIndex=-1)}function Yt(n,s){ct(()=>{var r=new MutationObserver(()=>{var i=n.__value;bt(n,i)});return r.observe(n,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{r.disconnect()}})}function ft(n,s,r=s){var i=!0;Jt(n,"change",d=>{var g=d?"[selected]":":checked",u;if(n.multiple)u=[].map.call(n.querySelectorAll(g),Je);else{var x=n.querySelector(g)??n.querySelector("option:not([disabled])");u=x&&Je(x)}r(u)}),ct(()=>{var d=s();if(bt(n,d,i),i&&d===void 0){var g=n.querySelector(":checked");g!==null&&(d=Je(g),r(d))}n.__value=d,i=!1}),Yt(n)}function Wt(n,s){for(var r of n.options)r.selected=~s.indexOf(Je(r))}function Je(n){return"__value"in n?n.__value:n.value}function He(n){return function(...s){var r=s[0];return r.preventDefault(),n==null?void 0:n.apply(this,s)}}var Xt=A("<option> </option>"),Qt=A('<div class="form-wrapper svelte-3crwtj"><div class="form-title svelte-3crwtj">REGISTRO DE USUARIOS</div> <form class="vibrant-form svelte-3crwtj"><input class="vibrant-input svelte-3crwtj" placeholder="Nombre" type="text" autocomplete="off" required> <input class="vibrant-input svelte-3crwtj" placeholder="Apellido" type="text" autocomplete="off" required> <input class="vibrant-input svelte-3crwtj" placeholder="Documento" type="text" autocomplete="off" required> <input class="vibrant-input svelte-3crwtj" placeholder="Teléfono" type="text" autocomplete="off" required> <input class="vibrant-input svelte-3crwtj" placeholder="Correo Electrónico" type="email" autocomplete="off" required> <input class="vibrant-input svelte-3crwtj" placeholder="Contraseña" type="password" autocomplete="off" required> <input class="vibrant-input svelte-3crwtj" id="Confirmar_Contraseña" placeholder="Confirmar Contraseña" type="password" autocomplete="off" required> <select id="roles" class="vibrant-select svelte-3crwtj"><option disabled selected>Seleccione el Rol:</option><!></select> <button class="vibrant-button svelte-3crwtj">REGISTRAR USUARIO</button></form></div>');function Kt(n,s){De(s,!1);let r=U(""),i=U(""),d=U(""),g="",u=U(""),x=U(""),j=U(""),P=U(""),h=U([]),te=!0,E=null;Ae(async()=>{const ae=await(await fetch("https://proyectomascotas.onrender.com/get_roles/")).json();l(h,ae.resultado),console.log(e(h))});const f=Fe();async function m(){if(g=document.getElementById("Confirmar_Contraseña").value,g===e(d))try{const D=await Swal.fire({title:"¿Estás seguro?",text:"¡Desea registrar un nuevo Usuario a SensuTrack!?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sí, registrar!",customClass:{popup:"swal-popup",title:"custom-title"}}),ae=parseInt(e(P),10);if(isNaN(ae)){alert("Por favor, seleccione un rol válido."),f("hideLoader");return}if(D.isConfirmed){f("showLoader");const oe=await(await fetch("https://proyectomascotas.onrender.com/create_user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e(j),password:e(d),nombre:e(r),apellido:e(i),documento:e(u),telefono:e(x),id_rol:e(P),estado:te})})).json();console.log("Respuesta del servidor:",oe),f("hideLoader"),oe.resultado==="Usuario creado"?Swal.fire({title:"¡Registrado!,¡Bienvenid@ "+e(r)+"!",icon:"success",customClass:{popup:"swal-popup",title:"custom-title"}}):oe.resultado==="El usuario ya existe"&&Swal.fire({icon:"error",title:"Error",text:"Lo sentimos, el usuario ya existe."})}else Swal.fire({title:"REGISTRO CANCELADO",icon:"error",customClass:{popup:"swal-popup",title:"custom-title"}})}catch(D){E=D.message,f("hideLoader"),alert("Error en la solicitud: "+E)}else Swal.fire({title:"Parece que ha ocurrido un error",text:"No son iguales las contraseñas, porfavor intente de nuevo :]",icon:"error",customClass:{popup:"swal-popup",title:"custom-title"}})}Ce();var Z=Qt(),Y=o(a(Z),2),W=a(Y);fe(W);var X=o(W,2);fe(X);var T=o(X,2);fe(T);var v=o(T,2);fe(v);var p=o(v,2);fe(p);var S=o(p,2);fe(S);var N=o(S,4);ve(()=>{e(P),dt(()=>{e(h)})});var y=a(N);y.value=y.__value="";var M=o(y);Te(M,1,()=>e(h),xe,(D,ae)=>{var G=Xt(),oe={},_=a(G,!0);t(G),ve(()=>{oe!==(oe=e(ae).id)&&(G.value=(G.__value=e(ae).id)??""),ee(_,e(ae).nombre)}),I(D,G)}),t(N),Ee(2),t(Y),t(Z),ye(W,()=>e(r),D=>l(r,D)),ye(X,()=>e(i),D=>l(i,D)),ye(T,()=>e(u),D=>l(u,D)),ye(v,()=>e(x),D=>l(x,D)),ye(p,()=>e(j),D=>l(j,D)),ye(S,()=>e(d),D=>l(d,D)),ft(N,()=>e(P),D=>l(P,D)),V("submit",Y,He(m)),I(n,Z),Re()}var ea=A('<div class="vibrant-loader svelte-1cmc1uo"><div class="loader-bar svelte-1cmc1uo"></div></div>'),ta=A('<p class="error-message svelte-1cmc1uo"> </p>'),aa=A('<tr class="svelte-1cmc1uo"><td class="svelte-1cmc1uo"> </td><td class="svelte-1cmc1uo"> </td><td class="svelte-1cmc1uo"> </td><td class="svelte-1cmc1uo"> </td><td class="svelte-1cmc1uo"> </td><td class="svelte-1cmc1uo"> </td><td class="svelte-1cmc1uo"><span> </span></td></tr>'),oa=A('<h3 class="results-title svelte-1cmc1uo">Discapacitados Registrados</h3> <div class="table-container svelte-1cmc1uo"><table class="vibrant-table svelte-1cmc1uo"><thead class="svelte-1cmc1uo"><tr class="svelte-1cmc1uo"><th class="svelte-1cmc1uo">Id</th><th class="svelte-1cmc1uo">Nombre</th><th class="svelte-1cmc1uo">Género</th><th class="svelte-1cmc1uo">Tipo de Ceguera</th><th class="svelte-1cmc1uo">Cuidador</th><th class="svelte-1cmc1uo">Fecha y Hora</th><th class="svelte-1cmc1uo">Estado</th></tr></thead><tbody class="svelte-1cmc1uo"></tbody></table></div> <div class="export-action svelte-1cmc1uo"><button class="export-button svelte-1cmc1uo"><i class="bi bi-download svelte-1cmc1uo"></i> Exportar como PDF</button></div>',1),sa=A('<div class="report-container svelte-1cmc1uo"><h2 class="report-title svelte-1cmc1uo">Reportes</h2> <div class="report-section svelte-1cmc1uo"><select class="vibrant-select svelte-1cmc1uo" id="opcion" required><option class="svelte-1cmc1uo">Discapacitados</option><option class="svelte-1cmc1uo">Usuarios</option><option class="svelte-1cmc1uo">Otro</option></select></div> <div class="date-range svelte-1cmc1uo"><div class="date-input svelte-1cmc1uo"><label for="desde_ciegos" class="vibrant-label svelte-1cmc1uo">Desde:</label> <input type="date" id="desde_ciegos" class="vibrant-date svelte-1cmc1uo"></div> <div class="date-input svelte-1cmc1uo"><label for="hasta_ciegos" class="vibrant-label svelte-1cmc1uo">Hasta:</label> <input type="date" id="hasta_ciegos" class="vibrant-date svelte-1cmc1uo"></div></div> <div class="report-action svelte-1cmc1uo"><button class="vibrant-button svelte-1cmc1uo"><i class="bi bi-file-earmark-text svelte-1cmc1uo"></i> Generar Reporte</button></div></div> <div class="report-results svelte-1cmc1uo" id="MostrarReporte"><!></div> <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet" class="svelte-1cmc1uo">',1);function ra(n,s){De(s,!1);let r=U([]),i=U(!1),d=U(null),g,u="",x="",j=U(!1);async function P(){try{if(l(i,!0),l(j,!1),l(d,null),g=document.getElementById("opcion").value,u=document.getElementById("desde_ciegos").value,x=document.getElementById("hasta_ciegos").value,console.log({fecha1:u,fecha2:x}),!u||!x){Swal.fire({icon:"error",title:"Error",text:"Por favor, selecciona ambas fechas."});return}const y=await fetch("https://proyectomascotas.onrender.com/Ciegos_Report",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fecha1:u,fecha2:x})});if(!y.ok)throw new Error("Error al cargar los datos");const M=await y.json();console.log(M),l(r,M.resultado),l(j,!0),setTimeout(()=>globalThis.$("#myTable").DataTable(),0)}catch(y){l(d,y.message),console.error("Error al generar reporte:",y)}finally{l(i,!1)}}function h(){const{jsPDF:y}=window.jspdf,M=new y,D=["Id","Nombre","Género","Tipo de Ceguera","Cuidador","Fecha","Estado"],ae=e(r).map(G=>[G.id,G.nombre,G.genero,G.tipo_ceguera,G.nombre_cuidador,G.fecha,G.estado]);M.text(20,20,"Reporte de discapacitados visuales registrados en la página"),M.autoTable(D,ae,{startY:30}),M.save("ReporteDiscapacitados.pdf"),Swal.fire({position:"center",icon:"success",title:"Se exportó de manera exitosa",showConfirmButton:!1,timer:1500})}Ce();var te=sa(),E=Me(te),f=o(a(E),2),m=a(f),Z=a(m);Z.value=Z.__value="1";var Y=o(Z);Y.value=Y.__value="2";var W=o(Y);W.value=W.__value="3",t(m),t(f);var X=o(f,4),T=a(X);t(X),t(E);var v=o(E,2),p=a(v);{var S=y=>{var M=ea();I(y,M)},N=(y,M)=>{{var D=G=>{var oe=ta(),_=a(oe);t(oe),ve(()=>ee(_,`Error: ${e(d)??""}`)),I(G,oe)},ae=(G,oe)=>{{var _=R=>{var $=oa(),J=o(Me($),2),b=a(J),B=o(a(b));Te(B,5,()=>e(r),xe,(se,z)=>{var ie=aa(),ce=a(ie),C=a(ce,!0);t(ce);var c=o(ce),q=a(c,!0);t(c);var L=o(c),O=a(L,!0);t(L);var w=o(L),H=a(w,!0);t(w);var F=o(w),K=a(F,!0);t(F);var re=o(F),ne=a(re,!0);t(re);var me=o(re),de=a(me),pe=a(de,!0);t(de),t(me),t(ie),ve(()=>{ee(C,e(z).id),ee(q,e(z).nombre),ee(O,e(z).genero),ee(H,e(z).tipo_ceguera),ee(K,e(z).nombre_cuidador),ee(ne,e(z).fecha),ze(de,1,`status-${e(z).estado?"active":"inactive"}`,"svelte-1cmc1uo"),ee(pe,e(z).estado?"Activo":"Inactivo")}),I(se,ie)}),t(B),t(b),t(J);var k=o(J,2),Q=a(k);t(k),V("click",Q,h),I(R,$)};le(G,R=>{e(j)&&R(_)},oe)}};le(y,G=>{e(d)?G(D):G(ae,!1)},M)}};le(p,y=>{e(i)?y(S):y(N,!1)})}t(v),Ee(2),V("click",T,P),I(n,te),Re()}var la=A('<option class="svelte-tkblz5"> </option>'),ia=A('<div class="gps-container svelte-tkblz5"><h2 class="gps-title svelte-tkblz5">REGISTRAR GPS</h2> <form class="vibrant-form svelte-tkblz5"><div class="input-group svelte-tkblz5"><p class="input-description svelte-tkblz5">Registre el Número de Serie del GPS:</p> <input id="numero_serie" type="text" class="vibrant-input svelte-tkblz5" placeholder="Ingrese el Serial del GPS" required></div> <div class="input-group svelte-tkblz5"><p class="input-description svelte-tkblz5">Usuarios Discapacitados Registrados:</p> <select id="ciegos" class="vibrant-select svelte-tkblz5" required><option disabled selected class="svelte-tkblz5">Selecciona el Discapacitado que tendrá el GPS</option><!></select></div> <button class="vibrant-button svelte-tkblz5"><i class="bi bi-check-circle-fill svelte-tkblz5"></i> CONFIRMAR REGISTRO</button></form></div> <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet" class="svelte-tkblz5">',1);function na(n,s){De(s,!1);let r=U(""),i=100,d=U(""),g=!0,u=null,x=null,j=U({});Ae(async()=>{const p=await(await fetch("https://proyectomascotas.onrender.com/get_discapacitadosV_SIN_GPS/")).json();l(j,p.resultado),console.log(e(j))});const P=Fe();async function h(){try{P("showLoader");const v=await fetch("https://proyectomascotas.onrender.com/create_gps",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({numero_serie:e(r),nivel_bateria:i,id_ciego_vinculado:parseInt(e(d)),estado:g})}),p=await v.json();if(console.log(p),P("hideLoader"),v.ok)u=p.resultado,x=null,l(r,""),l(d,""),Swal.fire({title:"El GPS ha sido Registrado Exitosamente!",icon:"success",confirmButtonText:"OK"});else throw swalWithBootstrapButtons.fire({title:"Parece que ha ocurrido un error",text:"Revise que todo este correcto porfavor :]",icon:"error"}),new Error(p.detail||"Ocurrió un error")}catch(v){x=v.message,P("hideLoader"),u=null}}Ce();var te=ia(),E=Me(te),f=o(a(E),2),m=a(f),Z=o(a(m),2);fe(Z),t(m);var Y=o(m,2),W=o(a(Y),2);ve(()=>{e(d),dt(()=>{e(j)})});var X=a(W);X.value=X.__value="";var T=o(X);Te(T,1,()=>e(j),xe,(v,p)=>{var S=la(),N={},y=a(S,!0);t(S),ve(()=>{N!==(N=e(p).id)&&(S.value=(S.__value=e(p).id)??""),ee(y,e(p).nombre)}),I(v,S)}),t(W),t(Y),Ee(2),t(f),t(E),Ee(2),ye(Z,()=>e(r),v=>l(r,v)),ft(W,()=>e(d),v=>l(d,v)),V("submit",f,He(h)),I(n,te),Re()}var ca=A('<div class="row justify-content-center text-center"><div class="col-12 mb-2">Cargando datos...</div> <div class="spinner-border text-primary" role="status"><span class="visually-hidden">Loading...</span></div></div>'),da=A('<div class="alert alert-danger text-center"> </div>'),va=A('<button class="btn btn-sm btn-outline-danger"><i class="bi bi-lock"></i> <span class="d-none d-md-inline">Desactivar</span></button>'),ua=A('<button class="btn btn-sm btn-outline-success"><i class="bi bi-unlock"></i> <span class="d-none d-md-inline">Activar</span></button>'),ma=A('<tr><td> </td><td> </td><td> </td><td> </td><td> </td><td class="text-center"><span> </span></td><td class="text-center"><div class="d-flex flex-wrap gap-1 justify-content-center"><button class="btn btn-sm btn-outline-primary"><i class="bi bi-pencil"></i> <span class="d-none d-md-inline">Editar</span></button> <!></div></td></tr>'),pa=A('<div class="table-responsive"><table class="table table-hover table-bordered align-middle" id="myTable"><thead class="thead-light text-center"><tr><th>Usuario</th><th>Nombre</th><th>Apellido</th><th>Documento</th><th>Teléfono</th><th>Estado</th><th>Acciones</th></tr></thead><tbody></tbody></table></div>'),ba=A(`<div id="Mostrarusuario"><div class="container py-4 bg-light rounded shadow"><h2 class="text-center mb-4 pb-2 border-bottom border-3 border-primary fw-bold"><i class="bi bi-people-fill me-2"></i>USUARIOS</h2> <!></div></div> <div class="fade" id="nav-listado" role="tabpanel" aria-labelledby="nav-listado-tab"><div class="container text-center"><p class="text-warning"></p></div> <div class="card border-dark shadow-lg" style="width: 50%; margin: 5% auto;"><div class="card-header d-flex justify-content-between align-items-center"><h5 class="card-title mb-0"><b>Editando Usuario</b></h5> <button class="btn btn-close" aria-label="Cerrar edición de usuario"></button></div> <div class="card-body"><div class="mb-3 row"><label for="nombres" class="col-lg-3 col-form-label"><b>Nombre:</b></label> <div class="col-lg-9"><input type="text" id="nombres" class="form-control" placeholder="Nombres" maxlength="100" readonly=""></div></div> <div class="mb-3 row"><label for="apellidos" class="col-lg-3 col-form-label"><b>Apellido:</b></label> <div class="col-lg-9"><input type="text" id="apellidos" class="form-control" placeholder="Apellidos" readonly=""></div></div> <div class="mb-3 row"><label for="documento" class="col-lg-3 col-form-label"><b>Documento:</b></label> <div class="col-lg-9"><input type="text" id="documento" class="form-control" placeholder="Documento de identidad" readonly=""></div></div> <div class="mb-3 row"><label for="telefono" class="col-lg-3 col-form-label"><b>Teléfono:</b></label> <div class="col-lg-9"><input type="text" id="telefono" class="form-control" placeholder="Teléfono" maxlength="20" readonly=""></div></div> <div class="mb-3 row"><label for="correo" class="col-lg-3 col-form-label"><b>Correo:</b></label> <div class="col-lg-9"><input type="text" id="correo" class="form-control" placeholder="Correo electrónico" readonly=""></div></div> <div class="mb-3 row"><label for="estado" class="col-lg-3 col-form-label"><b>Estado:</b></label> <div class="col-lg-9"><select id="estado" class="form-control"><option>Activar</option><option>Desactivar</option></select></div></div> <div class="d-flex justify-content-between align-items-center"><div class="col-lg-9 text-muted">¡Al terminar de editar, haga clic en actualizar para guardar
                    los cambios!</div> <div class="col-lg-3 text-end"><button class="btn btn-outline-info"><b>Actualizar</b></button></div></div></div></div></div>`,1);function fa(n,s){De(s,!1);let r=U({}),i=U(!0),d=U(null);Ae(async()=>{try{console.log("2");const _=await fetch("https://proyectomascotas.onrender.com/get_users");if(!_.ok)throw new Error("Error al cargar los datos");const R=await _.json();l(r,R.resultado),console.log(e(r)),setTimeout(()=>{globalThis.$("#myTable").DataTable()},0)}catch(_){l(d,_.message)}finally{l(i,!1)}});async function g(){document.getElementById("nav-listado").setAttribute("class","fade"),document.getElementById("Mostrarusuario").removeAttribute("class"),location.reload()}var u=1;async function x(_,R){console.log("Editando a "+R);const $=document.getElementById("nav-listado");$.removeAttribute("class"),console.log($),u=_,console.log(Number.isInteger(u)),console.log(u);let J=document.getElementById("Mostrarusuario");J.setAttribute("class","fade"),console.log(J);const b=J.parentElement;console.log(b),b.insertBefore($,J),console.log("NO Entra al try de buscar");try{console.log("Entra al try de buscar");const B=await fetch(`https://proyectomascotas.onrender.com/get_user/${u}`,{method:"GET",headers:{"Content-Type":"application/json"}}),k=await B.json();console.log(B),console.log(k),console.log("Buscando al usuario seleccionado"),l(r,k.apellido),console.log(e(r)),document.getElementById("nombres").value=k.nombre,document.getElementById("apellidos").value=k.apellido,document.getElementById("documento").value=k.documento,document.getElementById("telefono").value=k.telefono,document.getElementById("correo").value=k.email,console.log("verificando el estado: "+k.estado);const Q=k.estado?"1":"0";document.getElementById("estado").value=Q;const se=document.getElementById("nombres");se.removeAttribute("readonly"),se.focus(),document.getElementById("apellidos").removeAttribute("readonly"),document.getElementById("documento").removeAttribute("readonly"),document.getElementById("telefono").removeAttribute("readonly"),document.getElementById("correo").removeAttribute("readonly"),document.getElementById("estado").removeAttribute("readonly")}catch(B){l(d,B.message)}finally{l(i,!1)}}async function j(){console.log(u);let _=document.getElementById("nombres").value,R=document.getElementById("apellidos").value,$=document.getElementById("documento").value,J=document.getElementById("telefono").value,b=document.getElementById("correo").value,B=document.getElementById("estado").value;B=B==="1",console.log("ID DE ESTADO ENVIADO A LA BASE DE DATOS ES "+B);try{console.log("Entra al try de actualzar");const k=await fetch(`https://proyectomascotas.onrender.com/update_user_admin/${u}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:b,nombre:_,apellido:R,documento:$,telefono:J,estado:B})});console.log("Actualizado"),Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:se=>{se.onmouseenter=Swal.stopTimer,se.onmouseleave=Swal.resumeTimer}}).fire({icon:"success",iconColor:"white",color:"white",background:"#00bdff",title:"usuario actualizado con exito"}),setTimeout(()=>{const se=document.getElementById("nav-listado");se.setAttribute("class","fade");let z=document.getElementById("Mostrarusuario");z.removeAttribute("class"),se.parentElement.insertBefore(z,se),location.reload()},3e3)}catch(k){console.error("Error al actualizar el usuario:",k),Swal.fire({icon:"error",title:"Error",text:k.message})}finally{l(i,!1)}}async function P(_){let R=0,$=_,J=R!==0;try{const b=await fetch(`https://proyectomascotas.onrender.com/update_estado_user/${$}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({estado:J})}),B=await b.json();b.ok?(Swal.mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:Q=>{Q.onmouseenter=Swal.stopTimer,Q.onmouseleave=Swal.resumeTimer}}).fire({icon:"error",iconColor:"white",color:"white",background:"#ff4e4e",title:"El Usuario a sido desactivado de manera exitosa"}),setTimeout(()=>{location.reload()},3500)):alert("Error al desactivar: "+B.message||"Error desconocido")}catch(b){alert("Error en la solicitud: "+b.message)}}async function h(_){let R=1,$=_,J=R===1;try{const b=await fetch(`https://proyectomascotas.onrender.com/update_estado_user/${$}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({estado:J})}),B=await b.json();b.ok?(Swal.mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:Q=>{Q.onmouseenter=Swal.stopTimer,Q.onmouseleave=Swal.resumeTimer}}).fire({icon:"success",iconColor:"#000000",color:"black",background:"#76fa78",title:"El usuario se ha activado de manera exitosa"}),setTimeout(()=>{location.reload()},3500)):alert("Error al Activar: "+B.message||"Error desconocido")}catch(b){alert("Error en la solicitud: "+b.message)}}Ce();var te=ba(),E=Me(te),f=a(E),m=o(a(f),2);{var Z=_=>{var R=ca();I(_,R)},Y=(_,R)=>{{var $=b=>{var B=da(),k=a(B,!0);t(B),ve(()=>ee(k,e(d))),I(b,B)},J=b=>{var B=pa(),k=a(B),Q=o(a(k));Te(Q,5,()=>e(r),xe,(se,z)=>{var ie=ma(),ce=a(ie),C=a(ce,!0);t(ce);var c=o(ce),q=a(c,!0);t(c);var L=o(c),O=a(L,!0);t(L);var w=o(L),H=a(w,!0);t(w);var F=o(w),K=a(F,!0);t(F);var re=o(F),ne=a(re),me=a(ne,!0);t(ne),t(re);var de=o(re),pe=a(de),ue=a(pe),ge=o(ue,2);{var be=_e=>{var he=va();V("click",he,()=>P(e(z).id)),I(_e,he)},ke=_e=>{var he=ua();V("click",he,()=>h(e(z).id)),I(_e,he)};le(ge,_e=>{e(z).estado?_e(be):_e(ke,!1)})}t(pe),t(de),t(ie),ve(()=>{ee(C,e(z).email),ee(q,e(z).nombre),ee(O,e(z).apellido),ee(H,e(z).documento),ee(K,e(z).telefono),ze(ne,1,`badge ${e(z).estado?"bg-success":"bg-danger"}`),ee(me,e(z).estado?"Activo":"Desactivado")}),V("click",ue,()=>x(e(z).id)),I(se,ie)}),t(Q),t(k),t(B),I(b,B)};le(_,b=>{e(d)?b($):b(J,!1)},R)}};le(m,_=>{e(i)?_(Z):_(Y,!1)})}t(f),t(E);var W=o(E,2),X=o(a(W),2),T=a(X),v=o(a(T),2);t(T);var p=o(T,2),S=o(a(p),10),N=o(a(S),2),y=a(N),M=a(y);M.value=M.__value="1";var D=o(M);D.value=D.__value="0",t(y),t(N),t(S);var ae=o(S,2),G=o(a(ae),2),oe=a(G);t(G),t(ae),t(p),t(X),t(W),V("click",v,()=>g()),V("click",oe,j),I(n,te),Re()}var ga=A('<div class="row justify-content-center text-center"><div class="col-12 mb-2">Cargando datos...</div> <div class="spinner-border text-primary" role="status"><span class="visually-hidden">Loading...</span></div></div>'),_a=A('<div class="alert alert-danger text-center"> </div>'),ha=A('<button class="btn btn-sm btn-outline-danger"><i class="bi bi-lock"></i> <span class="d-none d-md-inline">Desactivar</span></button>'),ya=A('<button class="btn btn-sm btn-outline-success"><i class="bi bi-unlock"></i> <span class="d-none d-md-inline">Activar</span></button>'),wa=A('<tr><td> </td><td> </td><td> </td><td class="text-center"><span> </span></td><td class="text-center"><div class="d-flex flex-wrap gap-1 justify-content-center"><button class="btn btn-sm btn-outline-primary"><i class="bi bi-pencil"></i> <span class="d-none d-md-inline">Editar</span></button> <!></div></td></tr>'),Ea=A('<div class="table-responsive"><table class="table table-hover table-bordered align-middle" id="myTable"><thead class="thead-light text-center"><tr><th class="px-4 py-2 border">Nombre</th><th class="px-4 py-2 border">Genero</th><th class="px-4 py-2 border">Tipo_Ceguera</th><th class="px-4 py-2 border">Estado</th><th class="px-4 py-2 border">Opcion</th></tr></thead><tbody></tbody></table></div>'),xa=A(`<div id="MostrarDiscapacitado"><div class="container py-4 bg-light rounded shadow"><h2 class="text-center mb-4 pb-2 border-bottom border-3 border-primary fw-bold"><i class="bi bi-people-fill me-2"></i>Lista de discapacitados</h2> <!></div></div> <div class="fade" id="nav-listado" role="tabpanel" aria-labelledby="nav-listado-tab"><div class="container text-center"><p class="text-warning"></p></div> <div class="card border-dark shadow-lg" style="width: 50%; margin: 5% auto;"><div class="card-header d-flex justify-content-between align-items-center"><h5 class="card-title mb-0"><b>Editando Discapacitado</b></h5> <button class="btn btn-close" aria-label="Cerrar edición de usuario"></button></div> <div class="card-body"><div class="mb-3 row"><label for="nombres" class="col-lg-3 col-form-label"><b>Nombre:</b></label> <div class="col-lg-9"><input type="text" id="nombres" class="form-control" placeholder="Nombres" maxlength="100" readonly=""></div></div> <div class="mb-3 row"><label for="genero" class="col-lg-3 col-form-label"><b>Género:</b></label> <div class="col-lg-9"><input type="text" id="genero" class="form-control" placeholder="Género" readonly=""></div></div> <div class="mb-3 row"><label for="tipo_ceguera" class="col-lg-3 col-form-label"><b>Tipo de Ceguera:</b></label> <div class="col-lg-9"><input type="text" id="tipo_ceguera" class="form-control" placeholder="Tipo de Ceguera" readonly=""></div></div> <div class="mb-3 row"><label for="estado" class="col-lg-3 col-form-label"><b>Estado:</b></label> <div class="col-lg-9"><select id="estado" class="form-control"><option>Activar</option><option>Desactivar</option></select></div></div> <div class="d-flex justify-content-between align-items-center"><div class="col-lg-9 text-muted">¡Al terminar de editar, haga clic en actualizar para guardar
                    los cambios!</div> <div class="col-lg-3 text-end"><button class="btn btn-outline-info"><b>Actualizar</b></button></div></div></div></div></div>`,1);function Ta(n,s){De(s,!1);let r=U({}),i=U(!0),d=U(null);Ae(async()=>{try{console.log("2");const _=await fetch("https://proyectomascotas.onrender.com/get_discapacitadosVCOMPLETOS");if(!_.ok)throw new Error("Error al cargar los datos");const R=await _.json();l(r,R.resultado),console.log(e(r)),setTimeout(()=>{globalThis.$("#myTable").DataTable()},0)}catch(_){l(d,_.message)}finally{l(i,!1)}});async function g(){document.getElementById("nav-listado").setAttribute("class","fade"),document.getElementById("MostrarDiscapacitado").removeAttribute("class"),location.reload()}var u=1;async function x(_,R){console.log("Editando a "+R);const $=document.getElementById("nav-listado");$.removeAttribute("class"),console.log($),u=_,console.log(Number.isInteger(u)),console.log(u);let J=document.getElementById("MostrarDiscapacitado");J.setAttribute("class","fade"),console.log(J);const b=J.parentElement;console.log(b),b.insertBefore($,J),console.log("NO Entra al try de buscar");try{console.log("Entra al try de buscar");const B=await fetch(`https://proyectomascotas.onrender.com/get_discapacitadoV/${u}`,{method:"GET",headers:{"Content-Type":"application/json"}}),k=await B.json();console.log(B),console.log(k),console.log("Buscando al usuario seleccionado"),l(r,k.nombre),console.log(e(r)),document.getElementById("nombres").value=k.nombre,document.getElementById("genero").value=k.id_genero_discapacitado,document.getElementById("tipo_ceguera").value=k.id_tipo_ceguera,console.log("verificando el estado: "+k.estado);const Q=k.estado?"1":"0";document.getElementById("estado").value=Q;const se=document.getElementById("nombres");se.removeAttribute("readonly"),se.focus(),document.getElementById("genero").removeAttribute("readonly"),document.getElementById("tipo_ceguera").removeAttribute("readonly"),document.getElementById("estado").removeAttribute("readonly")}catch(B){l(d,B.message)}finally{l(i,!1)}}async function j(){console.log(u);let _=document.getElementById("nombres").value,R=document.getElementById("genero").value,$=document.getElementById("tipo_ceguera").value,J=document.getElementById("estado").value;console.log("ID DE ESTADO ENVIADO A LA BASE DE DATOS ES "+J);try{console.log("Entra al try de actualzar");const b=await fetch(`https://proyectomascotas.onrender.com/update_user/${u}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({nombre:_,genero:R,tipo_ceguera:$,estado:J})});console.log("Actualizado"),Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:k=>{k.onmouseenter=Swal.stopTimer,k.onmouseleave=Swal.resumeTimer}}).fire({icon:"success",iconColor:"white",color:"white",background:"#00bdff",title:"Discapacitado actualizado con exito"}),setTimeout(()=>{const k=document.getElementById("nav-listado");k.setAttribute("class","fade");let Q=document.getElementById("MostrarDiscapacitado");Q.removeAttribute("class"),k.parentElement.insertBefore(Q,k),location.reload()},3e3)}catch(b){l(d,b.message)}finally{l(i,!1)}}async function P(_){let R=0,$=_,J=R!==0;try{const b=await fetch(`https://proyectomascotas.onrender.com/update_estado_discapacitado/${$}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({estado:J})}),B=await b.json();b.ok?(Swal.mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:Q=>{Q.onmouseenter=Swal.stopTimer,Q.onmouseleave=Swal.resumeTimer}}).fire({icon:"error",iconColor:"white",color:"white",background:"#ff4e4e",title:"El Discapacitado a sido desactivado de manera exitosa"}),setTimeout(()=>{location.reload()},3500)):alert("Error al desactivar: "+B.message||"Error desconocido")}catch(b){alert("Error en la solicitud: "+b.message)}}async function h(_){let R=1,$=_,J=R===1;try{const b=await fetch(`https://proyectomascotas.onrender.com/update_estado_discapacitado/${$}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({estado:J})}),B=await b.json();b.ok?(Swal.mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:Q=>{Q.onmouseenter=Swal.stopTimer,Q.onmouseleave=Swal.resumeTimer}}).fire({icon:"success",iconColor:"#000000",color:"black",background:"#76fa78",title:"El Discapacitado se ha activado de manera exitosa"}),setTimeout(()=>{location.reload()},3500)):alert("Error al Activar: "+B.message||"Error desconocido")}catch(b){alert("Error en la solicitud: "+b.message)}}Ce();var te=xa(),E=Me(te),f=a(E),m=o(a(f),2);{var Z=_=>{var R=ga();I(_,R)},Y=(_,R)=>{{var $=b=>{var B=_a(),k=a(B,!0);t(B),ve(()=>ee(k,e(d))),I(b,B)},J=b=>{var B=Ea(),k=a(B),Q=o(a(k));Te(Q,5,()=>e(r),xe,(se,z)=>{var ie=wa(),ce=a(ie),C=a(ce,!0);t(ce);var c=o(ce),q=a(c,!0);t(c);var L=o(c),O=a(L,!0);t(L);var w=o(L),H=a(w),F=a(H,!0);t(H),t(w);var K=o(w),re=a(K),ne=a(re),me=o(ne,2);{var de=ue=>{var ge=ha();V("click",ge,()=>P(e(z).id)),I(ue,ge)},pe=ue=>{var ge=ya();V("click",ge,()=>h(e(z).id)),I(ue,ge)};le(me,ue=>{e(z).estado?ue(de):ue(pe,!1)})}t(re),t(K),t(ie),ve(()=>{ee(C,e(z).nombre),ee(q,e(z).genero),ee(O,e(z).tipo_ceguera),ze(H,1,`badge ${e(z).estado?"bg-success":"bg-danger"}`),ee(F,e(z).estado?"Activo":"Desactivado")}),V("click",ne,()=>x(e(z).id,e(z).nombre)),I(se,ie)}),t(Q),t(k),t(B),I(b,B)};le(_,b=>{e(d)?b($):b(J,!1)},R)}};le(m,_=>{e(i)?_(Z):_(Y,!1)})}t(f),t(E);var W=o(E,2),X=o(a(W),2),T=a(X),v=o(a(T),2);t(T);var p=o(T,2),S=o(a(p),6),N=o(a(S),2),y=a(N),M=a(y);M.value=M.__value="1";var D=o(M);D.value=D.__value="0",t(y),t(N),t(S);var ae=o(S,2),G=o(a(ae),2),oe=a(G);t(G),t(ae),t(p),t(X),t(W),V("click",v,()=>g()),V("click",oe,j),I(n,te),Re()}var ka=A('<div class="row justify-content-center text-center"><div class="col-12 mb-2">Cargando datos...</div> <div class="spinner-border text-primary" role="status"><span class="visually-hidden">Loading...</span></div></div>'),Ba=A('<div class="alert alert-danger text-center"> </div>'),Sa=A('<button class="btn btn-sm btn-outline-danger"><i class="bi bi-lock"></i> <span class="d-none d-md-inline">Desactivar</span></button>'),Ia=A('<button class="btn btn-sm btn-outline-success"><i class="bi bi-unlock"></i> <span class="d-none d-md-inline">Activar</span></button>'),Aa=A('<tr><td> </td><td class="text-center"><span> </span></td><td class="text-center"><div class="d-flex flex-wrap gap-1 justify-content-center"><button class="btn btn-sm btn-outline-primary"><i class="bi bi-pencil"></i> <span class="d-none d-md-inline">Editar</span></button> <!></div></td></tr>'),Ca=A('<div class="table-responsive"><table class="table table-hover table-bordered align-middle" id="myTable"><thead class="thead-light text-center"><tr><th>Nombre</th><th>Estado</th><th>Opciones</th></tr></thead><tbody></tbody></table></div>'),Da=A('<label class="checkbox-label svelte-1stzg1k"><input type="checkbox"> </label>'),Ra=A(`<div class="wrapper svelte-1stzg1k"><div class="title small-title svelte-1stzg1k" style="color: dodgerblue;">REGISTRO DE ROLES</div> <form class="class-form svelte-1stzg1k"><input class="form__input small-input svelte-1stzg1k" placeholder="Nombre del Rol" type="text" required> <button class="flip-card__btn small-btn svelte-1stzg1k">Confirmar</button></form></div> <div id="MostrarRoles"><div class="container py-4 bg-light rounded shadow"><h2 class="text-center mb-4 pb-2 border-bottom border-3 border-primary fw-bold"><i class="bi bi-diagram-3 me-2"></i> Lista de Roles</h2> <!></div></div> <div class="fade" id="nav-listado" role="tabpanel" aria-labelledby="nav-listado-tab"><div class="container text-center"><p class="text-orange"></p></div> <div class="card border-dark shadow" style="width: 60%; margin-left: 20%;"><div class="card-header row g-2"><h5 class="card-title col-lg-11"><b>Editando Rol</b></h5> <button class="btn btn-close col-lg-1" aria-label="Cerrar edición de usuario"></button></div> <div class="card-body" style="margin-left: 10%;"><div class="row"><div class="col-lg-2"><p class="card-text"><b>Nombre:</b></p></div> <div class="col-lg-10"><input type="text" placeholder="Nombre del Modulo" id="nombre" maxlength="100" style="border: none; width: 55%;" readonly=""></div></div> <fieldset class="checkbox-group svelte-1stzg1k"><legend class="svelte-1stzg1k">Seleccione los módulos:</legend> <div class="checkbox-container svelte-1stzg1k"></div></fieldset> <div class="row pt-3"><div class="col-lg-2"><p class="card-text"><b>Estado:</b></p></div> <div class="col-lg-10"><select id="estado" name="opciones" style="border: none; width: 55%;"><option>Activar</option><option>Desactivar</option></select></div></div> <div class="row" style="margin-top: 4%;"><div class="col-lg-9">¡Al terminar de editar, darle click en actualizar para
                    guardar los cambios!</div> <div class="col-lg-3 text-end"><button class="btn btn-outline-info"><b>Actualizar</b></button></div> <div id="estado" class="col-lg-10"></div></div></div></div></div>`,1);function Oa(n,s){De(s,!1);const r=[];let i=U(""),d=!0,g=U({}),u=U({}),x=U(!0),j=U(null),P=U([]);Ae(async()=>{const c=await(await fetch("https://proyectomascotas.onrender.com/get_modulos/")).json();l(u,c.resultado),console.log("ando ando",e(u))});const h=Fe();async function te(){try{if((await Swal.fire({title:"¿Estás seguro?",text:"¡Desea registrar el siguiente Rol!? "+e(i),icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sí, registrar!",customClass:{popup:"swal-popup",title:"custom-title"}})).isConfirmed){h("showLoader");const c=await fetch("https://proyectomascotas.onrender.com/create_rol",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nombre:e(i),estado:d})}),q=await c.json();console.log(q),h("hideLoader"),c.ok?Swal.fire({title:"¡Se ha registrado el Rol llamado "+e(i)+" con exito!",icon:"success",customClass:{popup:"swal-popup",title:"custom-title"}}):alert("Error en el registro")}else console.log("Registro Cancelado")}catch(C){l(j,C.message),h("hideLoader"),alert("Error en la solicitud: "+e(j))}}Ae(async()=>{try{console.log("2");const C=await fetch("https://proyectomascotas.onrender.com/get_roles");if(!C.ok)throw new Error("Error al cargar los datos");const c=await C.json();l(g,c.resultado),console.log(e(g)),setTimeout(()=>{globalThis.$("#myTable").DataTable()},0)}catch(C){l(j,C.message)}finally{l(x,!1)}});async function E(){document.getElementById("nav-listado").setAttribute("class","fade"),document.getElementById("MostrarRoles").removeAttribute("class"),location.reload()}var f=1;async function m(C,c){console.log("Editando el Rol "+c);const q=document.getElementById("nav-listado");q.removeAttribute("class"),console.log(q),f=C,console.log(Number.isInteger(f)),console.log(f);let L=document.getElementById("MostrarRoles");L.setAttribute("class","fade"),console.log(L);const O=L.parentElement;console.log(O),O.insertBefore(q,L),console.log("NO Entra al try de buscar");const H=await(await fetch("https://proyectomascotas.onrender.com/get_modulos/")).json();l(u,H.resultado),console.log("ando ando",e(u));try{console.log("Entra al try de buscar");const F=await fetch(`https://proyectomascotas.onrender.com/get_rol/${f}`,{method:"GET",headers:{"Content-Type":"application/json"}}),K=await F.json();console.log(F),console.log(K),console.log("Buscando el Rol seleccionado"),l(g,K.nombre),console.log(e(g)),document.getElementById("nombre").value=K.nombre,console.log("Verificando el estado: "+K.estado);const re=K.estado?"1":"0";document.getElementById("estado").value=re;const ne=document.getElementById("nombre");ne.removeAttribute("readonly"),ne.focus(),document.getElementById("estado").removeAttribute("readonly")}catch(F){l(j,F.message)}finally{l(x,!1)}}async function Z(){console.log(f);let C=document.getElementById("nombre").value,c=document.getElementById("estado").value;console.log("ID DE ESTADO ENVIADO A LA BASE DE DATOS ES "+c);try{console.log("Entra al try de actualzar");const q=await fetch(`https://proyectomascotas.onrender.com/update_rol/${f}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({nombre:C,estado:c})});console.log("Actualizado");const L=await fetch(`https://proyectomascotas.onrender.com/update_moduloXrol02/${f}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_rol:f,id_modulo:e(P)})});console.log("Actualizado"),Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:w=>{w.onmouseenter=Swal.stopTimer,w.onmouseleave=Swal.resumeTimer}}).fire({icon:"success",iconColor:"white",color:"white",background:"#00bdff",title:"Rol actualizado exitosamente"}),setTimeout(()=>{const w=document.getElementById("nav-listado");w.setAttribute("class","fade");let H=document.getElementById("MostrarRoles");H.removeAttribute("class"),w.parentElement.insertBefore(H,w),location.reload()},3e3)}catch(q){l(j,q.message)}finally{l(x,!1)}}async function Y(C){let c=0,q=C,L=c!==0;try{const O=await fetch(`https://proyectomascotas.onrender.com/update_estado_rol/${q}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({estado:L})}),w=await O.json();O.ok?(Swal.mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:F=>{F.onmouseenter=Swal.stopTimer,F.onmouseleave=Swal.resumeTimer}}).fire({icon:"error",iconColor:"white",color:"white",background:"#ff4e4e",title:"El Rol a sido desactivado de manera exitosa"}),setTimeout(()=>{location.reload()},3500)):alert("Error al desactivar: "+w.message||"Error desconocido")}catch(O){alert("Error en la solicitud: "+O.message)}}async function W(C){let c=1,q=C,L=c===1;try{const O=await fetch(`https://proyectomascotas.onrender.com/update_estado_rol/${q}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({estado:L})}),w=await O.json();O.ok?(Swal.mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:F=>{F.onmouseenter=Swal.stopTimer,F.onmouseleave=Swal.resumeTimer}}).fire({icon:"success",iconColor:"#000000",color:"black",background:"#76fa78",title:"El Rol se ha activado de manera exitosa"}),setTimeout(()=>{location.reload()},3500)):alert("Error al Activar: "+w.message||"Error desconocido")}catch(O){alert("Error en la solicitud: "+O.message)}}Ce();var X=Ra(),T=Me(X),v=o(a(T),2),p=a(v);fe(p),Ee(2),t(v),t(T);var S=o(T,2),N=a(S),y=o(a(N),2);{var M=C=>{var c=ka();I(C,c)},D=(C,c)=>{{var q=O=>{var w=Ba(),H=a(w,!0);t(w),ve(()=>ee(H,e(j))),I(O,w)},L=O=>{var w=Ca(),H=a(w),F=o(a(H));Te(F,5,()=>e(g),xe,(K,re)=>{var ne=Aa(),me=a(ne),de=a(me,!0);t(me);var pe=o(me),ue=a(pe),ge=a(ue,!0);t(ue),t(pe);var be=o(pe),ke=a(be),_e=a(ke),he=o(_e,2);{var we=Be=>{var Se=Sa();V("click",Se,()=>Y(e(re).id)),I(Be,Se)},Le=Be=>{var Se=Ia();V("click",Se,()=>W(e(re).id)),I(Be,Se)};le(he,Be=>{e(re).estado?Be(we):Be(Le,!1)})}t(ke),t(be),t(ne),ve(()=>{ee(de,e(re).nombre),ze(ue,1,`badge fs-6 ${e(re).estado?"bg-success":"bg-danger"}`),ee(ge,e(re).estado?"Activo":"Desactivado")}),V("click",_e,()=>m(e(re).id,e(re).nombre)),I(K,ne)}),t(F),t(H),t(w),I(O,w)};le(C,O=>{e(j)?O(q):O(L,!1)},c)}};le(y,C=>{e(x)?C(M):C(D,!1)})}t(N),t(S);var ae=o(S,2),G=o(a(ae),2),oe=a(G),_=o(a(oe),2);t(oe);var R=o(oe,2),$=o(a(R),2),J=o(a($),2);Te(J,5,()=>e(u),xe,(C,c)=>{var q=Da(),L=a(q);fe(L);var O,w=o(L);t(q),ve(()=>{O!==(O=e(c).id)&&(L.value=(L.__value=e(c).id)??""),ee(w,` ${e(c).nombre??""}`)}),vt(r,[],L,()=>(e(c).id,e(P)),H=>l(P,H)),I(C,q)}),t(J),t($);var b=o($,2),B=o(a(b),2),k=a(B),Q=a(k);Q.value=Q.__value="1";var se=o(Q);se.value=se.__value="0",t(k),t(B),t(b);var z=o(b,2),ie=o(a(z),2),ce=a(ie);t(ie),Ee(2),t(z),t(R),t(G),t(ae),ye(p,()=>e(i),C=>l(i,C)),V("submit",v,He(te)),V("click",_,()=>E()),V("click",ce,Z),I(n,X),Re()}var ja=A('<div class="row justify-content-center text-center"><div class="col-12 mb-2">Cargando datos...</div> <div class="spinner-border text-primary" role="status"><span class="visually-hidden">Loading...</span></div></div>'),Na=A('<div class="alert alert-danger text-center"> </div>'),Ma=A('<button class="btn btn-sm btn-outline-danger"><i class="bi bi-lock"></i> <span class="d-none d-md-inline">Desactivar</span></button>'),Pa=A('<button class="btn btn-sm btn-outline-success"><i class="bi bi-unlock"></i> <span class="d-none d-md-inline">Activar</span></button>'),za=A('<tr><td> </td><td> </td><td class="text-center"><span> </span></td><td class="text-center"><div class="d-flex flex-wrap gap-1 justify-content-center"><button class="btn btn-sm btn-outline-primary"><i class="bi bi-pencil"></i> <span class="d-none d-md-inline">Editar</span></button> <!></div></td></tr>'),La=A('<div class="table-responsive"><table class="table table-hover table-bordered align-middle" id="myTable"><thead><tr><th>Nombre</th><th>Descripcion</th><th>Estado</th><th>Opciones</th></tr></thead><tbody></tbody></table></div>'),Ua=A(`<div class="wrapper svelte-t5nwrd"><div class="title small-title svelte-t5nwrd" style="color: dodgerblue;">REGISTRO DE MODULOS</div> <form class="class-form svelte-t5nwrd"><input class="form__input small-input svelte-t5nwrd" placeholder="Nombre del Modulo" type="text" required> <input class="form__input small-input svelte-t5nwrd" placeholder="Descripcion del Modulo" type="text" required> <input class="form__input small-input svelte-t5nwrd" placeholder="Ubicacion del Modulo" type="text" required> <input class="form__input small-input svelte-t5nwrd" placeholder="Ingrese el icono que tendra el Modulo (Boostrap)" type="text" required> <button class="flip-card__btn small-btn svelte-t5nwrd">Confirmar</button></form></div> <div id="MostrarModulos"><div class="container py-4 bg-light rounded shadow"><h2 class="text-center mb-4 pb-2 border-bottom border-3 border-primary fw-bold"><i class="bi-grid-3x3-gap-fill me-2"></i>Lista de Modulos</h2> <!></div></div> <div class="fade" id="nav-listado" role="tabpanel" aria-labelledby="nav-listado-tab"><div class="container text-center"><p class="text-orange"></p></div> <div class="card border-dark shadow" style="width: 60%; margin-left: 20%;"><div class="card-header row g-2"><h5 class="card-title col-lg-11"><b>Editando Modulo</b></h5> <button class="btn btn-close col-lg-1" aria-label="Cerrar edición de usuario"></button></div> <div class="card-body" style="margin-left: 10%;"><div class="row"><div class="col-lg-2"><p class="card-text"><b>Nombre:</b></p></div> <div class="col-lg-10"><input type="text" placeholder="Nombre del Modulo" id="nombre" maxlength="100" style="border: none; width: 55%;" readonly=""></div></div> <div class="row pt-3"><div class="col-lg-2"><p class="card-text"><b>Descripcion:</b></p></div> <div class="col-lg-10"><input type="text" placeholder="Descripcion del Modulo" id="descripcion" style="border: none; width: 55%;" readonly=""></div></div> <div class="row pt-3"><div class="col-lg-2"><p class="card-text"><b>Ubicación:</b></p></div> <div class="col-lg-10"><input type="text" placeholder="Descripcion del Modulo" id="ubicacion" style="border: none; width: 55%;" readonly=""></div></div> <div class="row pt-3"><div class="col-lg-2"><p class="card-text"><b>Estilo:</b></p></div> <div class="col-lg-10"><input type="text" placeholder="Descripcion del Modulo" id="estilo" style="border: none; width: 55%;" readonly=""></div></div> <div class="row pt-3"><div class="col-lg-2"><p class="card-text"><b>Estado:</b></p></div> <div class="col-lg-10"><select id="estado" name="opciones" style="border: none; width: 55%;"><option>Activar</option><option>Desactivar</option></select></div></div> <div class="row" style="margin-top: 4%;"><div class="col-lg-9">¡Al terminar de editar, darle click en actualizar para
                    guardar los cambios!</div> <div class="col-lg-3 text-end"><button class="btn btn-outline-info"><b>Actualizar</b></button></div> <div id="estado" class="col-lg-10"></div></div></div></div></div>`,1);function $a(n,s){De(s,!1);let r=U(""),i=U(""),d=U(""),g=U(""),u=!0,x=U({}),j=U(!0),P=U(null);const h=Fe();async function te(){try{if((await Swal.fire({title:"¿Estás seguro?",text:"¡Desea registrar el siguiente Modulo!?: "+e(r),icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sí, registrar!",customClass:{popup:"swal-popup",title:"custom-title"}})).isConfirmed){h("showLoader");const q=await fetch("https://proyectomascotas.onrender.com/create_modulo",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nombre:e(r),descripcion:e(i),ubicacion:e(d),estado:u,estilo:e(g)})}),L=await q.json();console.log(L),h("hideLoader"),q.ok?(Swal.fire({title:"¡Se ha registrado el Modulo llamado "+e(r)+" con exito!",icon:"success",customClass:{popup:"swal-popup",title:"custom-title"}}),setTimeout(()=>{location.reload()},3500)):alert("Error en el registro")}else console.log("Registro Cancelado")}catch(c){l(P,c.message),h("hideLoader"),alert("Error en la solicitud: "+e(P))}}Ae(async()=>{try{console.log("2");const c=await fetch("https://proyectomascotas.onrender.com/get_modulos");if(!c.ok)throw new Error("Error al cargar los datos");const q=await c.json();l(x,q.resultado),console.log(e(x)),setTimeout(()=>{globalThis.$("#myTable").DataTable()},0)}catch(c){l(P,c.message)}finally{l(j,!1)}});async function E(){document.getElementById("nav-listado").setAttribute("class","fade"),document.getElementById("MostrarModulos").removeAttribute("class"),location.reload()}var f=1;async function m(c,q){console.log("Editando el modulo "+q);const L=document.getElementById("nav-listado");L.removeAttribute("class"),console.log(L),f=c,console.log(Number.isInteger(f)),console.log(f);let O=document.getElementById("MostrarModulos");O.setAttribute("class","fade"),console.log(O);const w=O.parentElement;console.log(w),w.insertBefore(L,O),console.log("NO Entra al try de buscar");try{console.log("Entra al try de buscar");const H=await fetch(`https://proyectomascotas.onrender.com/get_modulo/${f}`,{method:"GET",headers:{"Content-Type":"application/json"}}),F=await H.json();console.log(H),console.log(F),console.log("Buscando el Modulo seleccionado"),l(x,F.nombre),console.log(e(x)),document.getElementById("nombre").value=F.nombre,document.getElementById("descripcion").value=F.descripcion,document.getElementById("ubicacion").value=F.ubicacion,document.getElementById("estilo").value=F.estilo,console.log("verificando el estado: "+F.estado);const K=F.estado?"1":"0";document.getElementById("estado").value=K;const re=document.getElementById("nombre");re.removeAttribute("readonly"),re.focus(),document.getElementById("descripcion").removeAttribute("readonly"),document.getElementById("ubicacion").removeAttribute("readonly"),document.getElementById("estilo").removeAttribute("readonly"),document.getElementById("estado").removeAttribute("readonly")}catch(H){l(P,H.message)}finally{l(j,!1)}}async function Z(){console.log(f);let c=document.getElementById("nombre").value,q=document.getElementById("descripcion").value,L=document.getElementById("ubicacion").value,O=document.getElementById("estilo").value,w=document.getElementById("estado").value;console.log("ID DE ESTADO ENVIADO A LA BASE DE DATOS ES "+w);try{console.log("Entra al try de actualzar");const H=await fetch(`https://proyectomascotas.onrender.com/update_modulo/${f}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({nombre:c,descripcion:q,ubicacion:L,estilo:O,estado:w})});console.log("Actualizado"),Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:K=>{K.onmouseenter=Swal.stopTimer,K.onmouseleave=Swal.resumeTimer}}).fire({icon:"success",iconColor:"white",color:"white",background:"#00bdff",title:"Modulo actualizado exitosamente"}),setTimeout(()=>{const K=document.getElementById("nav-listado");K.setAttribute("class","fade");let re=document.getElementById("MostrarModulos");re.removeAttribute("class"),K.parentElement.insertBefore(re,K),location.reload()},3e3)}catch(H){l(P,H.message)}finally{l(j,!1)}}async function Y(c){let q=0,L=c,O=q!==0;try{const w=await fetch(`https://proyectomascotas.onrender.com/update_estado_modulo/${L}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({estado:O})}),H=await w.json();w.ok?(Swal.mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:K=>{K.onmouseenter=Swal.stopTimer,K.onmouseleave=Swal.resumeTimer}}).fire({icon:"error",iconColor:"white",color:"white",background:"#ff4e4e",title:"El Modulo a sido desactivado de manera exitosa"}),setTimeout(()=>{location.reload()},3500)):alert("Error al desactivar: "+H.message||"Error desconocido")}catch(w){alert("Error en la solicitud: "+w.message)}}async function W(c){let q=1,L=c,O=q===1;try{const w=await fetch(`https://proyectomascotas.onrender.com/update_estado_modulo/${L}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({estado:O})}),H=await w.json();w.ok?(Swal.mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:K=>{K.onmouseenter=Swal.stopTimer,K.onmouseleave=Swal.resumeTimer}}).fire({icon:"success",iconColor:"#000000",color:"black",background:"#76fa78",title:"El Modulo se ha activado de manera exitosa"}),setTimeout(()=>{location.reload()},3500)):alert("Error al Activar: "+H.message||"Error desconocido")}catch(w){alert("Error en la solicitud: "+w.message)}}Ce();var X=Ua(),T=Me(X),v=o(a(T),2),p=a(v);fe(p);var S=o(p,2);fe(S);var N=o(S,2);fe(N);var y=o(N,2);fe(y),Ee(2),t(v),t(T);var M=o(T,2),D=a(M),ae=o(a(D),2);{var G=c=>{var q=ja();I(c,q)},oe=(c,q)=>{{var L=w=>{var H=Na(),F=a(H,!0);t(H),ve(()=>ee(F,e(P))),I(w,H)},O=w=>{var H=La(),F=a(H),K=o(a(F));Te(K,5,()=>e(x),xe,(re,ne)=>{var me=za(),de=a(me),pe=a(de,!0);t(de);var ue=o(de),ge=a(ue,!0);t(ue);var be=o(ue),ke=a(be),_e=a(ke,!0);t(ke),t(be);var he=o(be),we=a(he),Le=a(we),Be=o(Le,2);{var Se=je=>{var Pe=Ma();V("click",Pe,()=>Y(e(ne).id)),I(je,Pe)},Oe=je=>{var Pe=Pa();V("click",Pe,()=>W(e(ne).id)),I(je,Pe)};le(Be,je=>{e(ne).estado?je(Se):je(Oe,!1)})}t(we),t(he),t(me),ve(()=>{ee(pe,e(ne).nombre),ee(ge,e(ne).descripcion),ze(ke,1,`badge ${e(ne).estado?"bg-success":"bg-danger"}`),ee(_e,e(ne).estado?"Activo":"Desactivado")}),V("click",Le,()=>m(e(ne).id,e(ne).nombre)),I(re,me)}),t(K),t(F),t(H),I(w,H)};le(c,w=>{e(P)?w(L):w(O,!1)},q)}};le(ae,c=>{e(j)?c(G):c(oe,!1)})}t(D),t(M);var _=o(M,2),R=o(a(_),2),$=a(R),J=o(a($),2);t($);var b=o($,2),B=o(a(b),8),k=o(a(B),2),Q=a(k),se=a(Q);se.value=se.__value="1";var z=o(se);z.value=z.__value="0",t(Q),t(k),t(B);var ie=o(B,2),ce=o(a(ie),2),C=a(ce);t(ce),Ee(2),t(ie),t(b),t(R),t(_),ye(p,()=>e(r),c=>l(r,c)),ye(S,()=>e(i),c=>l(i,c)),ye(N,()=>e(d),c=>l(d,c)),ye(y,()=>e(g),c=>l(g,c)),V("submit",v,He(te)),V("click",J,()=>E()),V("click",C,Z),I(n,X),Re()}var qa=A('<div class="admin-container svelte-frsr9g"><div class="admin-card svelte-frsr9g"><div class="card-header svelte-frsr9g"><h2>📊 Panel de Estadísticas</h2></div> <div class="card-body svelte-frsr9g"><div class="iframe-container svelte-frsr9g"><iframe title="SensuTrack - Estadísticas" src="https://app.powerbi.com/view?r=eyJrIjoiZWE4NDU5OWUtNDZiMi00M2RjLTk0NTUtZWUxZDkyMjMwZDQyIiwidCI6IjFlOWFhYmU4LTY3ZjgtNGYxYy1hMzI5LWE3NTRlOTI0OTlhZSIsImMiOjR9" frameborder="0" allowfullscreen="" class="svelte-frsr9g"></iframe></div></div></div></div>');function Ga(n){var s=qa();I(n,s)}var Ja=A('<div class="row justify-content-center text-center"><div class="col-12 mb-2">Cargando datos...</div> <div class="spinner-border text-primary" role="status"><span class="visually-hidden">Loading...</span></div></div>'),Ha=A('<div class="alert alert-danger text-center"> </div>'),Fa=A('<button class="btn btn-sm btn-outline-danger"><i class="bi bi-lock"></i> <span class="d-none d-md-inline">Desactivar</span></button>'),Va=A('<button class="btn btn-sm btn-outline-success"><i class="bi bi-unlock"></i> <span class="d-none d-md-inline">Activar</span></button>'),Za=A('<tr><td> </td><td> </td><td> </td><td> </td><td> </td><td class="text-center"><span> </span></td><td class="text-center"><div class="d-flex flex-wrap gap-1 justify-content-center"><button class="btn btn-sm btn-outline-primary"><i class="bi bi-pencil"></i> <span class="d-none d-md-inline">Editar</span></button> <!></div></td></tr>'),Ya=A('<div class="table-responsive"><table class="table table-hover table-bordered align-middle" id="myTable"><thead class="thead-light text-center"><tr><th>ID</th><th>Usuario</th><th>Latitud</th><th>Longitud</th><th>Lugar</th><th>Estado</th><th>Opcion</th></tr></thead><tbody></tbody></table></div>'),Wa=A('<div id="Mostrarusuario"><div class="container py-4"><h2 class="text-center mb-4 pb-2 border-bottom border-3 border-primary fw-bold"><i class="bi-clock-history me-2"></i>Historial de Ubicaciones</h2> <!></div></div>');function Xa(n,s){De(s,!1);let r=U([]),i=U(!0),d=U(null);Ae(async()=>{try{const h=await fetch("http://localhost:3000/historial");if(!h.ok)throw new Error("Error al cargar los datos");const te=await h.json();console.log(te),l(r,Array.isArray(te)?te:[te]),setTimeout(()=>{globalThis.$&&globalThis.$.fn.DataTable?globalThis.$("#myTable").DataTable():console.error("jQuery o DataTables no están cargados")},0)}catch(h){l(d,h.message)}finally{l(i,!1)}}),Ce();var g=Wa(),u=a(g),x=o(a(u),2);{var j=h=>{var te=Ja();I(h,te)},P=(h,te)=>{{var E=m=>{var Z=Ha(),Y=a(Z,!0);t(Z),ve(()=>ee(Y,e(d))),I(m,Z)},f=m=>{var Z=Ya(),Y=a(Z),W=o(a(Y));Te(W,5,()=>e(r),xe,(X,T)=>{var v=Za(),p=a(v),S=a(p,!0);t(p);var N=o(p),y=a(N,!0);t(N);var M=o(N),D=a(M,!0);t(M);var ae=o(M),G=a(ae,!0);t(ae);var oe=o(ae),_=a(oe,!0);t(oe);var R=o(oe),$=a(R),J=a($,!0);t($),t(R);var b=o(R),B=a(b),k=a(B),Q=o(k,2);{var se=ie=>{var ce=Fa();V("click",ce,()=>desactivar(e(T).id)),I(ie,ce)},z=ie=>{var ce=Va();V("click",ce,()=>activar(e(T).id)),I(ie,ce)};le(Q,ie=>{e(T).estado?ie(se):ie(z,!1)})}t(B),t(b),t(v),ve(()=>{ee(S,e(T).id),ee(y,e(T).id_usuario),ee(D,e(T).latitud),ee(G,e(T).longitud),ee(_,e(T).lugar),ze($,1,`badge ${e(T).estado?"bg-success":"bg-danger"}`),ee(J,e(T).estado?"Activo":"Desactivado")}),V("click",k,()=>editar(e(T).id,e(T).nombre)),I(X,v)}),t(W),t(Y),t(Z),I(m,Z)};le(h,m=>{e(d)?m(E):m(f,!1)},te)}};le(x,h=>{e(i)?h(j):h(P,!1)})}t(u),t(g),I(n,g),Re()}var Qa=A('<option class="svelte-1r4v3de"> </option>'),Ka=A('<label class="checkbox-label svelte-1r4v3de"><input type="checkbox" name="modulo" class="svelte-1r4v3de"> </label>'),eo=A('<div class="wrapper svelte-1r4v3de"><div class="title small-title svelte-1r4v3de" style="color: dodgerblue;">REGISTRO DE MODULOSXROL</div> <form class="class-form svelte-1r4v3de"><span class="svelte-1r4v3de">Roles:</span> <select id="roles" class="form__input svelte-1r4v3de" required><option disabled selected class="svelte-1r4v3de">Selecciona un rol</option><!></select> <fieldset class="checkbox-group svelte-1r4v3de"><legend class="svelte-1r4v3de">Módulos:</legend> <span class="svelte-1r4v3de">Selecciona los Modulos que tendra el Rol seleccionado:</span> <div class="checkbox-container svelte-1r4v3de"></div></fieldset> <button class="flip-card__btn small-btn svelte-1r4v3de">Confirmar</button></form> <div class="loader-container svelte-1r4v3de"><div class="loader-text svelte-1r4v3de"><span class="svelte-1r4v3de">S</span> <span class="svelte-1r4v3de">e</span> <span class="svelte-1r4v3de">n</span> <span class="svelte-1r4v3de">s</span> <span class="svelte-1r4v3de">u</span> <span class="svelte-1r4v3de">T</span> <span class="svelte-1r4v3de">r</span> <span class="svelte-1r4v3de">a</span> <span class="svelte-1r4v3de">c</span> <span class="svelte-1r4v3de">k</span></div></div></div>');function to(n,s){De(s,!1);const r=[];let i="",d=!0,g=U([]),u=[],x=U({}),j=U({}),P=null,h=U();Ae(async()=>{const N=await(await fetch("https://proyectomascotas.onrender.com/get_modulos/")).json();l(x,N.resultado),console.log(e(x));const M=await(await fetch("https://proyectomascotas.onrender.com/get_roles/")).json();l(j,M.resultado),console.log(e(j))});function te(S){S&&(S.style.display="flex")}function E(S){S&&(S.style.display="none")}async function f(){console.log(e(g)),console.log(u),i=document.getElementById("roles").value;try{if((await Swal.fire({title:"¿Estás seguro?",text:"¡Desea registrar el siguiente ModuloxRol!?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sí, registrar!",customClass:{popup:"swal-popup",title:"custom-title"}})).isConfirmed){te(e(h));const N=await fetch("https://proyectomascotas.onrender.com/create_moduloXrol",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_modulo:e(g),id_rol:i,estado:d})}),y=await N.json();console.log(y),E(e(h)),N.ok?(Swal.fire({title:"¡Se ha registrado el ModuloxRol con exito ",icon:"success",customClass:{popup:"swal-popup",title:"custom-title"}}),setTimeout(()=>{location.reload()},3500)):alert("Error en el registro")}else console.log("Registro Cancelado")}catch(S){P=S.message,E(e(h)),alert("Error en la solicitud: "+P)}}Ce();var m=eo(),Z=o(a(m),2),Y=o(a(Z),2),W=a(Y);W.value=W.__value="";var X=o(W);Te(X,1,()=>e(j),xe,(S,N)=>{var y=Qa(),M={},D=a(y,!0);t(y),ve(()=>{M!==(M=e(N).id)&&(y.value=(y.__value=e(N).id)??""),ee(D,e(N).nombre)}),I(S,y)}),t(Y);var T=o(Y,2),v=o(a(T),4);Te(v,5,()=>e(x),xe,(S,N)=>{var y=Ka(),M=a(y);fe(M);var D,ae=o(M);t(y),ve(()=>{ut(M,"id",`modulo-${e(N).id??""}`),D!==(D=e(N).id)&&(M.value=(M.__value=e(N).id)??""),ee(ae,` ${e(N).nombre??""}`)}),vt(r,[],M,()=>(e(N).id,e(g)),G=>l(g,G)),I(S,y)}),t(v),t(T),Ee(2),t(Z);var p=o(Z,2);mt(p,S=>l(h,S),()=>e(h)),t(m),V("submit",Z,He(f)),I(n,m),Re()}var ao=A('<button class="overlay svelte-1ig2dkm" aria-label="Cerrar menú"></button>'),oo=A(`<div class="admin-welcome svelte-1ig2dkm"><h1 class="svelte-1ig2dkm">👋 ¡Bienvenido, Administrador!</h1> <p class="subtitle svelte-1ig2dkm">Este panel te permite tener el control total del sistema
                    para apoyar a las personas ciegas con eficiencia y
                    seguridad.</p></div>`),so=A('<div class="mobile-layout svelte-1ig2dkm"><header class="mobile-header svelte-1ig2dkm"><button class="menu-button svelte-1ig2dkm"><i class="bi bi-list svelte-1ig2dkm"></i></button> <h1 class="svelte-1ig2dkm">Admin</h1> <div class="header-spacer svelte-1ig2dkm"></div></header> <div><nav class="svelte-1ig2dkm"><button class="svelte-1ig2dkm"><i class="bi bi-person-add svelte-1ig2dkm"></i> <span class="svelte-1ig2dkm">Registrar Usuario</span></button> <button class="svelte-1ig2dkm"><i class="bi bi-file-earmark-spreadsheet svelte-1ig2dkm"></i> <span class="svelte-1ig2dkm">Reportes</span></button> <button class="svelte-1ig2dkm"><i class="bi bi-geo-alt svelte-1ig2dkm"></i> <span class="svelte-1ig2dkm">Registrar GPS</span></button> <button class="svelte-1ig2dkm"><i class="bi bi-table svelte-1ig2dkm"></i> <span class="svelte-1ig2dkm">Tabla Usuarios</span></button> <button class="svelte-1ig2dkm"><i class="bi bi-table svelte-1ig2dkm"></i> <span class="svelte-1ig2dkm">Tabla Discapacitados</span></button> <button class="svelte-1ig2dkm"><i class="bi bi-person-badge svelte-1ig2dkm"></i> <span class="svelte-1ig2dkm">Registrar Roles</span></button> <button class="svelte-1ig2dkm"><i class="bi bi-stack svelte-1ig2dkm"></i> <span class="svelte-1ig2dkm">Registrar Módulos</span></button> <button class="svelte-1ig2dkm"><i class="bi bi-shield-lock svelte-1ig2dkm"></i> <span class="svelte-1ig2dkm">Asignar Módulo</span></button> <button class="svelte-1ig2dkm"><i class="bi bi-graph-up svelte-1ig2dkm"></i> <span class="svelte-1ig2dkm">Tablero</span></button> <button class="svelte-1ig2dkm"><i class="bi bi-map svelte-1ig2dkm"></i> <span class="svelte-1ig2dkm">Ubicaciones</span></button> <button class="logout svelte-1ig2dkm"><i class="bi bi-power svelte-1ig2dkm"></i> <span class="svelte-1ig2dkm">Cerrar Sesión</span></button></nav></div> <!> <main class="mobile-content svelte-1ig2dkm"><!> <div class="loader-container svelte-1ig2dkm"><div class="loader-text svelte-1ig2dkm"><span class="svelte-1ig2dkm">S</span> <span class="svelte-1ig2dkm">e</span> <span class="svelte-1ig2dkm">n</span> <span class="svelte-1ig2dkm">s</span> <span class="svelte-1ig2dkm">u</span> <span class="svelte-1ig2dkm">T</span> <span class="svelte-1ig2dkm">r</span> <span class="svelte-1ig2dkm">a</span> <span class="svelte-1ig2dkm">c</span> <span class="svelte-1ig2dkm">k</span></div></div></main></div> <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet" class="svelte-1ig2dkm">',1);function bo(n){let s=U("X"),r=U(),i=U(!1);function d(){ot(r,e(r).style.display="flex")}function g(){ot(r,e(r).style.display="none")}function u(){l(i,!e(i))}function x(){localStorage.clear(),window.location.href="/"}function j(){l(s,"registro_usuario"),l(i,!1)}function P(){l(s,"reportes"),l(i,!1)}function h(){l(s,"registro_gps"),l(i,!1)}function te(){l(s,"tabla_usuarios"),l(i,!1)}function E(){l(s,"tabla_discapacitados"),l(i,!1)}function f(){l(s,"registro_roles"),l(i,!1)}function m(){l(s,"registro_modulos"),l(i,!1)}function Z(){l(s,"modulos_por_rol"),l(i,!1)}function Y(){l(s,"tablero"),l(i,!1)}function W(){l(s,"historial_ubicaciones"),l(i,!1)}var X=so(),T=Me(X),v=a(T),p=a(v);Ee(4),t(v);var S=o(v,2),N=a(S),y=a(N),M=o(y,2),D=o(M,2),ae=o(D,2),G=o(ae,2),oe=o(G,2),_=o(oe,2),R=o(_,2),$=o(R,2),J=o($,2),b=o(J,2);t(N),t(S);var B=o(S,2);{var k=C=>{var c=ao();V("click",c,u),I(C,c)};le(B,C=>{e(i)&&C(k)})}var Q=o(B,2),se=a(Q);{var z=C=>{var c=oo();I(C,c)},ie=(C,c)=>{{var q=O=>{Kt(O,{$$events:{showLoader:d,hideLoader:g}})},L=(O,w)=>{{var H=K=>{ra(K,{})},F=(K,re)=>{{var ne=de=>{na(de,{$$events:{showLoader:d,hideLoader:g}})},me=(de,pe)=>{{var ue=be=>{fa(be,{})},ge=(be,ke)=>{{var _e=we=>{Ta(we,{})},he=(we,Le)=>{{var Be=Oe=>{Oa(Oe,{$$events:{showLoader:d,hideLoader:g}})},Se=(Oe,je)=>{{var Pe=Ue=>{$a(Ue,{$$events:{showLoader:d,hideLoader:g}})},gt=(Ue,_t)=>{{var ht=$e=>{to($e,{})},yt=($e,wt)=>{{var Et=qe=>{Ga(qe)},xt=(qe,Tt)=>{{var kt=Ve=>{Xa(Ve,{})};le(qe,Ve=>{e(s)==="historial_ubicaciones"&&Ve(kt)},Tt)}};le($e,qe=>{e(s)==="tablero"?qe(Et):qe(xt,!1)},wt)}};le(Ue,$e=>{e(s)==="modulos_por_rol"?$e(ht):$e(yt,!1)},_t)}};le(Oe,Ue=>{e(s)==="registro_modulos"?Ue(Pe):Ue(gt,!1)},je)}};le(we,Oe=>{e(s)==="registro_roles"?Oe(Be):Oe(Se,!1)},Le)}};le(be,we=>{e(s)==="tabla_discapacitados"?we(_e):we(he,!1)},ke)}};le(de,be=>{e(s)==="tabla_usuarios"?be(ue):be(ge,!1)},pe)}};le(K,de=>{e(s)==="registro_gps"?de(ne):de(me,!1)},re)}};le(O,K=>{e(s)==="reportes"?K(H):K(F,!1)},w)}};le(C,O=>{e(s)==="registro_usuario"?O(q):O(L,!1)},c)}};le(se,C=>{e(s)==="X"?C(z):C(ie,!1)})}var ce=o(se,2);mt(ce,C=>l(r,C),()=>e(r)),t(Q),t(T),Ee(2),ve(()=>{ut(p,"aria-label",e(i)?"Cerrar menú":"Abrir menú"),ze(S,1,`mobile-sidebar ${e(i)?"open":""}`,"svelte-1ig2dkm")}),V("click",p,u),V("click",y,j),V("click",M,P),V("click",D,h),V("click",ae,te),V("click",G,E),V("click",oe,f),V("click",_,m),V("click",R,Z),V("click",$,Y),V("click",J,W),V("click",b,x),I(n,X)}export{bo as component};
