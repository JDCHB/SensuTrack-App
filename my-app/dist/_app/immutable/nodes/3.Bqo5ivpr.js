import{t as I,a as S}from"../chunks/DB2fUOgU.js";import{i as Ce}from"../chunks/DcovNT_f.js";import{h as Se,a as Bt,b as St,l as e,ai as It,c as At,r as Qe,s as Ye,d as Ze,g as Ge,C as Ct,e as rt,f as lt,p as Dt,I as it,a3 as Rt,v as $,aw as et,ax as We,M as tt,ay as Xe,az as at,aA as Ot,G as jt,aB as Nt,a5 as Mt,aC as Ke,aD as Pt,A as Lt,z as Ut,K as zt,aE as nt,q as $t,aF as qt,i as dt,V as Gt,k as De,w as l,n as o,o as a,a7 as ve,aG as ct,t,x as Ie,m as Re,a6 as Pe,aH as ot}from"../chunks/B_GF-YZf.js";import{l as Jt,e as W}from"../chunks/DvYAYf3U.js";import{i as le}from"../chunks/BPQlkIxo.js";import{r as be,b as ye,a as vt,s as ut}from"../chunks/xyBB9N7I.js";import{b as mt}from"../chunks/DbJ9r6hh.js";import{s as ee}from"../chunks/DmAATcWe.js";import{o as Ae,c as Ve}from"../chunks/DnDqS3fh.js";function Ee(n,s){return s}function Ht(n,s,r,i){for(var c=[],g=s.length,v=0;v<g;v++)Ot(s[v].e,c,!0);var E=g>0&&c.length===0&&r!==null;if(E){var O=r.parentNode;jt(O),O.append(r),i.clear(),Ne(n,s[0].prev,s[g-1].next)}Nt(c,()=>{for(var P=0;P<g;P++){var h=s[P];E||(i.delete(h.k),Ne(n,h.prev,h.next)),Mt(h.e,!E)}})}function xe(n,s,r,i,c,g=null){var v=n,E={flags:s,items:new Map,first:null},O=(s&nt)!==0;if(O){var P=n;v=Se?Ye(Ut(P)):P.appendChild(zt())}Se&&Bt();var h=null,te=!1,y=It(()=>{var f=r();return Rt(f)?f:f==null?[]:it(f)});St(()=>{var f=e(y),p=f.length;if(te&&p===0)return;te=p===0;let J=!1;if(Se){var H=v.data===At;H!==(p===0)&&(v=Qe(),Ye(v),Ze(!1),J=!0)}if(Se){for(var X=null,j,m=0;m<p;m++){if(Ge.nodeType===8&&Ge.data===Ct){v=Ge,J=!0,Ze(!1);break}var u=f[m],k=i(u,m);j=pt(Ge,E,X,null,u,k,m,c,s,r),E.items.set(k,j),X=j}p>0&&Ye(Qe())}Se||Vt(f,E,v,c,s,i,r),g!==null&&(p===0?h?rt(h):h=lt(()=>g(v)):h!==null&&Dt(h,()=>{h=null})),J&&Ze(!0),e(y)}),Se&&(v=Ge)}function Vt(n,s,r,i,c,g,v){var _,D,q,F;var E=(c&qt)!==0,O=(c&(Ke|Xe))!==0,P=n.length,h=s.items,te=s.first,y=te,f,p=null,J,H=[],X=[],j,m,u,k;if(E)for(k=0;k<P;k+=1)j=n[k],m=g(j,k),u=h.get(m),u!==void 0&&((_=u.a)==null||_.measure(),(J??(J=new Set)).add(u));for(k=0;k<P;k+=1){if(j=n[k],m=g(j,k),u=h.get(m),u===void 0){var N=y?y.e.nodes_start:r;p=pt(N,s,p,p===null?s.first:p.next,j,m,k,i,c,v),h.set(m,p),H=[],X=[],y=p.next;continue}if(O&&Ft(u,j,k,c),(u.e.f&We)!==0&&(rt(u.e),E&&((D=u.a)==null||D.unfix(),(J??(J=new Set)).delete(u))),u!==y){if(f!==void 0&&f.has(u)){if(H.length<X.length){var L=X[0],x;p=L.prev;var M=H[0],C=H[H.length-1];for(x=0;x<H.length;x+=1)st(H[x],L,r);for(x=0;x<X.length;x+=1)f.delete(X[x]);Ne(s,M.prev,C.next),Ne(s,p,M),Ne(s,C,L),y=L,p=C,k-=1,H=[],X=[]}else f.delete(u),st(u,y,r),Ne(s,u.prev,u.next),Ne(s,u,p===null?s.first:p.next),Ne(s,p,u),p=u;continue}for(H=[],X=[];y!==null&&y.k!==m;)(y.e.f&We)===0&&(f??(f=new Set)).add(y),X.push(y),y=y.next;if(y===null)continue;u=y}H.push(u),p=u,y=u.next}if(y!==null||f!==void 0){for(var ae=f===void 0?[]:it(f);y!==null;)(y.e.f&We)===0&&ae.push(y),y=y.next;var V=ae.length;if(V>0){var oe=(c&nt)!==0&&P===0?r:null;if(E){for(k=0;k<V;k+=1)(q=ae[k].a)==null||q.measure();for(k=0;k<V;k+=1)(F=ae[k].a)==null||F.fix()}Ht(s,ae,oe,h)}}E&&$t(()=>{var b;if(J!==void 0)for(u of J)(b=u.a)==null||b.apply()}),tt.first=s.first&&s.first.e,tt.last=p&&p.e}function Ft(n,s,r,i){(i&Ke)!==0&&at(n.v,s),(i&Xe)!==0?at(n.i,r):n.i=r}function pt(n,s,r,i,c,g,v,E,O,P){var h=(O&Ke)!==0,te=(O&Pt)===0,y=h?te?$(c):et(c):c,f=(O&Xe)===0?v:et(v),p={i:f,v:y,k:g,a:null,e:null,prev:r,next:i};try{return p.e=lt(()=>E(n,y,f,P),Se),p.e.prev=r&&r.e,p.e.next=i&&i.e,r===null?s.first=p:(r.next=p,r.e.next=p.e),i!==null&&(i.prev=p,i.e.prev=p.e),p}finally{}}function st(n,s,r){for(var i=n.next?n.next.e.nodes_start:r,c=s?s.e.nodes_start:r,g=n.e.nodes_start;g!==i;){var v=Lt(g);c.before(g),g=v}}function Ne(n,s,r){s===null?n.first=r:(s.next=r,s.e.next=r&&r.e),r!==null&&(r.prev=s,r.e.prev=s&&s.e)}function Yt(n,s,r){var i=n==null?"":""+n;return s&&(i=i?i+" "+s:s),i===""?null:i}function qe(n,s,r,i,c,g){var v=n.__className;if(Se||v!==r||v===void 0){var E=Yt(r,i);(!Se||E!==n.getAttribute("class"))&&(E==null?n.removeAttribute("class"):n.className=E),n.__className=r}return g}function bt(n,s,r){if(n.multiple)return Wt(n,s);for(var i of n.options){var c=Je(i);if(Gt(c,s)){i.selected=!0;return}}(!r||s!==void 0)&&(n.selectedIndex=-1)}function Zt(n,s){dt(()=>{var r=new MutationObserver(()=>{var i=n.__value;bt(n,i)});return r.observe(n,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{r.disconnect()}})}function ft(n,s,r=s){var i=!0;Jt(n,"change",c=>{var g=c?"[selected]":":checked",v;if(n.multiple)v=[].map.call(n.querySelectorAll(g),Je);else{var E=n.querySelector(g)??n.querySelector("option:not([disabled])");v=E&&Je(E)}r(v)}),dt(()=>{var c=s();if(bt(n,c,i),i&&c===void 0){var g=n.querySelector(":checked");g!==null&&(c=Je(g),r(c))}n.__value=c,i=!1}),Zt(n)}function Wt(n,s){for(var r of n.options)r.selected=~s.indexOf(Je(r))}function Je(n){return"__value"in n?n.__value:n.value}function He(n){return function(...s){var r=s[0];return r.preventDefault(),n==null?void 0:n.apply(this,s)}}var Xt=I("<option> </option>"),Kt=I('<div class="form-wrapper svelte-3crwtj"><div class="form-title svelte-3crwtj">REGISTRO DE USUARIOS</div> <form class="vibrant-form svelte-3crwtj"><input class="vibrant-input svelte-3crwtj" placeholder="Nombre" type="text" autocomplete="off" required> <input class="vibrant-input svelte-3crwtj" placeholder="Apellido" type="text" autocomplete="off" required> <input class="vibrant-input svelte-3crwtj" placeholder="Documento" type="text" autocomplete="off" required> <input class="vibrant-input svelte-3crwtj" placeholder="Teléfono" type="text" autocomplete="off" required> <input class="vibrant-input svelte-3crwtj" placeholder="Correo Electrónico" type="email" autocomplete="off" required> <input class="vibrant-input svelte-3crwtj" placeholder="Contraseña" type="password" autocomplete="off" required> <input class="vibrant-input svelte-3crwtj" id="Confirmar_Contraseña" placeholder="Confirmar Contraseña" type="password" autocomplete="off" required> <select id="roles" class="vibrant-select svelte-3crwtj"><option disabled selected>Seleccione el Rol:</option><!></select> <button class="vibrant-button svelte-3crwtj">REGISTRAR USUARIO</button></form></div>');function Qt(n,s){De(s,!1);let r=$(""),i=$(""),c=$(""),g="",v=$(""),E=$(""),O=$(""),P=$(""),h=$([]),te=!0,y=null;Ae(async()=>{const ae=await(await fetch("https://proyectomascotas.onrender.com/get_roles/")).json();l(h,ae.resultado),console.log(e(h))});const f=Ve();async function p(){if(g=document.getElementById("Confirmar_Contraseña").value,g===e(c))try{const C=await Swal.fire({title:"¿Estás seguro?",text:"¡Desea registrar un nuevo Usuario a SensuTrack!?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sí, registrar!",customClass:{popup:"swal-popup",title:"custom-title"}}),ae=parseInt(e(P),10);if(isNaN(ae)){alert("Por favor, seleccione un rol válido."),f("hideLoader");return}if(C.isConfirmed){f("showLoader");const oe=await(await fetch("https://proyectomascotas.onrender.com/create_user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e(O),password:e(c),nombre:e(r),apellido:e(i),documento:e(v),telefono:e(E),id_rol:e(P),estado:te})})).json();console.log("Respuesta del servidor:",oe),f("hideLoader"),oe.resultado==="Usuario creado"?Swal.fire({title:"¡Registrado!,¡Bienvenid@ "+e(r)+"!",icon:"success",customClass:{popup:"swal-popup",title:"custom-title"}}):oe.resultado==="El usuario ya existe"&&Swal.fire({icon:"error",title:"Error",text:"Lo sentimos, el usuario ya existe."})}else Swal.fire({title:"REGISTRO CANCELADO",icon:"error",customClass:{popup:"swal-popup",title:"custom-title"}})}catch(C){y=C.message,f("hideLoader"),alert("Error en la solicitud: "+y)}else Swal.fire({title:"Parece que ha ocurrido un error",text:"No son iguales las contraseñas, porfavor intente de nuevo :]",icon:"error",customClass:{popup:"swal-popup",title:"custom-title"}})}Ce();var J=Kt(),H=o(a(J),2),X=a(H);be(X);var j=o(X,2);be(j);var m=o(j,2);be(m);var u=o(m,2);be(u);var k=o(u,2);be(k);var N=o(k,2);be(N);var L=o(N,4);ve(()=>{e(P),ct(()=>{e(h)})});var x=a(L);x.value=x.__value="";var M=o(x);xe(M,1,()=>e(h),Ee,(C,ae)=>{var V=Xt(),oe={},_=a(V,!0);t(V),ve(()=>{oe!==(oe=e(ae).id)&&(V.value=(V.__value=e(ae).id)??""),ee(_,e(ae).nombre)}),S(C,V)}),t(L),Ie(2),t(H),t(J),ye(X,()=>e(r),C=>l(r,C)),ye(j,()=>e(i),C=>l(i,C)),ye(m,()=>e(v),C=>l(v,C)),ye(u,()=>e(E),C=>l(E,C)),ye(k,()=>e(O),C=>l(O,C)),ye(N,()=>e(c),C=>l(c,C)),ft(L,()=>e(P),C=>l(P,C)),W("submit",H,He(p)),S(n,J),Re()}var ea=I('<div class="progress" style="height: 5px;"><div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%"></div></div>'),ta=I('<p class="text-danger text-center"> </p>'),aa=I("<tr><td> </td><td> </td><td> </td><td> </td><td> </td><td> </td><td> </td></tr>"),oa=I('<h3 class="mb-4 text-center text-secondary svelte-sjxh8v">Discapacitados Registrados</h3> <div class="table-responsive"><table class="table table-bordered table-striped svelte-sjxh8v"><thead class="table-light text-center"><tr><th>Id</th><th>Nombre</th><th>Género</th><th>Tipo de Ceguera</th><th>Cuidador</th><th>Fecha y Hora</th><th>Estado</th></tr></thead><tbody></tbody></table></div> <div class="text-center mt-4"><button class="btn btn-success btn-lg px-4 svelte-sjxh8v"><i class="fas fa-download me-2"></i> Exportar como PDF</button></div>',1),sa=I('<div class="container my-4 p-4 bg-white rounded shadow-lg svelte-sjxh8v"><h2 class="text-center text-primary fw-bold mb-4 svelte-sjxh8v">Reportes</h2> <div class="mb-4"><select class="form-select form-select-lg" id="opcion" required><option>Discapacitados</option><option>Usuarios</option><option>Otro</option></select></div> <div class="row row-cols-1 row-cols-md-2 g-3 mb-4"><div><label for="desde_ciegos" class="form-label fw-semibold svelte-sjxh8v">Desde:</label> <input type="date" id="desde_ciegos" class="form-control"></div> <div><label for="hasta_ciegos" class="form-label fw-semibold svelte-sjxh8v">Hasta:</label> <input type="date" id="hasta_ciegos" class="form-control"></div></div> <div class="text-center mb-4"><button type="button" class="btn btn-primary btn-lg px-4 svelte-sjxh8v"><i class="fas fa-file-alt me-2"></i> Generar Reporte</button></div></div> <div class="container py-4 svelte-sjxh8v" id="MostrarReporte"><!></div>',1);function ra(n,s){De(s,!1);let r=$([]),i=$(!1),c=$(null),g,v="",E="",O=$(!1);async function P(){try{if(l(i,!0),l(O,!1),l(c,null),g=document.getElementById("opcion").value,v=document.getElementById("desde_ciegos").value,E=document.getElementById("hasta_ciegos").value,console.log({fecha1:v,fecha2:E}),!v||!E){Swal.fire({icon:"error",title:"Error",text:"Por favor, selecciona ambas fechas."});return}const x=await fetch("https://proyectomascotas.onrender.com/Ciegos_Report",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fecha1:v,fecha2:E})});if(!x.ok)throw new Error("Error al cargar los datos");const M=await x.json();console.log(M),l(r,M.resultado),l(O,!0),setTimeout(()=>globalThis.$("#myTable").DataTable(),0)}catch(x){l(c,x.message),console.error("Error al generar reporte:",x)}finally{l(i,!1)}}function h(){const{jsPDF:x}=window.jspdf,M=new x,C=["Id","Nombre","Género","Tipo de Ceguera","Cuidador","Fecha","Estado"],ae=e(r).map(V=>[V.id,V.nombre,V.genero,V.tipo_ceguera,V.nombre_cuidador,V.fecha,V.estado]);M.text(20,20,"Reporte de discapacitados visuales registrados en la página"),M.autoTable(C,ae,{startY:30}),M.save("ReporteDiscapacitados.pdf"),Swal.fire({position:"center",icon:"success",title:"Se exportó de manera exitosa",showConfirmButton:!1,timer:1500})}Ce();var te=sa(),y=Pe(te),f=o(a(y),2),p=a(f),J=a(p);J.value=J.__value="1";var H=o(J);H.value=H.__value="2";var X=o(H);X.value=X.__value="3",t(p),t(f);var j=o(f,4),m=a(j);t(j),t(y);var u=o(y,2),k=a(u);{var N=x=>{var M=ea();S(x,M)},L=(x,M)=>{{var C=V=>{var oe=ta(),_=a(oe);t(oe),ve(()=>ee(_,`Error: ${e(c)??""}`)),S(V,oe)},ae=(V,oe)=>{{var _=D=>{var q=oa(),F=o(Pe(q),2),b=a(F),B=o(a(b));xe(B,5,()=>e(r),Ee,(se,U)=>{var ie=aa(),de=a(ie),A=a(de,!0);t(de);var d=o(de),G=a(d,!0);t(d);var z=o(d),R=a(z,!0);t(z);var w=o(z),Y=a(w,!0);t(w);var Z=o(w),Q=a(Z,!0);t(Z);var re=o(Z),ne=a(re,!0);t(re);var me=o(re),ce=a(me,!0);t(me),t(ie),ve(()=>{ee(A,e(U).id),ee(G,e(U).nombre),ee(R,e(U).genero),ee(Y,e(U).tipo_ceguera),ee(Q,e(U).nombre_cuidador),ee(ne,e(U).fecha),ee(ce,e(U).estado?"Activo":"Inactivo")}),S(se,ie)}),t(B),t(b),t(F);var T=o(F,2),K=a(T);t(T),W("click",K,h),S(D,q)};le(V,D=>{e(O)&&D(_)},oe)}};le(x,V=>{e(c)?V(C):V(ae,!1)},M)}};le(k,x=>{e(i)?x(N):x(L,!1)})}t(u),W("click",m,P),S(n,te),Re()}var la=I("<option> </option>"),ia=I('<div class="wrapper svelte-pw5onu"><div class="title small-title svelte-pw5onu" style="color: dodgerblue;">REGISTRAR GPS</div> <form class="class-form svelte-pw5onu"><div class="form-group"><label for="numero_serie">Número de Serie:</label> <span>Registre el Número de Serie del GPS:</span> <input id="numero_serie" type="text" class="form__input svelte-pw5onu" placeholder="Ingrese el Serial del GPS" required></div> <span>Usuarios Discapacitados Resgistrados:</span> <select id="ciegos" class="form__input svelte-pw5onu" required><option disabled selected>Selecciona el Discapacitado que tendra el GPS</option><!></select> <button class="flip-card__btn small-btn svelte-pw5onu">Confirmar</button></form></div>');function na(n,s){De(s,!1);let r=$(""),i=100,c=$(""),g=!0,v=null,E=null,O=$({});Ae(async()=>{const m=await(await fetch("https://proyectomascotas.onrender.com/get_discapacitadosV_SIN_GPS/")).json();l(O,m.resultado),console.log(e(O))});const P=Ve();async function h(){try{P("showLoader");const j=await fetch("https://proyectomascotas.onrender.com/create_gps",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({numero_serie:e(r),nivel_bateria:i,id_ciego_vinculado:parseInt(e(c)),estado:g})}),m=await j.json();if(console.log(m),P("hideLoader"),j.ok)v=m.resultado,E=null,l(r,""),l(c,""),Swal.fire({title:"El GPS ha sido Registrado Exitosamente!",icon:"success",confirmButtonText:"OK"});else throw swalWithBootstrapButtons.fire({title:"Parece que ha ocurrido un error",text:"Revise que todo este correcto porfavor :]",icon:"error"}),new Error(m.detail||"Ocurrió un error")}catch(j){E=j.message,P("hideLoader"),v=null}}Ce();var te=ia(),y=o(a(te),2),f=a(y),p=o(a(f),4);be(p),t(f);var J=o(f,4);ve(()=>{e(c),ct(()=>{e(O)})});var H=a(J);H.value=H.__value="";var X=o(H);xe(X,1,()=>e(O),Ee,(j,m)=>{var u=la(),k={},N=a(u,!0);t(u),ve(()=>{k!==(k=e(m).id)&&(u.value=(u.__value=e(m).id)??""),ee(N,e(m).nombre)}),S(j,u)}),t(J),Ie(2),t(y),t(te),ye(p,()=>e(r),j=>l(r,j)),ft(J,()=>e(c),j=>l(c,j)),W("submit",y,He(h)),S(n,te),Re()}var da=I('<div class="row justify-content-center text-center"><div class="col-12 mb-2">Cargando datos...</div> <div class="spinner-border text-primary" role="status"><span class="visually-hidden">Loading...</span></div></div>'),ca=I('<div class="alert alert-danger text-center"> </div>'),va=I('<button class="btn btn-sm btn-outline-danger"><i class="bi bi-lock"></i> <span class="d-none d-md-inline">Desactivar</span></button>'),ua=I('<button class="btn btn-sm btn-outline-success"><i class="bi bi-unlock"></i> <span class="d-none d-md-inline">Activar</span></button>'),ma=I('<tr><td> </td><td> </td><td> </td><td> </td><td> </td><td class="text-center"><span> </span></td><td class="text-center"><div class="d-flex flex-wrap gap-1 justify-content-center"><button class="btn btn-sm btn-outline-primary"><i class="bi bi-pencil"></i> <span class="d-none d-md-inline">Editar</span></button> <!></div></td></tr>'),pa=I('<div class="table-responsive"><table class="table table-hover table-bordered align-middle" id="myTable"><thead class="thead-light text-center"><tr><th>Usuario</th><th>Nombre</th><th>Apellido</th><th>Documento</th><th>Teléfono</th><th>Estado</th><th>Acciones</th></tr></thead><tbody></tbody></table></div>'),ba=I(`<div id="Mostrarusuario"><div class="container py-4 bg-light rounded shadow"><h2 class="text-center mb-4 pb-2 border-bottom border-3 border-primary fw-bold"><i class="bi bi-people-fill me-2"></i>USUARIOS</h2> <!></div></div> <div class="fade" id="nav-listado" role="tabpanel" aria-labelledby="nav-listado-tab"><div class="container text-center"><p class="text-warning"></p></div> <div class="card border-dark shadow-lg" style="width: 50%; margin: 5% auto;"><div class="card-header d-flex justify-content-between align-items-center"><h5 class="card-title mb-0"><b>Editando Usuario</b></h5> <button class="btn btn-close" aria-label="Cerrar edición de usuario"></button></div> <div class="card-body"><div class="mb-3 row"><label for="nombres" class="col-lg-3 col-form-label"><b>Nombre:</b></label> <div class="col-lg-9"><input type="text" id="nombres" class="form-control" placeholder="Nombres" maxlength="100" readonly=""></div></div> <div class="mb-3 row"><label for="apellidos" class="col-lg-3 col-form-label"><b>Apellido:</b></label> <div class="col-lg-9"><input type="text" id="apellidos" class="form-control" placeholder="Apellidos" readonly=""></div></div> <div class="mb-3 row"><label for="documento" class="col-lg-3 col-form-label"><b>Documento:</b></label> <div class="col-lg-9"><input type="text" id="documento" class="form-control" placeholder="Documento de identidad" readonly=""></div></div> <div class="mb-3 row"><label for="telefono" class="col-lg-3 col-form-label"><b>Teléfono:</b></label> <div class="col-lg-9"><input type="text" id="telefono" class="form-control" placeholder="Teléfono" maxlength="20" readonly=""></div></div> <div class="mb-3 row"><label for="correo" class="col-lg-3 col-form-label"><b>Correo:</b></label> <div class="col-lg-9"><input type="text" id="correo" class="form-control" placeholder="Correo electrónico" readonly=""></div></div> <div class="mb-3 row"><label for="estado" class="col-lg-3 col-form-label"><b>Estado:</b></label> <div class="col-lg-9"><select id="estado" class="form-control"><option>Activar</option><option>Desactivar</option></select></div></div> <div class="d-flex justify-content-between align-items-center"><div class="col-lg-9 text-muted">¡Al terminar de editar, haga clic en actualizar para guardar
                    los cambios!</div> <div class="col-lg-3 text-end"><button class="btn btn-outline-info"><b>Actualizar</b></button></div></div></div></div></div>`,1);function fa(n,s){De(s,!1);let r=$({}),i=$(!0),c=$(null);Ae(async()=>{try{console.log("2");const _=await fetch("https://proyectomascotas.onrender.com/get_users");if(!_.ok)throw new Error("Error al cargar los datos");const D=await _.json();l(r,D.resultado),console.log(e(r)),setTimeout(()=>{globalThis.$("#myTable").DataTable()},0)}catch(_){l(c,_.message)}finally{l(i,!1)}});async function g(){document.getElementById("nav-listado").setAttribute("class","fade"),document.getElementById("Mostrarusuario").removeAttribute("class"),location.reload()}var v=1;async function E(_,D){console.log("Editando a "+D);const q=document.getElementById("nav-listado");q.removeAttribute("class"),console.log(q),v=_,console.log(Number.isInteger(v)),console.log(v);let F=document.getElementById("Mostrarusuario");F.setAttribute("class","fade"),console.log(F);const b=F.parentElement;console.log(b),b.insertBefore(q,F),console.log("NO Entra al try de buscar");try{console.log("Entra al try de buscar");const B=await fetch(`https://proyectomascotas.onrender.com/get_user/${v}`,{method:"GET",headers:{"Content-Type":"application/json"}}),T=await B.json();console.log(B),console.log(T),console.log("Buscando al usuario seleccionado"),l(r,T.apellido),console.log(e(r)),document.getElementById("nombres").value=T.nombre,document.getElementById("apellidos").value=T.apellido,document.getElementById("documento").value=T.documento,document.getElementById("telefono").value=T.telefono,document.getElementById("correo").value=T.email,console.log("verificando el estado: "+T.estado);const K=T.estado?"1":"0";document.getElementById("estado").value=K;const se=document.getElementById("nombres");se.removeAttribute("readonly"),se.focus(),document.getElementById("apellidos").removeAttribute("readonly"),document.getElementById("documento").removeAttribute("readonly"),document.getElementById("telefono").removeAttribute("readonly"),document.getElementById("correo").removeAttribute("readonly"),document.getElementById("estado").removeAttribute("readonly")}catch(B){l(c,B.message)}finally{l(i,!1)}}async function O(){console.log(v);let _=document.getElementById("nombres").value,D=document.getElementById("apellidos").value,q=document.getElementById("documento").value,F=document.getElementById("telefono").value,b=document.getElementById("correo").value,B=document.getElementById("estado").value;B=B==="1",console.log("ID DE ESTADO ENVIADO A LA BASE DE DATOS ES "+B);try{console.log("Entra al try de actualzar");const T=await fetch(`https://proyectomascotas.onrender.com/update_user_admin/${v}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:b,nombre:_,apellido:D,documento:q,telefono:F,estado:B})});console.log("Actualizado"),Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:se=>{se.onmouseenter=Swal.stopTimer,se.onmouseleave=Swal.resumeTimer}}).fire({icon:"success",iconColor:"white",color:"white",background:"#00bdff",title:"usuario actualizado con exito"}),setTimeout(()=>{const se=document.getElementById("nav-listado");se.setAttribute("class","fade");let U=document.getElementById("Mostrarusuario");U.removeAttribute("class"),se.parentElement.insertBefore(U,se),location.reload()},3e3)}catch(T){console.error("Error al actualizar el usuario:",T),Swal.fire({icon:"error",title:"Error",text:T.message})}finally{l(i,!1)}}async function P(_){let D=0,q=_,F=D!==0;try{const b=await fetch(`https://proyectomascotas.onrender.com/update_estado_user/${q}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({estado:F})}),B=await b.json();b.ok?(Swal.mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:K=>{K.onmouseenter=Swal.stopTimer,K.onmouseleave=Swal.resumeTimer}}).fire({icon:"error",iconColor:"white",color:"white",background:"#ff4e4e",title:"El Usuario a sido desactivado de manera exitosa"}),setTimeout(()=>{location.reload()},3500)):alert("Error al desactivar: "+B.message||"Error desconocido")}catch(b){alert("Error en la solicitud: "+b.message)}}async function h(_){let D=1,q=_,F=D===1;try{const b=await fetch(`https://proyectomascotas.onrender.com/update_estado_user/${q}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({estado:F})}),B=await b.json();b.ok?(Swal.mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:K=>{K.onmouseenter=Swal.stopTimer,K.onmouseleave=Swal.resumeTimer}}).fire({icon:"success",iconColor:"#000000",color:"black",background:"#76fa78",title:"El usuario se ha activado de manera exitosa"}),setTimeout(()=>{location.reload()},3500)):alert("Error al Activar: "+B.message||"Error desconocido")}catch(b){alert("Error en la solicitud: "+b.message)}}Ce();var te=ba(),y=Pe(te),f=a(y),p=o(a(f),2);{var J=_=>{var D=da();S(_,D)},H=(_,D)=>{{var q=b=>{var B=ca(),T=a(B,!0);t(B),ve(()=>ee(T,e(c))),S(b,B)},F=b=>{var B=pa(),T=a(B),K=o(a(T));xe(K,5,()=>e(r),Ee,(se,U)=>{var ie=ma(),de=a(ie),A=a(de,!0);t(de);var d=o(de),G=a(d,!0);t(d);var z=o(d),R=a(z,!0);t(z);var w=o(z),Y=a(w,!0);t(w);var Z=o(w),Q=a(Z,!0);t(Z);var re=o(Z),ne=a(re),me=a(ne,!0);t(ne),t(re);var ce=o(re),fe=a(ce),ue=a(fe),ge=o(ue,2);{var pe=_e=>{var he=va();W("click",he,()=>P(e(U).id)),S(_e,he)},Te=_e=>{var he=ua();W("click",he,()=>h(e(U).id)),S(_e,he)};le(ge,_e=>{e(U).estado?_e(pe):_e(Te,!1)})}t(fe),t(ce),t(ie),ve(()=>{ee(A,e(U).email),ee(G,e(U).nombre),ee(R,e(U).apellido),ee(Y,e(U).documento),ee(Q,e(U).telefono),qe(ne,1,`badge ${e(U).estado?"bg-success":"bg-danger"}`),ee(me,e(U).estado?"Activo":"Desactivado")}),W("click",ue,()=>E(e(U).id)),S(se,ie)}),t(K),t(T),t(B),S(b,B)};le(_,b=>{e(c)?b(q):b(F,!1)},D)}};le(p,_=>{e(i)?_(J):_(H,!1)})}t(f),t(y);var X=o(y,2),j=o(a(X),2),m=a(j),u=o(a(m),2);t(m);var k=o(m,2),N=o(a(k),10),L=o(a(N),2),x=a(L),M=a(x);M.value=M.__value="1";var C=o(M);C.value=C.__value="0",t(x),t(L),t(N);var ae=o(N,2),V=o(a(ae),2),oe=a(V);t(V),t(ae),t(k),t(j),t(X),W("click",u,()=>g()),W("click",oe,O),S(n,te),Re()}var ga=I('<div class="row justify-content-center text-center"><div class="col-12 mb-2">Cargando datos...</div> <div class="spinner-border text-primary" role="status"><span class="visually-hidden">Loading...</span></div></div>'),_a=I('<div class="alert alert-danger text-center"> </div>'),ha=I('<button class="btn btn-sm btn-outline-danger"><i class="bi bi-lock"></i> <span class="d-none d-md-inline">Desactivar</span></button>'),ya=I('<button class="btn btn-sm btn-outline-success"><i class="bi bi-unlock"></i> <span class="d-none d-md-inline">Activar</span></button>'),wa=I('<tr><td> </td><td> </td><td> </td><td class="text-center"><span> </span></td><td class="text-center"><div class="d-flex flex-wrap gap-1 justify-content-center"><button class="btn btn-sm btn-outline-primary"><i class="bi bi-pencil"></i> <span class="d-none d-md-inline">Editar</span></button> <!></div></td></tr>'),Ea=I('<div class="table-responsive"><table class="table table-hover table-bordered align-middle" id="myTable"><thead class="thead-light text-center"><tr><th class="px-4 py-2 border">Nombre</th><th class="px-4 py-2 border">Genero</th><th class="px-4 py-2 border">Tipo_Ceguera</th><th class="px-4 py-2 border">Estado</th><th class="px-4 py-2 border">Opcion</th></tr></thead><tbody></tbody></table></div>'),xa=I(`<div id="MostrarDiscapacitado"><div class="container py-4 bg-light rounded shadow"><h2 class="text-center mb-4 pb-2 border-bottom border-3 border-primary fw-bold"><i class="bi bi-people-fill me-2"></i>Lista de discapacitados</h2> <!></div></div> <div class="fade" id="nav-listado" role="tabpanel" aria-labelledby="nav-listado-tab"><div class="container text-center"><p class="text-warning"></p></div> <div class="card border-dark shadow-lg" style="width: 50%; margin: 5% auto;"><div class="card-header d-flex justify-content-between align-items-center"><h5 class="card-title mb-0"><b>Editando Discapacitado</b></h5> <button class="btn btn-close" aria-label="Cerrar edición de usuario"></button></div> <div class="card-body"><div class="mb-3 row"><label for="nombres" class="col-lg-3 col-form-label"><b>Nombre:</b></label> <div class="col-lg-9"><input type="text" id="nombres" class="form-control" placeholder="Nombres" maxlength="100" readonly=""></div></div> <div class="mb-3 row"><label for="genero" class="col-lg-3 col-form-label"><b>Género:</b></label> <div class="col-lg-9"><input type="text" id="genero" class="form-control" placeholder="Género" readonly=""></div></div> <div class="mb-3 row"><label for="tipo_ceguera" class="col-lg-3 col-form-label"><b>Tipo de Ceguera:</b></label> <div class="col-lg-9"><input type="text" id="tipo_ceguera" class="form-control" placeholder="Tipo de Ceguera" readonly=""></div></div> <div class="mb-3 row"><label for="estado" class="col-lg-3 col-form-label"><b>Estado:</b></label> <div class="col-lg-9"><select id="estado" class="form-control"><option>Activar</option><option>Desactivar</option></select></div></div> <div class="d-flex justify-content-between align-items-center"><div class="col-lg-9 text-muted">¡Al terminar de editar, haga clic en actualizar para guardar
                    los cambios!</div> <div class="col-lg-3 text-end"><button class="btn btn-outline-info"><b>Actualizar</b></button></div></div></div></div></div>`,1);function Ta(n,s){De(s,!1);let r=$({}),i=$(!0),c=$(null);Ae(async()=>{try{console.log("2");const _=await fetch("https://proyectomascotas.onrender.com/get_discapacitadosVCOMPLETOS");if(!_.ok)throw new Error("Error al cargar los datos");const D=await _.json();l(r,D.resultado),console.log(e(r)),setTimeout(()=>{globalThis.$("#myTable").DataTable()},0)}catch(_){l(c,_.message)}finally{l(i,!1)}});async function g(){document.getElementById("nav-listado").setAttribute("class","fade"),document.getElementById("MostrarDiscapacitado").removeAttribute("class"),location.reload()}var v=1;async function E(_,D){console.log("Editando a "+D);const q=document.getElementById("nav-listado");q.removeAttribute("class"),console.log(q),v=_,console.log(Number.isInteger(v)),console.log(v);let F=document.getElementById("MostrarDiscapacitado");F.setAttribute("class","fade"),console.log(F);const b=F.parentElement;console.log(b),b.insertBefore(q,F),console.log("NO Entra al try de buscar");try{console.log("Entra al try de buscar");const B=await fetch(`https://proyectomascotas.onrender.com/get_discapacitadoV/${v}`,{method:"GET",headers:{"Content-Type":"application/json"}}),T=await B.json();console.log(B),console.log(T),console.log("Buscando al usuario seleccionado"),l(r,T.nombre),console.log(e(r)),document.getElementById("nombres").value=T.nombre,document.getElementById("genero").value=T.id_genero_discapacitado,document.getElementById("tipo_ceguera").value=T.id_tipo_ceguera,console.log("verificando el estado: "+T.estado);const K=T.estado?"1":"0";document.getElementById("estado").value=K;const se=document.getElementById("nombres");se.removeAttribute("readonly"),se.focus(),document.getElementById("genero").removeAttribute("readonly"),document.getElementById("tipo_ceguera").removeAttribute("readonly"),document.getElementById("estado").removeAttribute("readonly")}catch(B){l(c,B.message)}finally{l(i,!1)}}async function O(){console.log(v);let _=document.getElementById("nombres").value,D=document.getElementById("genero").value,q=document.getElementById("tipo_ceguera").value,F=document.getElementById("estado").value;console.log("ID DE ESTADO ENVIADO A LA BASE DE DATOS ES "+F);try{console.log("Entra al try de actualzar");const b=await fetch(`https://proyectomascotas.onrender.com/update_user/${v}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({nombre:_,genero:D,tipo_ceguera:q,estado:F})});console.log("Actualizado"),Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:T=>{T.onmouseenter=Swal.stopTimer,T.onmouseleave=Swal.resumeTimer}}).fire({icon:"success",iconColor:"white",color:"white",background:"#00bdff",title:"Discapacitado actualizado con exito"}),setTimeout(()=>{const T=document.getElementById("nav-listado");T.setAttribute("class","fade");let K=document.getElementById("MostrarDiscapacitado");K.removeAttribute("class"),T.parentElement.insertBefore(K,T),location.reload()},3e3)}catch(b){l(c,b.message)}finally{l(i,!1)}}async function P(_){let D=0,q=_,F=D!==0;try{const b=await fetch(`https://proyectomascotas.onrender.com/update_estado_discapacitado/${q}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({estado:F})}),B=await b.json();b.ok?(Swal.mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:K=>{K.onmouseenter=Swal.stopTimer,K.onmouseleave=Swal.resumeTimer}}).fire({icon:"error",iconColor:"white",color:"white",background:"#ff4e4e",title:"El Discapacitado a sido desactivado de manera exitosa"}),setTimeout(()=>{location.reload()},3500)):alert("Error al desactivar: "+B.message||"Error desconocido")}catch(b){alert("Error en la solicitud: "+b.message)}}async function h(_){let D=1,q=_,F=D===1;try{const b=await fetch(`https://proyectomascotas.onrender.com/update_estado_discapacitado/${q}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({estado:F})}),B=await b.json();b.ok?(Swal.mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:K=>{K.onmouseenter=Swal.stopTimer,K.onmouseleave=Swal.resumeTimer}}).fire({icon:"success",iconColor:"#000000",color:"black",background:"#76fa78",title:"El Discapacitado se ha activado de manera exitosa"}),setTimeout(()=>{location.reload()},3500)):alert("Error al Activar: "+B.message||"Error desconocido")}catch(b){alert("Error en la solicitud: "+b.message)}}Ce();var te=xa(),y=Pe(te),f=a(y),p=o(a(f),2);{var J=_=>{var D=ga();S(_,D)},H=(_,D)=>{{var q=b=>{var B=_a(),T=a(B,!0);t(B),ve(()=>ee(T,e(c))),S(b,B)},F=b=>{var B=Ea(),T=a(B),K=o(a(T));xe(K,5,()=>e(r),Ee,(se,U)=>{var ie=wa(),de=a(ie),A=a(de,!0);t(de);var d=o(de),G=a(d,!0);t(d);var z=o(d),R=a(z,!0);t(z);var w=o(z),Y=a(w),Z=a(Y,!0);t(Y),t(w);var Q=o(w),re=a(Q),ne=a(re),me=o(ne,2);{var ce=ue=>{var ge=ha();W("click",ge,()=>P(e(U).id)),S(ue,ge)},fe=ue=>{var ge=ya();W("click",ge,()=>h(e(U).id)),S(ue,ge)};le(me,ue=>{e(U).estado?ue(ce):ue(fe,!1)})}t(re),t(Q),t(ie),ve(()=>{ee(A,e(U).nombre),ee(G,e(U).genero),ee(R,e(U).tipo_ceguera),qe(Y,1,`badge ${e(U).estado?"bg-success":"bg-danger"}`),ee(Z,e(U).estado?"Activo":"Desactivado")}),W("click",ne,()=>E(e(U).id,e(U).nombre)),S(se,ie)}),t(K),t(T),t(B),S(b,B)};le(_,b=>{e(c)?b(q):b(F,!1)},D)}};le(p,_=>{e(i)?_(J):_(H,!1)})}t(f),t(y);var X=o(y,2),j=o(a(X),2),m=a(j),u=o(a(m),2);t(m);var k=o(m,2),N=o(a(k),6),L=o(a(N),2),x=a(L),M=a(x);M.value=M.__value="1";var C=o(M);C.value=C.__value="0",t(x),t(L),t(N);var ae=o(N,2),V=o(a(ae),2),oe=a(V);t(V),t(ae),t(k),t(j),t(X),W("click",u,()=>g()),W("click",oe,O),S(n,te),Re()}var ka=I('<div class="row justify-content-center text-center"><div class="col-12 mb-2">Cargando datos...</div> <div class="spinner-border text-primary" role="status"><span class="visually-hidden">Loading...</span></div></div>'),Ba=I('<div class="alert alert-danger text-center"> </div>'),Sa=I('<button class="btn btn-sm btn-outline-danger"><i class="bi bi-lock"></i> <span class="d-none d-md-inline">Desactivar</span></button>'),Ia=I('<button class="btn btn-sm btn-outline-success"><i class="bi bi-unlock"></i> <span class="d-none d-md-inline">Activar</span></button>'),Aa=I('<tr><td> </td><td class="text-center"><span> </span></td><td class="text-center"><div class="d-flex flex-wrap gap-1 justify-content-center"><button class="btn btn-sm btn-outline-primary"><i class="bi bi-pencil"></i> <span class="d-none d-md-inline">Editar</span></button> <!></div></td></tr>'),Ca=I('<div class="table-responsive"><table class="table table-hover table-bordered align-middle" id="myTable"><thead class="thead-light text-center"><tr><th>Nombre</th><th>Estado</th><th>Opciones</th></tr></thead><tbody></tbody></table></div>'),Da=I('<label class="checkbox-label svelte-1stzg1k"><input type="checkbox"> </label>'),Ra=I(`<div class="wrapper svelte-1stzg1k"><div class="title small-title svelte-1stzg1k" style="color: dodgerblue;">REGISTRO DE ROLES</div> <form class="class-form svelte-1stzg1k"><input class="form__input small-input svelte-1stzg1k" placeholder="Nombre del Rol" type="text" required> <button class="flip-card__btn small-btn svelte-1stzg1k">Confirmar</button></form></div> <div id="MostrarRoles"><div class="container py-4 bg-light rounded shadow"><h2 class="text-center mb-4 pb-2 border-bottom border-3 border-primary fw-bold"><i class="bi bi-diagram-3 me-2"></i> Lista de Roles</h2> <!></div></div> <div class="fade" id="nav-listado" role="tabpanel" aria-labelledby="nav-listado-tab"><div class="container text-center"><p class="text-orange"></p></div> <div class="card border-dark shadow" style="width: 60%; margin-left: 20%;"><div class="card-header row g-2"><h5 class="card-title col-lg-11"><b>Editando Rol</b></h5> <button class="btn btn-close col-lg-1" aria-label="Cerrar edición de usuario"></button></div> <div class="card-body" style="margin-left: 10%;"><div class="row"><div class="col-lg-2"><p class="card-text"><b>Nombre:</b></p></div> <div class="col-lg-10"><input type="text" placeholder="Nombre del Modulo" id="nombre" maxlength="100" style="border: none; width: 55%;" readonly=""></div></div> <fieldset class="checkbox-group svelte-1stzg1k"><legend class="svelte-1stzg1k">Seleccione los módulos:</legend> <div class="checkbox-container svelte-1stzg1k"></div></fieldset> <div class="row pt-3"><div class="col-lg-2"><p class="card-text"><b>Estado:</b></p></div> <div class="col-lg-10"><select id="estado" name="opciones" style="border: none; width: 55%;"><option>Activar</option><option>Desactivar</option></select></div></div> <div class="row" style="margin-top: 4%;"><div class="col-lg-9">¡Al terminar de editar, darle click en actualizar para
                    guardar los cambios!</div> <div class="col-lg-3 text-end"><button class="btn btn-outline-info"><b>Actualizar</b></button></div> <div id="estado" class="col-lg-10"></div></div></div></div></div>`,1);function Oa(n,s){De(s,!1);const r=[];let i=$(""),c=!0,g=$({}),v=$({}),E=$(!0),O=$(null),P=$([]);Ae(async()=>{const d=await(await fetch("https://proyectomascotas.onrender.com/get_modulos/")).json();l(v,d.resultado),console.log("ando ando",e(v))});const h=Ve();async function te(){try{if((await Swal.fire({title:"¿Estás seguro?",text:"¡Desea registrar el siguiente Rol!? "+e(i),icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sí, registrar!",customClass:{popup:"swal-popup",title:"custom-title"}})).isConfirmed){h("showLoader");const d=await fetch("https://proyectomascotas.onrender.com/create_rol",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nombre:e(i),estado:c})}),G=await d.json();console.log(G),h("hideLoader"),d.ok?Swal.fire({title:"¡Se ha registrado el Rol llamado "+e(i)+" con exito!",icon:"success",customClass:{popup:"swal-popup",title:"custom-title"}}):alert("Error en el registro")}else console.log("Registro Cancelado")}catch(A){l(O,A.message),h("hideLoader"),alert("Error en la solicitud: "+e(O))}}Ae(async()=>{try{console.log("2");const A=await fetch("https://proyectomascotas.onrender.com/get_roles");if(!A.ok)throw new Error("Error al cargar los datos");const d=await A.json();l(g,d.resultado),console.log(e(g)),setTimeout(()=>{globalThis.$("#myTable").DataTable()},0)}catch(A){l(O,A.message)}finally{l(E,!1)}});async function y(){document.getElementById("nav-listado").setAttribute("class","fade"),document.getElementById("MostrarRoles").removeAttribute("class"),location.reload()}var f=1;async function p(A,d){console.log("Editando el Rol "+d);const G=document.getElementById("nav-listado");G.removeAttribute("class"),console.log(G),f=A,console.log(Number.isInteger(f)),console.log(f);let z=document.getElementById("MostrarRoles");z.setAttribute("class","fade"),console.log(z);const R=z.parentElement;console.log(R),R.insertBefore(G,z),console.log("NO Entra al try de buscar");const Y=await(await fetch("https://proyectomascotas.onrender.com/get_modulos/")).json();l(v,Y.resultado),console.log("ando ando",e(v));try{console.log("Entra al try de buscar");const Z=await fetch(`https://proyectomascotas.onrender.com/get_rol/${f}`,{method:"GET",headers:{"Content-Type":"application/json"}}),Q=await Z.json();console.log(Z),console.log(Q),console.log("Buscando el Rol seleccionado"),l(g,Q.nombre),console.log(e(g)),document.getElementById("nombre").value=Q.nombre,console.log("Verificando el estado: "+Q.estado);const re=Q.estado?"1":"0";document.getElementById("estado").value=re;const ne=document.getElementById("nombre");ne.removeAttribute("readonly"),ne.focus(),document.getElementById("estado").removeAttribute("readonly")}catch(Z){l(O,Z.message)}finally{l(E,!1)}}async function J(){console.log(f);let A=document.getElementById("nombre").value,d=document.getElementById("estado").value;console.log("ID DE ESTADO ENVIADO A LA BASE DE DATOS ES "+d);try{console.log("Entra al try de actualzar");const G=await fetch(`https://proyectomascotas.onrender.com/update_rol/${f}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({nombre:A,estado:d})});console.log("Actualizado");const z=await fetch(`https://proyectomascotas.onrender.com/update_moduloXrol02/${f}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_rol:f,id_modulo:e(P)})});console.log("Actualizado"),Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:w=>{w.onmouseenter=Swal.stopTimer,w.onmouseleave=Swal.resumeTimer}}).fire({icon:"success",iconColor:"white",color:"white",background:"#00bdff",title:"Rol actualizado exitosamente"}),setTimeout(()=>{const w=document.getElementById("nav-listado");w.setAttribute("class","fade");let Y=document.getElementById("MostrarRoles");Y.removeAttribute("class"),w.parentElement.insertBefore(Y,w),location.reload()},3e3)}catch(G){l(O,G.message)}finally{l(E,!1)}}async function H(A){let d=0,G=A,z=d!==0;try{const R=await fetch(`https://proyectomascotas.onrender.com/update_estado_rol/${G}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({estado:z})}),w=await R.json();R.ok?(Swal.mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:Z=>{Z.onmouseenter=Swal.stopTimer,Z.onmouseleave=Swal.resumeTimer}}).fire({icon:"error",iconColor:"white",color:"white",background:"#ff4e4e",title:"El Rol a sido desactivado de manera exitosa"}),setTimeout(()=>{location.reload()},3500)):alert("Error al desactivar: "+w.message||"Error desconocido")}catch(R){alert("Error en la solicitud: "+R.message)}}async function X(A){let d=1,G=A,z=d===1;try{const R=await fetch(`https://proyectomascotas.onrender.com/update_estado_rol/${G}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({estado:z})}),w=await R.json();R.ok?(Swal.mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:Z=>{Z.onmouseenter=Swal.stopTimer,Z.onmouseleave=Swal.resumeTimer}}).fire({icon:"success",iconColor:"#000000",color:"black",background:"#76fa78",title:"El Rol se ha activado de manera exitosa"}),setTimeout(()=>{location.reload()},3500)):alert("Error al Activar: "+w.message||"Error desconocido")}catch(R){alert("Error en la solicitud: "+R.message)}}Ce();var j=Ra(),m=Pe(j),u=o(a(m),2),k=a(u);be(k),Ie(2),t(u),t(m);var N=o(m,2),L=a(N),x=o(a(L),2);{var M=A=>{var d=ka();S(A,d)},C=(A,d)=>{{var G=R=>{var w=Ba(),Y=a(w,!0);t(w),ve(()=>ee(Y,e(O))),S(R,w)},z=R=>{var w=Ca(),Y=a(w),Z=o(a(Y));xe(Z,5,()=>e(g),Ee,(Q,re)=>{var ne=Aa(),me=a(ne),ce=a(me,!0);t(me);var fe=o(me),ue=a(fe),ge=a(ue,!0);t(ue),t(fe);var pe=o(fe),Te=a(pe),_e=a(Te),he=o(_e,2);{var we=ke=>{var Be=Sa();W("click",Be,()=>H(e(re).id)),S(ke,Be)},Le=ke=>{var Be=Ia();W("click",Be,()=>X(e(re).id)),S(ke,Be)};le(he,ke=>{e(re).estado?ke(we):ke(Le,!1)})}t(Te),t(pe),t(ne),ve(()=>{ee(ce,e(re).nombre),qe(ue,1,`badge fs-6 ${e(re).estado?"bg-success":"bg-danger"}`),ee(ge,e(re).estado?"Activo":"Desactivado")}),W("click",_e,()=>p(e(re).id,e(re).nombre)),S(Q,ne)}),t(Z),t(Y),t(w),S(R,w)};le(A,R=>{e(O)?R(G):R(z,!1)},d)}};le(x,A=>{e(E)?A(M):A(C,!1)})}t(L),t(N);var ae=o(N,2),V=o(a(ae),2),oe=a(V),_=o(a(oe),2);t(oe);var D=o(oe,2),q=o(a(D),2),F=o(a(q),2);xe(F,5,()=>e(v),Ee,(A,d)=>{var G=Da(),z=a(G);be(z);var R,w=o(z);t(G),ve(()=>{R!==(R=e(d).id)&&(z.value=(z.__value=e(d).id)??""),ee(w,` ${e(d).nombre??""}`)}),vt(r,[],z,()=>(e(d).id,e(P)),Y=>l(P,Y)),S(A,G)}),t(F),t(q);var b=o(q,2),B=o(a(b),2),T=a(B),K=a(T);K.value=K.__value="1";var se=o(K);se.value=se.__value="0",t(T),t(B),t(b);var U=o(b,2),ie=o(a(U),2),de=a(ie);t(ie),Ie(2),t(U),t(D),t(V),t(ae),ye(k,()=>e(i),A=>l(i,A)),W("submit",u,He(te)),W("click",_,()=>y()),W("click",de,J),S(n,j),Re()}var ja=I('<div class="row justify-content-center text-center"><div class="col-12 mb-2">Cargando datos...</div> <div class="spinner-border text-primary" role="status"><span class="visually-hidden">Loading...</span></div></div>'),Na=I('<div class="alert alert-danger text-center"> </div>'),Ma=I('<button class="btn btn-sm btn-outline-danger"><i class="bi bi-lock"></i> <span class="d-none d-md-inline">Desactivar</span></button>'),Pa=I('<button class="btn btn-sm btn-outline-success"><i class="bi bi-unlock"></i> <span class="d-none d-md-inline">Activar</span></button>'),La=I('<tr><td> </td><td> </td><td class="text-center"><span> </span></td><td class="text-center"><div class="d-flex flex-wrap gap-1 justify-content-center"><button class="btn btn-sm btn-outline-primary"><i class="bi bi-pencil"></i> <span class="d-none d-md-inline">Editar</span></button> <!></div></td></tr>'),Ua=I('<div class="table-responsive"><table class="table table-hover table-bordered align-middle" id="myTable"><thead><tr><th>Nombre</th><th>Descripcion</th><th>Estado</th><th>Opciones</th></tr></thead><tbody></tbody></table></div>'),za=I(`<div class="wrapper svelte-t5nwrd"><div class="title small-title svelte-t5nwrd" style="color: dodgerblue;">REGISTRO DE MODULOS</div> <form class="class-form svelte-t5nwrd"><input class="form__input small-input svelte-t5nwrd" placeholder="Nombre del Modulo" type="text" required> <input class="form__input small-input svelte-t5nwrd" placeholder="Descripcion del Modulo" type="text" required> <input class="form__input small-input svelte-t5nwrd" placeholder="Ubicacion del Modulo" type="text" required> <input class="form__input small-input svelte-t5nwrd" placeholder="Ingrese el icono que tendra el Modulo (Boostrap)" type="text" required> <button class="flip-card__btn small-btn svelte-t5nwrd">Confirmar</button></form></div> <div id="MostrarModulos"><div class="container py-4 bg-light rounded shadow"><h2 class="text-center mb-4 pb-2 border-bottom border-3 border-primary fw-bold"><i class="bi-grid-3x3-gap-fill me-2"></i>Lista de Modulos</h2> <!></div></div> <div class="fade" id="nav-listado" role="tabpanel" aria-labelledby="nav-listado-tab"><div class="container text-center"><p class="text-orange"></p></div> <div class="card border-dark shadow" style="width: 60%; margin-left: 20%;"><div class="card-header row g-2"><h5 class="card-title col-lg-11"><b>Editando Modulo</b></h5> <button class="btn btn-close col-lg-1" aria-label="Cerrar edición de usuario"></button></div> <div class="card-body" style="margin-left: 10%;"><div class="row"><div class="col-lg-2"><p class="card-text"><b>Nombre:</b></p></div> <div class="col-lg-10"><input type="text" placeholder="Nombre del Modulo" id="nombre" maxlength="100" style="border: none; width: 55%;" readonly=""></div></div> <div class="row pt-3"><div class="col-lg-2"><p class="card-text"><b>Descripcion:</b></p></div> <div class="col-lg-10"><input type="text" placeholder="Descripcion del Modulo" id="descripcion" style="border: none; width: 55%;" readonly=""></div></div> <div class="row pt-3"><div class="col-lg-2"><p class="card-text"><b>Ubicación:</b></p></div> <div class="col-lg-10"><input type="text" placeholder="Descripcion del Modulo" id="ubicacion" style="border: none; width: 55%;" readonly=""></div></div> <div class="row pt-3"><div class="col-lg-2"><p class="card-text"><b>Estilo:</b></p></div> <div class="col-lg-10"><input type="text" placeholder="Descripcion del Modulo" id="estilo" style="border: none; width: 55%;" readonly=""></div></div> <div class="row pt-3"><div class="col-lg-2"><p class="card-text"><b>Estado:</b></p></div> <div class="col-lg-10"><select id="estado" name="opciones" style="border: none; width: 55%;"><option>Activar</option><option>Desactivar</option></select></div></div> <div class="row" style="margin-top: 4%;"><div class="col-lg-9">¡Al terminar de editar, darle click en actualizar para
                    guardar los cambios!</div> <div class="col-lg-3 text-end"><button class="btn btn-outline-info"><b>Actualizar</b></button></div> <div id="estado" class="col-lg-10"></div></div></div></div></div>`,1);function $a(n,s){De(s,!1);let r=$(""),i=$(""),c=$(""),g=$(""),v=!0,E=$({}),O=$(!0),P=$(null);const h=Ve();async function te(){try{if((await Swal.fire({title:"¿Estás seguro?",text:"¡Desea registrar el siguiente Modulo!?: "+e(r),icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sí, registrar!",customClass:{popup:"swal-popup",title:"custom-title"}})).isConfirmed){h("showLoader");const G=await fetch("https://proyectomascotas.onrender.com/create_modulo",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nombre:e(r),descripcion:e(i),ubicacion:e(c),estado:v,estilo:e(g)})}),z=await G.json();console.log(z),h("hideLoader"),G.ok?(Swal.fire({title:"¡Se ha registrado el Modulo llamado "+e(r)+" con exito!",icon:"success",customClass:{popup:"swal-popup",title:"custom-title"}}),setTimeout(()=>{location.reload()},3500)):alert("Error en el registro")}else console.log("Registro Cancelado")}catch(d){l(P,d.message),h("hideLoader"),alert("Error en la solicitud: "+e(P))}}Ae(async()=>{try{console.log("2");const d=await fetch("https://proyectomascotas.onrender.com/get_modulos");if(!d.ok)throw new Error("Error al cargar los datos");const G=await d.json();l(E,G.resultado),console.log(e(E)),setTimeout(()=>{globalThis.$("#myTable").DataTable()},0)}catch(d){l(P,d.message)}finally{l(O,!1)}});async function y(){document.getElementById("nav-listado").setAttribute("class","fade"),document.getElementById("MostrarModulos").removeAttribute("class"),location.reload()}var f=1;async function p(d,G){console.log("Editando el modulo "+G);const z=document.getElementById("nav-listado");z.removeAttribute("class"),console.log(z),f=d,console.log(Number.isInteger(f)),console.log(f);let R=document.getElementById("MostrarModulos");R.setAttribute("class","fade"),console.log(R);const w=R.parentElement;console.log(w),w.insertBefore(z,R),console.log("NO Entra al try de buscar");try{console.log("Entra al try de buscar");const Y=await fetch(`https://proyectomascotas.onrender.com/get_modulo/${f}`,{method:"GET",headers:{"Content-Type":"application/json"}}),Z=await Y.json();console.log(Y),console.log(Z),console.log("Buscando el Modulo seleccionado"),l(E,Z.nombre),console.log(e(E)),document.getElementById("nombre").value=Z.nombre,document.getElementById("descripcion").value=Z.descripcion,document.getElementById("ubicacion").value=Z.ubicacion,document.getElementById("estilo").value=Z.estilo,console.log("verificando el estado: "+Z.estado);const Q=Z.estado?"1":"0";document.getElementById("estado").value=Q;const re=document.getElementById("nombre");re.removeAttribute("readonly"),re.focus(),document.getElementById("descripcion").removeAttribute("readonly"),document.getElementById("ubicacion").removeAttribute("readonly"),document.getElementById("estilo").removeAttribute("readonly"),document.getElementById("estado").removeAttribute("readonly")}catch(Y){l(P,Y.message)}finally{l(O,!1)}}async function J(){console.log(f);let d=document.getElementById("nombre").value,G=document.getElementById("descripcion").value,z=document.getElementById("ubicacion").value,R=document.getElementById("estilo").value,w=document.getElementById("estado").value;console.log("ID DE ESTADO ENVIADO A LA BASE DE DATOS ES "+w);try{console.log("Entra al try de actualzar");const Y=await fetch(`https://proyectomascotas.onrender.com/update_modulo/${f}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({nombre:d,descripcion:G,ubicacion:z,estilo:R,estado:w})});console.log("Actualizado"),Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:Q=>{Q.onmouseenter=Swal.stopTimer,Q.onmouseleave=Swal.resumeTimer}}).fire({icon:"success",iconColor:"white",color:"white",background:"#00bdff",title:"Modulo actualizado exitosamente"}),setTimeout(()=>{const Q=document.getElementById("nav-listado");Q.setAttribute("class","fade");let re=document.getElementById("MostrarModulos");re.removeAttribute("class"),Q.parentElement.insertBefore(re,Q),location.reload()},3e3)}catch(Y){l(P,Y.message)}finally{l(O,!1)}}async function H(d){let G=0,z=d,R=G!==0;try{const w=await fetch(`https://proyectomascotas.onrender.com/update_estado_modulo/${z}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({estado:R})}),Y=await w.json();w.ok?(Swal.mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:Q=>{Q.onmouseenter=Swal.stopTimer,Q.onmouseleave=Swal.resumeTimer}}).fire({icon:"error",iconColor:"white",color:"white",background:"#ff4e4e",title:"El Modulo a sido desactivado de manera exitosa"}),setTimeout(()=>{location.reload()},3500)):alert("Error al desactivar: "+Y.message||"Error desconocido")}catch(w){alert("Error en la solicitud: "+w.message)}}async function X(d){let G=1,z=d,R=G===1;try{const w=await fetch(`https://proyectomascotas.onrender.com/update_estado_modulo/${z}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({estado:R})}),Y=await w.json();w.ok?(Swal.mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:Q=>{Q.onmouseenter=Swal.stopTimer,Q.onmouseleave=Swal.resumeTimer}}).fire({icon:"success",iconColor:"#000000",color:"black",background:"#76fa78",title:"El Modulo se ha activado de manera exitosa"}),setTimeout(()=>{location.reload()},3500)):alert("Error al Activar: "+Y.message||"Error desconocido")}catch(w){alert("Error en la solicitud: "+w.message)}}Ce();var j=za(),m=Pe(j),u=o(a(m),2),k=a(u);be(k);var N=o(k,2);be(N);var L=o(N,2);be(L);var x=o(L,2);be(x),Ie(2),t(u),t(m);var M=o(m,2),C=a(M),ae=o(a(C),2);{var V=d=>{var G=ja();S(d,G)},oe=(d,G)=>{{var z=w=>{var Y=Na(),Z=a(Y,!0);t(Y),ve(()=>ee(Z,e(P))),S(w,Y)},R=w=>{var Y=Ua(),Z=a(Y),Q=o(a(Z));xe(Q,5,()=>e(E),Ee,(re,ne)=>{var me=La(),ce=a(me),fe=a(ce,!0);t(ce);var ue=o(ce),ge=a(ue,!0);t(ue);var pe=o(ue),Te=a(pe),_e=a(Te,!0);t(Te),t(pe);var he=o(pe),we=a(he),Le=a(we),ke=o(Le,2);{var Be=je=>{var Me=Ma();W("click",Me,()=>H(e(ne).id)),S(je,Me)},Oe=je=>{var Me=Pa();W("click",Me,()=>X(e(ne).id)),S(je,Me)};le(ke,je=>{e(ne).estado?je(Be):je(Oe,!1)})}t(we),t(he),t(me),ve(()=>{ee(fe,e(ne).nombre),ee(ge,e(ne).descripcion),qe(Te,1,`badge ${e(ne).estado?"bg-success":"bg-danger"}`),ee(_e,e(ne).estado?"Activo":"Desactivado")}),W("click",Le,()=>p(e(ne).id,e(ne).nombre)),S(re,me)}),t(Q),t(Z),t(Y),S(w,Y)};le(d,w=>{e(P)?w(z):w(R,!1)},G)}};le(ae,d=>{e(O)?d(V):d(oe,!1)})}t(C),t(M);var _=o(M,2),D=o(a(_),2),q=a(D),F=o(a(q),2);t(q);var b=o(q,2),B=o(a(b),8),T=o(a(B),2),K=a(T),se=a(K);se.value=se.__value="1";var U=o(se);U.value=U.__value="0",t(K),t(T),t(B);var ie=o(B,2),de=o(a(ie),2),A=a(de);t(de),Ie(2),t(ie),t(b),t(D),t(_),ye(k,()=>e(r),d=>l(r,d)),ye(N,()=>e(i),d=>l(i,d)),ye(L,()=>e(c),d=>l(c,d)),ye(x,()=>e(g),d=>l(g,d)),W("submit",u,He(te)),W("click",F,()=>y()),W("click",A,J),S(n,j),Re()}var qa=I('<div class="admin-container svelte-frsr9g"><div class="admin-card svelte-frsr9g"><div class="card-header svelte-frsr9g"><h2>📊 Panel de Estadísticas</h2></div> <div class="card-body svelte-frsr9g"><div class="iframe-container svelte-frsr9g"><iframe title="SensuTrack - Estadísticas" src="https://app.powerbi.com/view?r=eyJrIjoiZWE4NDU5OWUtNDZiMi00M2RjLTk0NTUtZWUxZDkyMjMwZDQyIiwidCI6IjFlOWFhYmU4LTY3ZjgtNGYxYy1hMzI5LWE3NTRlOTI0OTlhZSIsImMiOjR9" frameborder="0" allowfullscreen="" class="svelte-frsr9g"></iframe></div></div></div></div>');function Ga(n){var s=qa();S(n,s)}var Ja=I('<div class="row justify-content-center text-center"><div class="col-12 mb-2">Cargando datos...</div> <div class="spinner-border text-primary" role="status"><span class="visually-hidden">Loading...</span></div></div>'),Ha=I('<div class="alert alert-danger text-center"> </div>'),Va=I('<button class="btn btn-sm btn-outline-danger"><i class="bi bi-lock"></i> <span class="d-none d-md-inline">Desactivar</span></button>'),Fa=I('<button class="btn btn-sm btn-outline-success"><i class="bi bi-unlock"></i> <span class="d-none d-md-inline">Activar</span></button>'),Ya=I('<tr><td> </td><td> </td><td> </td><td> </td><td> </td><td class="text-center"><span> </span></td><td class="text-center"><div class="d-flex flex-wrap gap-1 justify-content-center"><button class="btn btn-sm btn-outline-primary"><i class="bi bi-pencil"></i> <span class="d-none d-md-inline">Editar</span></button> <!></div></td></tr>'),Za=I('<div class="table-responsive"><table class="table table-hover table-bordered align-middle" id="myTable"><thead class="thead-light text-center"><tr><th>ID</th><th>Usuario</th><th>Latitud</th><th>Longitud</th><th>Lugar</th><th>Estado</th><th>Opcion</th></tr></thead><tbody></tbody></table></div>'),Wa=I('<div id="Mostrarusuario"><div class="container py-4"><h2 class="text-center mb-4 pb-2 border-bottom border-3 border-primary fw-bold"><i class="bi-clock-history me-2"></i>Historial de Ubicaciones</h2> <!></div></div>');function Xa(n,s){De(s,!1);let r=$([]),i=$(!0),c=$(null);Ae(async()=>{try{const h=await fetch("http://localhost:3000/historial");if(!h.ok)throw new Error("Error al cargar los datos");const te=await h.json();console.log(te),l(r,Array.isArray(te)?te:[te]),setTimeout(()=>{globalThis.$&&globalThis.$.fn.DataTable?globalThis.$("#myTable").DataTable():console.error("jQuery o DataTables no están cargados")},0)}catch(h){l(c,h.message)}finally{l(i,!1)}}),Ce();var g=Wa(),v=a(g),E=o(a(v),2);{var O=h=>{var te=Ja();S(h,te)},P=(h,te)=>{{var y=p=>{var J=Ha(),H=a(J,!0);t(J),ve(()=>ee(H,e(c))),S(p,J)},f=p=>{var J=Za(),H=a(J),X=o(a(H));xe(X,5,()=>e(r),Ee,(j,m)=>{var u=Ya(),k=a(u),N=a(k,!0);t(k);var L=o(k),x=a(L,!0);t(L);var M=o(L),C=a(M,!0);t(M);var ae=o(M),V=a(ae,!0);t(ae);var oe=o(ae),_=a(oe,!0);t(oe);var D=o(oe),q=a(D),F=a(q,!0);t(q),t(D);var b=o(D),B=a(b),T=a(B),K=o(T,2);{var se=ie=>{var de=Va();W("click",de,()=>desactivar(e(m).id)),S(ie,de)},U=ie=>{var de=Fa();W("click",de,()=>activar(e(m).id)),S(ie,de)};le(K,ie=>{e(m).estado?ie(se):ie(U,!1)})}t(B),t(b),t(u),ve(()=>{ee(N,e(m).id),ee(x,e(m).id_usuario),ee(C,e(m).latitud),ee(V,e(m).longitud),ee(_,e(m).lugar),qe(q,1,`badge ${e(m).estado?"bg-success":"bg-danger"}`),ee(F,e(m).estado?"Activo":"Desactivado")}),W("click",T,()=>editar(e(m).id,e(m).nombre)),S(j,u)}),t(X),t(H),t(J),S(p,J)};le(h,p=>{e(c)?p(y):p(f,!1)},te)}};le(E,h=>{e(i)?h(O):h(P,!1)})}t(v),t(g),S(n,g),Re()}var Ka=I('<option class="svelte-1r4v3de"> </option>'),Qa=I('<label class="checkbox-label svelte-1r4v3de"><input type="checkbox" name="modulo" class="svelte-1r4v3de"> </label>'),eo=I('<div class="wrapper svelte-1r4v3de"><div class="title small-title svelte-1r4v3de" style="color: dodgerblue;">REGISTRO DE MODULOSXROL</div> <form class="class-form svelte-1r4v3de"><span class="svelte-1r4v3de">Roles:</span> <select id="roles" class="form__input svelte-1r4v3de" required><option disabled selected class="svelte-1r4v3de">Selecciona un rol</option><!></select> <fieldset class="checkbox-group svelte-1r4v3de"><legend class="svelte-1r4v3de">Módulos:</legend> <span class="svelte-1r4v3de">Selecciona los Modulos que tendra el Rol seleccionado:</span> <div class="checkbox-container svelte-1r4v3de"></div></fieldset> <button class="flip-card__btn small-btn svelte-1r4v3de">Confirmar</button></form> <div class="loader-container svelte-1r4v3de"><div class="loader-text svelte-1r4v3de"><span class="svelte-1r4v3de">S</span> <span class="svelte-1r4v3de">e</span> <span class="svelte-1r4v3de">n</span> <span class="svelte-1r4v3de">s</span> <span class="svelte-1r4v3de">u</span> <span class="svelte-1r4v3de">T</span> <span class="svelte-1r4v3de">r</span> <span class="svelte-1r4v3de">a</span> <span class="svelte-1r4v3de">c</span> <span class="svelte-1r4v3de">k</span></div></div></div>');function to(n,s){De(s,!1);const r=[];let i="",c=!0,g=$([]),v=[],E=$({}),O=$({}),P=null,h=$();Ae(async()=>{const L=await(await fetch("https://proyectomascotas.onrender.com/get_modulos/")).json();l(E,L.resultado),console.log(e(E));const M=await(await fetch("https://proyectomascotas.onrender.com/get_roles/")).json();l(O,M.resultado),console.log(e(O))});function te(N){N&&(N.style.display="flex")}function y(N){N&&(N.style.display="none")}async function f(){console.log(e(g)),console.log(v),i=document.getElementById("roles").value;try{if((await Swal.fire({title:"¿Estás seguro?",text:"¡Desea registrar el siguiente ModuloxRol!?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sí, registrar!",customClass:{popup:"swal-popup",title:"custom-title"}})).isConfirmed){te(e(h));const L=await fetch("https://proyectomascotas.onrender.com/create_moduloXrol",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_modulo:e(g),id_rol:i,estado:c})}),x=await L.json();console.log(x),y(e(h)),L.ok?(Swal.fire({title:"¡Se ha registrado el ModuloxRol con exito ",icon:"success",customClass:{popup:"swal-popup",title:"custom-title"}}),setTimeout(()=>{location.reload()},3500)):alert("Error en el registro")}else console.log("Registro Cancelado")}catch(N){P=N.message,y(e(h)),alert("Error en la solicitud: "+P)}}Ce();var p=eo(),J=o(a(p),2),H=o(a(J),2),X=a(H);X.value=X.__value="";var j=o(X);xe(j,1,()=>e(O),Ee,(N,L)=>{var x=Ka(),M={},C=a(x,!0);t(x),ve(()=>{M!==(M=e(L).id)&&(x.value=(x.__value=e(L).id)??""),ee(C,e(L).nombre)}),S(N,x)}),t(H);var m=o(H,2),u=o(a(m),4);xe(u,5,()=>e(E),Ee,(N,L)=>{var x=Qa(),M=a(x);be(M);var C,ae=o(M);t(x),ve(()=>{ut(M,"id",`modulo-${e(L).id??""}`),C!==(C=e(L).id)&&(M.value=(M.__value=e(L).id)??""),ee(ae,` ${e(L).nombre??""}`)}),vt(r,[],M,()=>(e(L).id,e(g)),V=>l(g,V)),S(N,x)}),t(u),t(m),Ie(2),t(J);var k=o(J,2);mt(k,N=>l(h,N),()=>e(h)),t(p),W("submit",J,He(f)),S(n,p),Re()}var ao=I('<button class="overlay svelte-1ig2dkm" aria-label="Cerrar menú"></button>'),oo=I(`<div class="admin-welcome svelte-1ig2dkm"><h1 class="svelte-1ig2dkm">👋 ¡Bienvenido, Administrador!</h1> <p class="subtitle svelte-1ig2dkm">Este panel te permite tener el control total del sistema
                    para apoyar a las personas ciegas con eficiencia y
                    seguridad.</p></div>`),so=I('<div class="mobile-layout svelte-1ig2dkm"><header class="mobile-header svelte-1ig2dkm"><button class="menu-button svelte-1ig2dkm"><i class="bi bi-list svelte-1ig2dkm"></i></button> <h1 class="svelte-1ig2dkm">Admin</h1> <div class="header-spacer svelte-1ig2dkm"></div></header> <div><nav class="svelte-1ig2dkm"><button class="svelte-1ig2dkm"><i class="bi bi-person-add svelte-1ig2dkm"></i> <span class="svelte-1ig2dkm">Registrar Usuario</span></button> <button class="svelte-1ig2dkm"><i class="bi bi-file-earmark-spreadsheet svelte-1ig2dkm"></i> <span class="svelte-1ig2dkm">Reportes</span></button> <button class="svelte-1ig2dkm"><i class="bi bi-geo-alt svelte-1ig2dkm"></i> <span class="svelte-1ig2dkm">Registrar GPS</span></button> <button class="svelte-1ig2dkm"><i class="bi bi-table svelte-1ig2dkm"></i> <span class="svelte-1ig2dkm">Tabla Usuarios</span></button> <button class="svelte-1ig2dkm"><i class="bi bi-table svelte-1ig2dkm"></i> <span class="svelte-1ig2dkm">Tabla Discapacitados</span></button> <button class="svelte-1ig2dkm"><i class="bi bi-person-badge svelte-1ig2dkm"></i> <span class="svelte-1ig2dkm">Registrar Roles</span></button> <button class="svelte-1ig2dkm"><i class="bi bi-stack svelte-1ig2dkm"></i> <span class="svelte-1ig2dkm">Registrar Módulos</span></button> <button class="svelte-1ig2dkm"><i class="bi bi-shield-lock svelte-1ig2dkm"></i> <span class="svelte-1ig2dkm">Asignar Módulo</span></button> <button class="svelte-1ig2dkm"><i class="bi bi-graph-up svelte-1ig2dkm"></i> <span class="svelte-1ig2dkm">Tablero</span></button> <button class="svelte-1ig2dkm"><i class="bi bi-map svelte-1ig2dkm"></i> <span class="svelte-1ig2dkm">Ubicaciones</span></button> <button class="logout svelte-1ig2dkm"><i class="bi bi-power svelte-1ig2dkm"></i> <span class="svelte-1ig2dkm">Cerrar Sesión</span></button></nav></div> <!> <main class="mobile-content svelte-1ig2dkm"><!> <div class="loader-container svelte-1ig2dkm"><div class="loader-text svelte-1ig2dkm"><span class="svelte-1ig2dkm">S</span> <span class="svelte-1ig2dkm">e</span> <span class="svelte-1ig2dkm">n</span> <span class="svelte-1ig2dkm">s</span> <span class="svelte-1ig2dkm">u</span> <span class="svelte-1ig2dkm">T</span> <span class="svelte-1ig2dkm">r</span> <span class="svelte-1ig2dkm">a</span> <span class="svelte-1ig2dkm">c</span> <span class="svelte-1ig2dkm">k</span></div></div></main></div> <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet" class="svelte-1ig2dkm">',1);function bo(n){let s=$("X"),r=$(),i=$(!1);function c(){ot(r,e(r).style.display="flex")}function g(){ot(r,e(r).style.display="none")}function v(){l(i,!e(i))}function E(){localStorage.clear(),window.location.href="/"}function O(){l(s,"registro_usuario"),l(i,!1)}function P(){l(s,"reportes"),l(i,!1)}function h(){l(s,"registro_gps"),l(i,!1)}function te(){l(s,"tabla_usuarios"),l(i,!1)}function y(){l(s,"tabla_discapacitados"),l(i,!1)}function f(){l(s,"registro_roles"),l(i,!1)}function p(){l(s,"registro_modulos"),l(i,!1)}function J(){l(s,"modulos_por_rol"),l(i,!1)}function H(){l(s,"tablero"),l(i,!1)}function X(){l(s,"historial_ubicaciones"),l(i,!1)}var j=so(),m=Pe(j),u=a(m),k=a(u);Ie(4),t(u);var N=o(u,2),L=a(N),x=a(L),M=o(x,2),C=o(M,2),ae=o(C,2),V=o(ae,2),oe=o(V,2),_=o(oe,2),D=o(_,2),q=o(D,2),F=o(q,2),b=o(F,2);t(L),t(N);var B=o(N,2);{var T=A=>{var d=ao();W("click",d,v),S(A,d)};le(B,A=>{e(i)&&A(T)})}var K=o(B,2),se=a(K);{var U=A=>{var d=oo();S(A,d)},ie=(A,d)=>{{var G=R=>{Qt(R,{$$events:{showLoader:c,hideLoader:g}})},z=(R,w)=>{{var Y=Q=>{ra(Q,{})},Z=(Q,re)=>{{var ne=ce=>{na(ce,{$$events:{showLoader:c,hideLoader:g}})},me=(ce,fe)=>{{var ue=pe=>{fa(pe,{})},ge=(pe,Te)=>{{var _e=we=>{Ta(we,{})},he=(we,Le)=>{{var ke=Oe=>{Oa(Oe,{$$events:{showLoader:c,hideLoader:g}})},Be=(Oe,je)=>{{var Me=Ue=>{$a(Ue,{$$events:{showLoader:c,hideLoader:g}})},gt=(Ue,_t)=>{{var ht=ze=>{to(ze,{})},yt=(ze,wt)=>{{var Et=$e=>{Ga($e)},xt=($e,Tt)=>{{var kt=Fe=>{Xa(Fe,{})};le($e,Fe=>{e(s)==="historial_ubicaciones"&&Fe(kt)},Tt)}};le(ze,$e=>{e(s)==="tablero"?$e(Et):$e(xt,!1)},wt)}};le(Ue,ze=>{e(s)==="modulos_por_rol"?ze(ht):ze(yt,!1)},_t)}};le(Oe,Ue=>{e(s)==="registro_modulos"?Ue(Me):Ue(gt,!1)},je)}};le(we,Oe=>{e(s)==="registro_roles"?Oe(ke):Oe(Be,!1)},Le)}};le(pe,we=>{e(s)==="tabla_discapacitados"?we(_e):we(he,!1)},Te)}};le(ce,pe=>{e(s)==="tabla_usuarios"?pe(ue):pe(ge,!1)},fe)}};le(Q,ce=>{e(s)==="registro_gps"?ce(ne):ce(me,!1)},re)}};le(R,Q=>{e(s)==="reportes"?Q(Y):Q(Z,!1)},w)}};le(A,R=>{e(s)==="registro_usuario"?R(G):R(z,!1)},d)}};le(se,A=>{e(s)==="X"?A(U):A(ie,!1)})}var de=o(se,2);mt(de,A=>l(r,A),()=>e(r)),t(K),t(m),Ie(2),ve(()=>{ut(k,"aria-label",e(i)?"Cerrar menú":"Abrir menú"),qe(N,1,`mobile-sidebar ${e(i)?"open":""}`,"svelte-1ig2dkm")}),W("click",k,v),W("click",x,O),W("click",M,P),W("click",C,h),W("click",ae,te),W("click",V,y),W("click",oe,f),W("click",_,p),W("click",D,J),W("click",q,H),W("click",F,X),W("click",b,E),S(n,j)}export{bo as component};
