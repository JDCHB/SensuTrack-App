import{t as E,a as T}from"../chunks/DB2fUOgU.js";import{i as B}from"../chunks/DcovNT_f.js";import{k as j,l as t,m as N,n as a,o as n,t as l,v as m,w as u,x as R}from"../chunks/B_GF-YZf.js";import{e as q}from"../chunks/DvYAYf3U.js";import{b as S,r as y}from"../chunks/xyBB9N7I.js";import{b as J}from"../chunks/DbJ9r6hh.js";import{g as U}from"../chunks/Bs2bHCUs.js";var D=E('<div class="login-screen svelte-108db26"><div class="overlay svelte-108db26"></div> <div class="login-content svelte-108db26"><div class="logo svelte-108db26"><img src="/logo.jpg" alt="" class="svelte-108db26"></div> <form class="svelte-108db26"><div class="input-group svelte-108db26"><span class="icon svelte-108db26">ðŸ‘¤</span> <input type="text" id="correo" placeholder="Correo" required class="svelte-108db26"></div> <div class="input-group svelte-108db26"><span class="icon svelte-108db26">ðŸ”’</span> <input type="password" id="contraseÃ±a" placeholder="ContraseÃ±a" required class="svelte-108db26"></div> <button class="login-button svelte-108db26" type="submit">Iniciar SesiÃ³n</button> <div class="loader-container svelte-108db26"><div class="loader-text svelte-108db26"><span class="svelte-108db26">S</span> <span class="svelte-108db26">e</span> <span class="svelte-108db26">n</span> <span class="svelte-108db26">s</span> <span class="svelte-108db26">u</span> <span class="svelte-108db26">T</span> <span class="svelte-108db26">r</span> <span class="svelte-108db26">a</span> <span class="svelte-108db26">c</span> <span class="svelte-108db26">k</span></div></div></form> <div class="links svelte-108db26"><div class="link-item svelte-108db26"><a href="/" class="svelte-108db26">Olvidaste la contraseÃ±a?</a></div> <div class="link-item svelte-108db26"><a href="/" class="svelte-108db26">No tienes cuenta? RegÃ­strate!!</a></div></div></div></div>');function W(x,k){j(k,!1);let b=m(""),f=m(""),o=m();function I(e){e&&(e.style.display="flex")}function g(e){e&&(e.style.display="none")}async function C(){const e=document.getElementById("correo").value,O=document.getElementById("contraseÃ±a").value;try{I(t(o));const i=await fetch("https://proyectomascotas.onrender.com/login_generate_token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:O})}),p=await i.json();if(g(t(o)),i.ok){const{access_token:A,user_data:s}=p;if(localStorage.setItem("access_token",A),localStorage.setItem("user_data",JSON.stringify(s)),console.log(s),s.id_rol==3){let H=s,K=s.nombre;Swal.fire({title:"Inicio de SesiÃ³n Exitoso",text:"Â¡Bienvenido al Sistema de Super Administrador!",icon:"success",confirmButtonText:"OK"}).then(()=>{U("Super_Administrador")})}else s.id_rol==2?Swal.fire({icon:"warning",title:"Lo sentimos",text:"Ahora mismo no esta disponible este Rol (Usuario) à²¥_à²¥"}).then(()=>{localStorage.clear(),window.location.href="/"}):s.id_rol==1&&Swal.fire({icon:"warning",title:"Lo sentimos",text:"Ahora mismo no esta disponible este Rol (Administrador) à²¥_à²¥"}).then(()=>{localStorage.clear(),window.location.href="/"})}else i.status===403?Swal.fire({icon:"warning",title:"Cuenta Desactivada",text:p.detail||"Tu cuenta ha sido desactivada. Contacta al soporte."}):Swal.fire({icon:"error",title:"Oops...",text:p.detail||"Usuario o ContraseÃ±a Incorrectos!"})}catch(i){console.error("Error en la solicitud:",i.message),g(t(o)),Swal.fire({icon:"error",title:"Error",text:"Hubo un problema con el inicio de sesiÃ³n. Intenta nuevamente."})}}B();var r=D(),_=a(n(r),2),d=a(n(_),2),c=n(d),h=a(n(c),2);y(h),l(c);var v=a(c,2),w=a(n(v),2);y(w),l(v);var L=a(v,4);J(L,e=>u(o,e),()=>t(o)),l(d),R(2),l(_),l(r),S(h,()=>t(b),e=>u(b,e)),S(w,()=>t(f),e=>u(f,e)),q("submit",d,C),T(x,r),N()}export{W as component};
