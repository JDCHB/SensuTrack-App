import{t as P,a as z}from"../chunks/nQzwvEh3.js";import{i as L}from"../chunks/BnUuZUax.js";import{k as N,y as F,l as s,m as J,n as c,w as p,v as S,o as r,t as i,x as M}from"../chunks/BmWwM6au.js";import{e as R}from"../chunks/JbnazOOx.js";import{b as q,r as A}from"../chunks/BeOCEM56.js";import{b as G}from"../chunks/C1ormfhT.js";var H=P(`<div class="password-wrapper svelte-584nv5"><div class="password-container svelte-584nv5"><div class="password-card svelte-584nv5"><div class="password-header svelte-584nv5"><h2 class="password-title svelte-584nv5">Cambio de Contraseña</h2> <p class="password-subtitle svelte-584nv5">Por favor, ingrese su correo electrónico registrado en el
                    sistema</p></div> <div class="password-form svelte-584nv5"><div class="input-group svelte-584nv5"><label for="correo" class="vibrant-label svelte-584nv5">Correo Electrónico</label> <input type="email" class="vibrant-input svelte-584nv5" placeholder="ejemplo@correo.com" id="correo" required></div> <button class="vibrant-button svelte-584nv5"><i class="bi bi-send-fill svelte-584nv5"></i> ENVIAR CÓDIGO</button></div></div></div> <div class="loader-container svelte-584nv5"><div class="vibrant-loader svelte-584nv5"><span class="svelte-584nv5">S</span> <span class="svelte-584nv5">e</span> <span class="svelte-584nv5">n</span> <span class="svelte-584nv5">s</span> <span class="svelte-584nv5">u</span> <span class="svelte-584nv5">T</span> <span class="svelte-584nv5">r</span> <span class="svelte-584nv5">a</span> <span class="svelte-584nv5">c</span> <span class="svelte-584nv5">k</span></div></div></div> <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet" class="svelte-584nv5">`,1);function Z(T,j){N(j,!1);const x="service_j9bousa",B="template_zszjdla",E="dFD1OdFitzwQblEX0";let m="",t=S(""),n=0,o=S();function u(e){e&&(e.style.display="flex")}function f(e){e&&(e.style.display="none")}function I(){return n=(Math.random()+1).toString(36).substring(4),n}async function k(){p(t,document.getElementById("correo").value);try{u(s(o));const a=await(await fetch("https://proyectomascotas.onrender.com/Validar_Correo",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s(t)})})).json();console.log(a),f(s(o)),a.email?(I(n),emailjs.init(E),emailjs.send(x,B,{r:n,email:s(t)}).then(l=>{}).catch(l=>{}),h()):Swal.fire({position:"top",icon:"error",title:"Correo no encontrado"})}catch(e){console.log(e)}}async function O(){try{u(s(o));const a=await(await fetch("https://proyectomascotas.onrender.com/update_contraseña",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s(t),password:m})})).json();console.log("Respuesta del servidor:",a),f(s(o)),a.mensaje=="Contraseña actualizada exitosamente"?(Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:C=>{C.onmouseenter=Swal.stopTimer,C.onmouseleave=Swal.resumeTimer}}).fire({icon:"success",iconColor:"white",color:"white",background:"green",title:"Contraseñass cambiada exitosamente"}),setTimeout(()=>{window.location.href="/"},3500)):Swal.fire({title:"Error",text:"Hubo un problema al cambiar la contraseña.",icon:"error"})}catch(e){console.log(e)}}function h(){Swal.fire({title:"Validacion",html:`
                        <div class="card-header">Ingrese la clave enviada al correo<div/>
                        <input class="mt-2 form-control" id="ingaturrona"></input>
                    `,icon:"warning",showCancelButton:!0,allowOutsideClick:!1,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Validar"}).then(e=>{const a=document.getElementById("ingaturrona").value;e.isConfirmed?a==n?Swal.fire({title:"Cambio de clave",html:`
                                    <div class="card-header">Ingrese su nueva clave<div/>
                                    <input class="mt-2 form-control" id="clave_nueva_1"></input>
                                `,icon:"warning",allowOutsideClick:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Validar"}).then(l=>{m=document.getElementById("clave_nueva_1").value,l.isConfirmed&&O()}):Swal.fire({title:"Error",text:"El codigo es incorrecto... Por favor, intentalo de nuevo.",icon:"error"}).then(()=>{h()}):e.isDismissed})}L();var b=H(),w=F(b),v=r(w),g=r(v),y=c(r(g),2),d=r(y),_=c(r(d),2);A(_),i(d);var V=c(d,2);i(y),i(g),i(v);var D=c(v,2);G(D,e=>p(o,e),()=>s(o)),i(w),M(2),q(_,()=>s(t),e=>p(t,e)),R("click",V,k),z(T,b),J()}export{Z as component};
