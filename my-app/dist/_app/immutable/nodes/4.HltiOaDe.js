import{t as C,a as A}from"../chunks/DAy9PkhU.js";import{i as De}from"../chunks/CHjcBrZ9.js";import{h as Me,a as Ct,b as It,m as e,ai as jt,c as Dt,r as lt,s as et,d as tt,g as Ve,D as Rt,e as vt,f as ut,p as Ot,J as mt,a4 as Nt,v as O,aw as rt,ax as at,N as it,ay as ot,az as nt,aA as Mt,I as Lt,aB as Pt,a6 as Ut,aC as st,aD as zt,B as qt,A as Gt,L as $t,aE as pt,q as Jt,aF as Ht,i as bt,W as Ft,k as Re,t as l,o,w as a,a7 as ue,aG as ft,x as t,y as Be,n as Oe,l as qe,aH as gt,aI as _t,aJ as ct}from"../chunks/V2kXoyKe.js";import{l as Vt,e as J}from"../chunks/Nn6L6OkE.js";import{i as oe}from"../chunks/CbxTL9fb.js";import{r as ye,b as ke,s as Ze,a as ht}from"../chunks/BBr6DWM0.js";import{b as yt}from"../chunks/DBCRKDJt.js";import{g as Wt}from"../chunks/D7j5owh8.js";import{s as X}from"../chunks/C7oaldJ4.js";import{o as Le,c as Xe}from"../chunks/C4enMjbG.js";function Ae(c,d){return d}function Yt(c,d,s,v){for(var i=[],b=d.length,w=0;w<b;w++)Mt(d[w].e,i,!0);var p=b>0&&i.length===0&&s!==null;if(p){var L=s.parentNode;Lt(L),L.append(s),v.clear(),ze(c,d[0].prev,d[b-1].next)}Pt(i,()=>{for(var U=0;U<b;U++){var E=d[U];p||(v.delete(E.k),ze(c,E.prev,E.next)),Ut(E.e,!p)}})}function Ce(c,d,s,v,i,b=null){var w=c,p={flags:d,items:new Map,first:null},L=(d&pt)!==0;if(L){var U=c;w=Me?et(Gt(U)):U.appendChild($t())}Me&&Ct();var E=null,ee=!1,k=jt(()=>{var g=s();return Nt(g)?g:g==null?[]:mt(g)});It(()=>{var g=e(k),_=g.length;if(ee&&_===0)return;ee=_===0;let Y=!1;if(Me){var H=w.data===Dt;H!==(_===0)&&(w=lt(),et(w),tt(!1),Y=!0)}if(Me){for(var F=null,Z,B=0;B<_;B++){if(Ve.nodeType===8&&Ve.data===Rt){w=Ve,Y=!0,tt(!1);break}var m=g[B],y=v(m,B);Z=wt(Ve,p,F,null,m,y,B,i,d,s),p.items.set(y,Z),F=Z}_>0&&et(lt())}Me||Zt(g,p,w,i,d,v,s),b!==null&&(_===0?E?vt(E):E=ut(()=>b(w)):E!==null&&Ot(E,()=>{E=null})),Y&&tt(!0),e(k)}),Me&&(w=Ve)}function Zt(c,d,s,v,i,b,w){var ie,le,re,ne;var p=(i&Ht)!==0,L=(i&(st|ot))!==0,U=c.length,E=d.items,ee=d.first,k=ee,g,_=null,Y,H=[],F=[],Z,B,m,y;if(p)for(y=0;y<U;y+=1)Z=c[y],B=b(Z,y),m=E.get(B),m!==void 0&&((ie=m.a)==null||ie.measure(),(Y??(Y=new Set)).add(m));for(y=0;y<U;y+=1){if(Z=c[y],B=b(Z,y),m=E.get(B),m===void 0){var z=k?k.e.nodes_start:s;_=wt(z,d,_,_===null?d.first:_.next,Z,B,y,v,i,w),E.set(B,_),H=[],F=[],k=_.next;continue}if(L&&Xt(m,Z,y,i),(m.e.f&at)!==0&&(vt(m.e),p&&((le=m.a)==null||le.unfix(),(Y??(Y=new Set)).delete(m))),m!==k){if(g!==void 0&&g.has(m)){if(H.length<F.length){var P=F[0],T;_=P.prev;var q=H[0],R=H[H.length-1];for(T=0;T<H.length;T+=1)dt(H[T],P,s);for(T=0;T<F.length;T+=1)g.delete(F[T]);ze(d,q.prev,R.next),ze(d,_,q),ze(d,R,P),k=P,_=R,y-=1,H=[],F=[]}else g.delete(m),dt(m,k,s),ze(d,m.prev,m.next),ze(d,m,_===null?d.first:_.next),ze(d,_,m),_=m;continue}for(H=[],F=[];k!==null&&k.k!==B;)(k.e.f&at)===0&&(g??(g=new Set)).add(k),F.push(k),k=k.next;if(k===null)continue;m=k}H.push(m),_=m,k=m.next}if(k!==null||g!==void 0){for(var te=g===void 0?[]:mt(g);k!==null;)(k.e.f&at)===0&&te.push(k),k=k.next;var V=te.length;if(V>0){var ae=(i&pt)!==0&&U===0?s:null;if(p){for(y=0;y<V;y+=1)(re=te[y].a)==null||re.measure();for(y=0;y<V;y+=1)(ne=te[y].a)==null||ne.fix()}Yt(d,te,ae,E)}}p&&Jt(()=>{var de;if(Y!==void 0)for(m of Y)(de=m.a)==null||de.apply()}),it.first=d.first&&d.first.e,it.last=_&&_.e}function Xt(c,d,s,v){(v&st)!==0&&nt(c.v,d),(v&ot)!==0?nt(c.i,s):c.i=s}function wt(c,d,s,v,i,b,w,p,L,U){var E=(L&st)!==0,ee=(L&zt)===0,k=E?ee?O(i):rt(i):i,g=(L&ot)===0?w:rt(w),_={i:g,v:k,k:b,a:null,e:null,prev:s,next:v};try{return _.e=ut(()=>p(c,k,g,U),Me),_.e.prev=s&&s.e,_.e.next=v&&v.e,s===null?d.first=_:(s.next=_,s.e.next=_.e),v!==null&&(v.prev=_,v.e.prev=_.e),_}finally{}}function dt(c,d,s){for(var v=c.next?c.next.e.nodes_start:s,i=d?d.e.nodes_start:s,b=c.e.nodes_start;b!==v;){var w=qt(b);i.before(b),b=w}}function ze(c,d,s){d===null?c.first=s:(d.next=s,d.e.next=s&&s.e),s!==null&&(s.prev=d,s.e.prev=d&&d.e)}function Qt(c,d,s){var v=c==null?"":""+c;return d&&(v=v?v+" "+d:d),v===""?null:v}function Je(c,d,s,v,i,b){var w=c.__className;if(Me||w!==s||w===void 0){var p=Qt(s,v);(!Me||p!==c.getAttribute("class"))&&(p==null?c.removeAttribute("class"):c.className=p),c.__className=s}return b}function Et(c,d,s){if(c.multiple)return ea(c,d);for(var v of c.options){var i=We(v);if(Ft(i,d)){v.selected=!0;return}}(!s||d!==void 0)&&(c.selectedIndex=-1)}function Kt(c,d){bt(()=>{var s=new MutationObserver(()=>{var v=c.__value;Et(c,v)});return s.observe(c,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{s.disconnect()}})}function Tt(c,d,s=d){var v=!0;Vt(c,"change",i=>{var b=i?"[selected]":":checked",w;if(c.multiple)w=[].map.call(c.querySelectorAll(b),We);else{var p=c.querySelector(b)??c.querySelector("option:not([disabled])");w=p&&We(p)}s(w)}),bt(()=>{var i=d();if(Et(c,i,v),v&&i===void 0){var b=c.querySelector(":checked");b!==null&&(i=We(b),s(i))}c.__value=i,v=!1}),Kt(c)}function ea(c,d){for(var s of c.options)s.selected=~d.indexOf(We(s))}function We(c){return"__value"in c?c.__value:c.value}function Ye(c){return function(...d){var s=d[0];return s.preventDefault(),c==null?void 0:c.apply(this,d)}}var ta=C("<option> </option>"),aa=C('<div class="form-wrapper svelte-3crwtj"><div class="form-title svelte-3crwtj">REGISTRO DE USUARIOS</div> <form class="vibrant-form svelte-3crwtj"><input class="vibrant-input svelte-3crwtj" placeholder="Nombre" type="text" autocomplete="off" required> <input class="vibrant-input svelte-3crwtj" placeholder="Apellido" type="text" autocomplete="off" required> <input class="vibrant-input svelte-3crwtj" placeholder="Documento" type="text" autocomplete="off" required> <input class="vibrant-input svelte-3crwtj" placeholder="Teléfono" type="text" autocomplete="off" required> <input class="vibrant-input svelte-3crwtj" placeholder="Correo Electrónico" type="email" autocomplete="off" required> <input class="vibrant-input svelte-3crwtj" placeholder="Contraseña" type="password" autocomplete="off" required> <input class="vibrant-input svelte-3crwtj" id="Confirmar_Contraseña" placeholder="Confirmar Contraseña" type="password" autocomplete="off" required> <select id="roles" class="vibrant-select svelte-3crwtj"><option disabled selected>Seleccione el Rol:</option><!></select> <button class="vibrant-button svelte-3crwtj">REGISTRAR USUARIO</button></form></div>');function oa(c,d){Re(d,!1);let s=O(""),v=O(""),i=O(""),b="",w=O(""),p=O(""),L=O(""),U=O(""),E=O([]),ee=!0,k=null;Le(async()=>{const te=await(await fetch("https://proyectomascotas.onrender.com/get_roles/")).json();l(E,te.resultado),console.log(e(E))});const g=Xe();async function _(){if(b=document.getElementById("Confirmar_Contraseña").value,b===e(i))try{const R=await Swal.fire({title:"¿Estás seguro?",text:"¡Desea registrar un nuevo Usuario a SensuTrack!?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sí, registrar!",customClass:{popup:"swal-popup",title:"custom-title"}}),te=parseInt(e(U),10);if(isNaN(te)){alert("Por favor, seleccione un rol válido."),g("hideLoader");return}if(R.isConfirmed){g("showLoader");const ae=await(await fetch("https://proyectomascotas.onrender.com/create_user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e(L),password:e(i),nombre:e(s),apellido:e(v),documento:e(w),telefono:e(p),id_rol:e(U),estado:ee})})).json();console.log("Respuesta del servidor:",ae),g("hideLoader"),ae.resultado==="Usuario creado"?Swal.fire({title:"¡Registrado!,¡Bienvenid@ "+e(s)+"!",icon:"success",customClass:{popup:"swal-popup",title:"custom-title"}}):ae.resultado==="El usuario ya existe"&&Swal.fire({icon:"error",title:"Error",text:"Lo sentimos, el usuario ya existe."})}else Swal.fire({title:"REGISTRO CANCELADO",icon:"error",customClass:{popup:"swal-popup",title:"custom-title"}})}catch(R){k=R.message,g("hideLoader"),alert("Error en la solicitud: "+k)}else Swal.fire({title:"Parece que ha ocurrido un error",text:"No son iguales las contraseñas, porfavor intente de nuevo :]",icon:"error",customClass:{popup:"swal-popup",title:"custom-title"}})}De();var Y=aa(),H=o(a(Y),2),F=a(H);ye(F);var Z=o(F,2);ye(Z);var B=o(Z,2);ye(B);var m=o(B,2);ye(m);var y=o(m,2);ye(y);var z=o(y,2);ye(z);var P=o(z,4);ue(()=>{e(U),ft(()=>{e(E)})});var T=a(P);T.value=T.__value="";var q=o(T);Ce(q,1,()=>e(E),Ae,(R,te)=>{var V=ta(),ae={},ie=a(V,!0);t(V),ue(()=>{ae!==(ae=e(te).id)&&(V.value=(V.__value=e(te).id)??""),X(ie,e(te).nombre)}),A(R,V)}),t(P),Be(2),t(H),t(Y),ke(F,()=>e(s),R=>l(s,R)),ke(Z,()=>e(v),R=>l(v,R)),ke(B,()=>e(w),R=>l(w,R)),ke(m,()=>e(p),R=>l(p,R)),ke(y,()=>e(L),R=>l(L,R)),ke(z,()=>e(i),R=>l(i,R)),Tt(P,()=>e(U),R=>l(U,R)),J("submit",H,Ye(_)),A(c,Y),Oe()}var sa=C('<div class="vibrant-loader svelte-1cmc1uo"><div class="loader-bar svelte-1cmc1uo"></div></div>'),la=C('<p class="error-message svelte-1cmc1uo"> </p>'),ra=C('<tr class="svelte-1cmc1uo"><td class="svelte-1cmc1uo"> </td><td class="svelte-1cmc1uo"> </td><td class="svelte-1cmc1uo"> </td><td class="svelte-1cmc1uo"> </td><td class="svelte-1cmc1uo"> </td><td class="svelte-1cmc1uo"> </td><td class="svelte-1cmc1uo"><span> </span></td></tr>'),ia=C('<h3 class="results-title svelte-1cmc1uo">Discapacitados Registrados</h3> <div class="table-container svelte-1cmc1uo"><table class="vibrant-table svelte-1cmc1uo"><thead class="svelte-1cmc1uo"><tr class="svelte-1cmc1uo"><th class="svelte-1cmc1uo">Id</th><th class="svelte-1cmc1uo">Nombre</th><th class="svelte-1cmc1uo">Género</th><th class="svelte-1cmc1uo">Tipo de Ceguera</th><th class="svelte-1cmc1uo">Cuidador</th><th class="svelte-1cmc1uo">Fecha y Hora</th><th class="svelte-1cmc1uo">Estado</th></tr></thead><tbody class="svelte-1cmc1uo"></tbody></table></div> <div class="export-action svelte-1cmc1uo"><button class="export-button svelte-1cmc1uo"><i class="bi bi-download svelte-1cmc1uo"></i> Exportar como PDF</button></div>',1),na=C('<div class="report-container svelte-1cmc1uo"><h2 class="report-title svelte-1cmc1uo">Reportes</h2> <div class="report-section svelte-1cmc1uo"><select class="vibrant-select svelte-1cmc1uo" id="opcion" required><option class="svelte-1cmc1uo">Discapacitados</option><option class="svelte-1cmc1uo">Usuarios</option><option class="svelte-1cmc1uo">Otro</option></select></div> <div class="date-range svelte-1cmc1uo"><div class="date-input svelte-1cmc1uo"><label for="desde_ciegos" class="vibrant-label svelte-1cmc1uo">Desde:</label> <input type="date" id="desde_ciegos" class="vibrant-date svelte-1cmc1uo"></div> <div class="date-input svelte-1cmc1uo"><label for="hasta_ciegos" class="vibrant-label svelte-1cmc1uo">Hasta:</label> <input type="date" id="hasta_ciegos" class="vibrant-date svelte-1cmc1uo"></div></div> <div class="report-action svelte-1cmc1uo"><button class="vibrant-button svelte-1cmc1uo"><i class="bi bi-file-earmark-text svelte-1cmc1uo"></i> Generar Reporte</button></div></div> <div class="report-results svelte-1cmc1uo" id="MostrarReporte"><!></div> <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet" class="svelte-1cmc1uo">',1);function ca(c,d){Re(d,!1);let s=O([]),v=O(!1),i=O(null),b,w="",p="",L=O(!1);async function U(){try{if(l(v,!0),l(L,!1),l(i,null),b=document.getElementById("opcion").value,w=document.getElementById("desde_ciegos").value,p=document.getElementById("hasta_ciegos").value,console.log({fecha1:w,fecha2:p}),!w||!p){Swal.fire({icon:"error",title:"Error",text:"Por favor, selecciona ambas fechas."});return}const T=await fetch("https://proyectomascotas.onrender.com/Ciegos_Report",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fecha1:w,fecha2:p})});if(!T.ok)throw new Error("Error al cargar los datos");const q=await T.json();console.log(q),l(s,q.resultado),l(L,!0),setTimeout(()=>globalThis.$("#myTable").DataTable(),0)}catch(T){l(i,T.message),console.error("Error al generar reporte:",T)}finally{l(v,!1)}}function E(){const{jsPDF:T}=window.jspdf,q=new T,R=["Id","Nombre","Género","Tipo de Ceguera","Cuidador","Fecha","Estado"],te=e(s).map(V=>[V.id,V.nombre,V.genero,V.tipo_ceguera,V.nombre_cuidador,V.fecha,V.estado]);q.text(20,20,"Reporte de discapacitados visuales registrados en la página"),q.autoTable(R,te,{startY:30}),q.save("ReporteDiscapacitados.pdf"),Swal.fire({position:"center",icon:"success",title:"Se exportó de manera exitosa",showConfirmButton:!1,timer:1500})}De();var ee=na(),k=qe(ee),g=o(a(k),2),_=a(g),Y=a(_);Y.value=Y.__value="1";var H=o(Y);H.value=H.__value="2";var F=o(H);F.value=F.__value="3",t(_),t(g);var Z=o(g,4),B=a(Z);t(Z),t(k);var m=o(k,2),y=a(m);{var z=T=>{var q=sa();A(T,q)},P=(T,q)=>{{var R=V=>{var ae=la(),ie=a(ae);t(ae),ue(()=>X(ie,`Error: ${e(i)??""}`)),A(V,ae)},te=(V,ae)=>{{var ie=le=>{var re=ia(),ne=o(qe(re),2),de=a(ne),u=o(a(de));Ce(u,5,()=>e(s),Ae,(D,f)=>{var I=ra(),n=a(I),x=a(n,!0);t(n);var r=o(n),S=a(r,!0);t(r);var M=o(r),G=a(M,!0);t(M);var h=o(M),j=a(h,!0);t(h);var K=o(h),Q=a(K,!0);t(K);var se=o(K),W=a(se,!0);t(se);var me=o(se),ce=a(me),pe=a(ce,!0);t(ce),t(me),t(I),ue(()=>{X(x,e(f).id),X(S,e(f).nombre),X(G,e(f).genero),X(j,e(f).tipo_ceguera),X(Q,e(f).nombre_cuidador),X(W,e(f).fecha),Je(ce,1,`status-${e(f).estado?"active":"inactive"}`,"svelte-1cmc1uo"),X(pe,e(f).estado?"Activo":"Inactivo")}),A(D,I)}),t(u),t(de),t(ne);var N=o(ne,2),$=a(N);t(N),J("click",$,E),A(le,re)};oe(V,le=>{e(L)&&le(ie)},ae)}};oe(T,V=>{e(i)?V(R):V(te,!1)},q)}};oe(y,T=>{e(v)?T(z):T(P,!1)})}t(m),Be(2),J("click",B,U),A(c,ee),Oe()}var da=C('<option class="svelte-tkblz5"> </option>'),va=C('<div class="gps-container svelte-tkblz5"><h2 class="gps-title svelte-tkblz5">REGISTRAR GPS</h2> <form class="vibrant-form svelte-tkblz5"><div class="input-group svelte-tkblz5"><p class="input-description svelte-tkblz5">Registre el Número de Serie del GPS:</p> <input id="numero_serie" type="text" class="vibrant-input svelte-tkblz5" placeholder="Ingrese el Serial del GPS" required></div> <div class="input-group svelte-tkblz5"><p class="input-description svelte-tkblz5">Usuarios Discapacitados Registrados:</p> <select id="ciegos" class="vibrant-select svelte-tkblz5" required><option disabled selected class="svelte-tkblz5">Selecciona el Discapacitado que tendrá el GPS</option><!></select></div> <button class="vibrant-button svelte-tkblz5"><i class="bi bi-check-circle-fill svelte-tkblz5"></i> CONFIRMAR REGISTRO</button></form></div> <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet" class="svelte-tkblz5">',1);function ua(c,d){Re(d,!1);let s=O(""),v=100,i=O(""),b=!0,w=null,p=null,L=O({});Le(async()=>{const y=await(await fetch("https://proyectomascotas.onrender.com/get_discapacitadosV_SIN_GPS/")).json();l(L,y.resultado),console.log(e(L))});const U=Xe();async function E(){try{U("showLoader");const m=await fetch("https://proyectomascotas.onrender.com/create_gps",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({numero_serie:e(s),nivel_bateria:v,id_ciego_vinculado:parseInt(e(i)),estado:b})}),y=await m.json();if(console.log(y),U("hideLoader"),m.ok)w=y.resultado,p=null,l(s,""),l(i,""),Swal.fire({title:"El GPS ha sido Registrado Exitosamente!",icon:"success",confirmButtonText:"OK"});else throw swalWithBootstrapButtons.fire({title:"Parece que ha ocurrido un error",text:"Revise que todo este correcto porfavor :]",icon:"error"}),new Error(y.detail||"Ocurrió un error")}catch(m){p=m.message,U("hideLoader"),w=null}}De();var ee=va(),k=qe(ee),g=o(a(k),2),_=a(g),Y=o(a(_),2);ye(Y),t(_);var H=o(_,2),F=o(a(H),2);ue(()=>{e(i),ft(()=>{e(L)})});var Z=a(F);Z.value=Z.__value="";var B=o(Z);Ce(B,1,()=>e(L),Ae,(m,y)=>{var z=da(),P={},T=a(z,!0);t(z),ue(()=>{P!==(P=e(y).id)&&(z.value=(z.__value=e(y).id)??""),X(T,e(y).nombre)}),A(m,z)}),t(F),t(H),Be(2),t(g),t(k),Be(2),ke(Y,()=>e(s),m=>l(s,m)),Tt(F,()=>e(i),m=>l(i,m)),J("submit",g,Ye(E)),A(c,ee),Oe()}var ma=C('<div class="mobile-loading svelte-1chucrw"><div class="spinner-border text-primary" role="status"><span class="visually-hidden">Loading...</span></div> <div>Cargando datos...</div></div>'),pa=C('<div class="alert alert-danger text-center"> </div>'),ba=C('<div class="no-results-message svelte-1chucrw"><i class="bi bi-exclamation-circle svelte-1chucrw"></i> No se encontraron resultados</div>'),fa=C('<button class="mobile-btn deactivate svelte-1chucrw"><i class="bi bi-lock"></i> <span>Desactivar</span></button>'),ga=C('<button class="mobile-btn activate svelte-1chucrw"><i class="bi bi-unlock"></i> <span>Activar</span></button>'),_a=C('<tr class="svelte-1chucrw"><td data-label="Usuario" class="svelte-1chucrw"> </td><td data-label="Nombre" class="svelte-1chucrw"> </td><td data-label="Apellido" class="svelte-1chucrw"> </td><td data-label="Documento" class="svelte-1chucrw"> </td><td data-label="Teléfono" class="svelte-1chucrw"> </td><td data-label="Estado" class="text-center svelte-1chucrw"><span> </span></td><td data-label="Acciones" class="text-center svelte-1chucrw"><div class="mobile-actions svelte-1chucrw"><button class="mobile-btn edit svelte-1chucrw"><i class="bi bi-pencil"></i> <span>Editar</span></button> <!></div></td></tr>'),ha=C('<div class="mobile-table-responsive svelte-1chucrw"><table class="mobile-table svelte-1chucrw" id="myTable"><thead class="svelte-1chucrw"><tr class="svelte-1chucrw"><th>Usuario</th><th>Nombre</th><th>Apellido</th><th>Documento</th><th>Teléfono</th><th>Estado</th><th>Acciones</th></tr></thead><tbody></tbody></table></div>'),ya=C(`<div id="Mostrarusuario"><div class="mobile-users-container svelte-1chucrw"><h2 class="mobile-users-title svelte-1chucrw"><i class="bi bi-people-fill me-2"></i>USUARIOS</h2> <div class="mobile-search-container svelte-1chucrw"><i class="bi bi-search svelte-1chucrw"></i> <input type="text" class="mobile-search-input svelte-1chucrw" placeholder="Buscar por nombre, correo o documento..."></div> <!></div></div> <div class="mobile-modal fade svelte-1chucrw" id="nav-listado" role="tabpanel" aria-labelledby="nav-listado-tab"><div class="container text-center"><p class="text-warning"></p></div> <div class="mobile-modal-card svelte-1chucrw"><div class="mobile-modal-header svelte-1chucrw"><h5><b>Editando Usuario</b></h5> <button class="mobile-close-btn svelte-1chucrw" aria-label="Cerrar edición de usuario"><i class="bi bi-x-lg"></i></button></div> <div class="mobile-modal-body svelte-1chucrw"><div class="mobile-form-group svelte-1chucrw"><label for="nombres" class="svelte-1chucrw"><b>Nombre:</b></label> <input type="text" id="nombres" placeholder="Nombres" maxlength="100" readonly="" class="svelte-1chucrw"></div> <div class="mobile-form-group svelte-1chucrw"><label for="apellidos" class="svelte-1chucrw"><b>Apellido:</b></label> <input type="text" id="apellidos" placeholder="Apellidos" readonly="" class="svelte-1chucrw"></div> <div class="mobile-form-group svelte-1chucrw"><label for="documento" class="svelte-1chucrw"><b>Documento:</b></label> <input type="text" id="documento" placeholder="Documento de identidad" readonly="" class="svelte-1chucrw"></div> <div class="mobile-form-group svelte-1chucrw"><label for="telefono" class="svelte-1chucrw"><b>Teléfono:</b></label> <input type="text" id="telefono" placeholder="Teléfono" maxlength="20" readonly="" class="svelte-1chucrw"></div> <div class="mobile-form-group svelte-1chucrw"><label for="correo" class="svelte-1chucrw"><b>Correo:</b></label> <input type="text" id="correo" placeholder="Correo electrónico" readonly="" class="svelte-1chucrw"></div> <div class="mobile-form-group svelte-1chucrw"><label for="estado" class="svelte-1chucrw"><b>Estado:</b></label> <select id="estado" class="svelte-1chucrw"><option>Activar</option><option>Desactivar</option></select></div> <div class="mobile-modal-footer svelte-1chucrw"><p>¡Al terminar de editar, haga clic en actualizar para guardar
                    los cambios!</p> <button class="mobile-update-btn svelte-1chucrw"><b>Actualizar</b></button></div></div></div></div> <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">`,1);function wa(c,d){Re(d,!1);let s=O({}),v=O(!0),i=O(null),b=O(!1);Le(async()=>{try{console.log("2");const u=await fetch("https://proyectomascotas.onrender.com/get_users");if(!u.ok)throw new Error("Error al cargar los datos");const N=await u.json();l(s,N.resultado),console.log(e(s)),setTimeout(()=>{globalThis.$("#myTable").DataTable()},0)}catch(u){l(i,u.message)}finally{l(v,!1)}});async function w(){l(b,!1),document.getElementById("nav-listado").setAttribute("class","fade"),document.getElementById("Mostrarusuario").removeAttribute("class"),location.reload()}var p=1;async function L(u,N){l(b,!0),console.log("Editando a "+N);const $=document.getElementById("nav-listado");$.removeAttribute("class"),console.log($),p=u,console.log(Number.isInteger(p)),console.log(p);let D=document.getElementById("Mostrarusuario");D.setAttribute("class","fade"),console.log(D);const f=D.parentElement;console.log(f),f.insertBefore($,D),console.log("NO Entra al try de buscar");try{console.log("Entra al try de buscar");const I=await fetch(`https://proyectomascotas.onrender.com/get_user/${p}`,{method:"GET",headers:{"Content-Type":"application/json"}}),n=await I.json();console.log(I),console.log(n),console.log("Buscando al usuario seleccionado"),l(s,n.apellido),console.log(e(s)),document.getElementById("nombres").value=n.nombre,document.getElementById("apellidos").value=n.apellido,document.getElementById("documento").value=n.documento,document.getElementById("telefono").value=n.telefono,document.getElementById("correo").value=n.email,console.log("verificando el estado: "+n.estado);const x=n.estado?"1":"0";document.getElementById("estado").value=x;const r=document.getElementById("nombres");r.removeAttribute("readonly"),r.focus(),document.getElementById("apellidos").removeAttribute("readonly"),document.getElementById("documento").removeAttribute("readonly"),document.getElementById("telefono").removeAttribute("readonly"),document.getElementById("correo").removeAttribute("readonly"),document.getElementById("estado").removeAttribute("readonly")}catch(I){l(i,I.message)}finally{l(v,!1)}}async function U(){console.log(p);let u=document.getElementById("nombres").value,N=document.getElementById("apellidos").value,$=document.getElementById("documento").value,D=document.getElementById("telefono").value,f=document.getElementById("correo").value,I=document.getElementById("estado").value;I=I==="1",console.log("ID DE ESTADO ENVIADO A LA BASE DE DATOS ES "+I);try{console.log("Entra al try de actualzar");const n=await fetch(`https://proyectomascotas.onrender.com/update_user_admin/${p}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:f,nombre:u,apellido:N,documento:$,telefono:D,estado:I})});console.log("Actualizado"),Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:r=>{r.onmouseenter=Swal.stopTimer,r.onmouseleave=Swal.resumeTimer}}).fire({icon:"success",iconColor:"white",color:"white",background:"#00bdff",title:"usuario actualizado con exito"}),setTimeout(()=>{const r=document.getElementById("nav-listado");r.setAttribute("class","fade");let S=document.getElementById("Mostrarusuario");S.removeAttribute("class"),r.parentElement.insertBefore(S,r),location.reload()},3e3)}catch(n){console.error("Error al actualizar el usuario:",n),Swal.fire({icon:"error",title:"Error",text:n.message})}finally{l(v,!1)}}async function E(u){let N=0,$=u,D=N!==0;try{const f=await fetch(`https://proyectomascotas.onrender.com/update_estado_user/${$}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({estado:D})}),I=await f.json();f.ok?(Swal.mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:x=>{x.onmouseenter=Swal.stopTimer,x.onmouseleave=Swal.resumeTimer}}).fire({icon:"error",iconColor:"white",color:"white",background:"#ff4e4e",title:"El Usuario a sido desactivado de manera exitosa"}),setTimeout(()=>{location.reload()},3500)):alert("Error al desactivar: "+I.message||"Error desconocido")}catch(f){alert("Error en la solicitud: "+f.message)}}async function ee(u){let N=1,$=u,D=N===1;try{const f=await fetch(`https://proyectomascotas.onrender.com/update_estado_user/${$}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({estado:D})}),I=await f.json();f.ok?(Swal.mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:x=>{x.onmouseenter=Swal.stopTimer,x.onmouseleave=Swal.resumeTimer}}).fire({icon:"success",iconColor:"#000000",color:"black",background:"#76fa78",title:"El usuario se ha activado de manera exitosa"}),setTimeout(()=>{location.reload()},3500)):alert("Error al Activar: "+I.message||"Error desconocido")}catch(f){alert("Error en la solicitud: "+f.message)}}let k=O([]),g=O("");function _(u,N){if(!N)return u;const $=N.toLowerCase();return u.filter(D=>D.nombre.toLowerCase().includes($)||D.email.toLowerCase().includes($)||D.documento.toLowerCase().includes($)||D.apellido.toLowerCase().includes($))}function Y(u){l(g,u)}gt(()=>(e(s),e(g)),()=>{l(k,_(e(s),e(g)))}),_t(),De();var H=ya(),F=qe(H),Z=a(F),B=o(a(Z),2),m=o(a(B),2);t(B);var y=o(B,2);{var z=u=>{var N=ma();A(u,N)},P=(u,N)=>{{var $=f=>{var I=pa(),n=a(I,!0);t(I),ue(()=>X(n,e(i))),A(f,I)},D=(f,I)=>{{var n=r=>{},x=(r,S)=>{{var M=h=>{var j=ba();A(h,j)},G=h=>{var j=ha(),K=a(j),Q=o(a(K));Ce(Q,5,()=>e(k),Ae,(se,W)=>{var me=_a(),ce=a(me),pe=a(ce,!0);t(ce);var he=o(ce),Ie=a(he,!0);t(he);var ge=o(he),fe=a(ge,!0);t(ge);var we=o(ge),Ee=a(we,!0);t(we);var Te=o(we),ve=a(Te,!0);t(Te);var _e=o(Te),je=a(_e),Ge=a(je,!0);t(je),t(_e);var be=o(_e),xe=a(be),Se=a(xe),Ne=o(Se,2);{var Pe=Ue=>{var $e=fa();J("click",$e,()=>E(e(W).id)),A(Ue,$e)},Qe=Ue=>{var $e=ga();J("click",$e,()=>ee(e(W).id)),A(Ue,$e)};oe(Ne,Ue=>{e(W).estado?Ue(Pe):Ue(Qe,!1)})}t(xe),t(be),t(me),ue(()=>{X(pe,e(W).email),X(Ie,e(W).nombre),X(fe,e(W).apellido),X(Ee,e(W).documento),X(ve,e(W).telefono),Je(je,1,`mobile-badge ${e(W).estado?"active":"inactive"}`,"svelte-1chucrw"),X(Ge,e(W).estado?"Activo":"Desactivado")}),J("click",Se,()=>L(e(W).id)),A(se,me)}),t(Q),t(K),t(j),A(h,j)};oe(r,h=>{e(k).length===0?h(M):h(G,!1)},S)}};oe(f,r=>{e(b)?r(n):r(x,!1)},I)}};oe(u,f=>{e(i)?f($):f(D,!1)},N)}};oe(y,u=>{e(v)?u(z):u(P,!1)})}t(Z),t(F);var T=o(F,2),q=o(a(T),2),R=a(q),te=o(a(R),2);t(R);var V=o(R,2),ae=o(a(V),10),ie=o(a(ae),2),le=a(ie);le.value=le.__value="1";var re=o(le);re.value=re.__value="0",t(ie),t(ae);var ne=o(ae,2),de=o(a(ne),2);t(ne),t(V),t(q),t(T),Be(2),J("input",m,u=>Y(u.target.value)),J("click",te,()=>w()),J("click",de,U),A(c,H),Oe()}var Ea=C('<div class="mobile-loading svelte-1i34bfc"><div class="spinner-border text-primary" role="status"><span class="visually-hidden">Loading...</span></div> <div>Cargando datos...</div></div>'),Ta=C('<div class="alert alert-danger text-center"> </div>'),xa=C('<div class="no-results-message svelte-1i34bfc"><i class="bi bi-exclamation-circle svelte-1i34bfc"></i> No se encontraron resultados</div>'),ka=C('<button class="mobile-btn deactivate svelte-1i34bfc"><i class="bi bi-lock"></i> <span>Desactivar</span></button>'),Ba=C('<button class="mobile-btn activate svelte-1i34bfc"><i class="bi bi-unlock"></i> <span>Activar</span></button>'),Sa=C('<tr class="svelte-1i34bfc"><td data-label="Nombre" class="svelte-1i34bfc"> </td><td data-label="Género" class="svelte-1i34bfc"> </td><td data-label="Tipo de Ceguera" class="svelte-1i34bfc"> </td><td data-label="Estado" class="text-center svelte-1i34bfc"><span> </span></td><td data-label="Acciones" class="text-center svelte-1i34bfc"><div class="mobile-actions svelte-1i34bfc"><button class="mobile-btn edit svelte-1i34bfc"><i class="bi bi-pencil"></i> <span>Editar</span></button> <!></div></td></tr>'),Aa=C('<div class="mobile-table-responsive svelte-1i34bfc"><table class="mobile-table svelte-1i34bfc" id="myTable"><thead class="svelte-1i34bfc"><tr class="svelte-1i34bfc"><th>Nombre</th><th>Género</th><th>Tipo de Ceguera</th><th>Estado</th><th>Acciones</th></tr></thead><tbody></tbody></table></div>'),Ca=C(`<div id="MostrarDiscapacitado"><div class="mobile-users-container svelte-1i34bfc"><h2 class="mobile-users-title svelte-1i34bfc"><i class="bi bi-person-heart me-2"></i>DISCAPACITADOS</h2> <div class="mobile-search-container svelte-1i34bfc"><i class="bi bi-search svelte-1i34bfc"></i> <input type="text" class="mobile-search-input svelte-1i34bfc" placeholder="Buscar por nombre, género o tipo de ceguera..."></div> <!></div></div> <div class="mobile-modal fade svelte-1i34bfc" id="nav-listado" role="tabpanel" aria-labelledby="nav-listado-tab"><div class="mobile-modal-card svelte-1i34bfc"><div class="mobile-modal-header svelte-1i34bfc"><h5><b>Editando Discapacitado</b></h5> <button class="mobile-close-btn svelte-1i34bfc" aria-label="Cerrar edición"><i class="bi bi-x-lg"></i></button></div> <div class="mobile-modal-body svelte-1i34bfc"><div class="mobile-form-group svelte-1i34bfc"><label for="nombres" class="svelte-1i34bfc"><b>Nombre:</b></label> <input type="text" id="nombres" placeholder="Nombres" maxlength="100" readonly="" class="svelte-1i34bfc"></div> <div class="mobile-form-group svelte-1i34bfc"><label for="genero" class="svelte-1i34bfc"><b>Género:</b></label> <input type="text" id="genero" placeholder="Género" readonly="" class="svelte-1i34bfc"></div> <div class="mobile-form-group svelte-1i34bfc"><label for="tipo_ceguera" class="svelte-1i34bfc"><b>Tipo de Ceguera:</b></label> <input type="text" id="tipo_ceguera" placeholder="Tipo de Ceguera" readonly="" class="svelte-1i34bfc"></div> <div class="mobile-form-group svelte-1i34bfc"><label for="estado" class="svelte-1i34bfc"><b>Estado:</b></label> <select id="estado" class="svelte-1i34bfc"><option>Activar</option><option>Desactivar</option></select></div> <div class="mobile-modal-footer svelte-1i34bfc"><p>¡Al terminar de editar, haga clic en actualizar para guardar
                    los cambios!</p> <button class="mobile-update-btn svelte-1i34bfc"><b>Actualizar</b></button></div></div></div></div> <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">`,1);function Ia(c,d){Re(d,!1);let s=O({}),v=O(!0),i=O(null),b=O(!1);Le(async()=>{try{console.log("2");const u=await fetch("https://proyectomascotas.onrender.com/get_discapacitadosVCOMPLETOS");if(!u.ok)throw new Error("Error al cargar los datos");const N=await u.json();l(s,N.resultado),console.log(e(s)),setTimeout(()=>{globalThis.$("#myTable").DataTable()},0)}catch(u){l(i,u.message)}finally{l(v,!1)}});async function w(){l(b,!1),document.getElementById("nav-listado").setAttribute("class","fade"),document.getElementById("MostrarDiscapacitado").removeAttribute("class"),location.reload()}var p=1;async function L(u,N){l(b,!0),console.log("Editando a "+N);const $=document.getElementById("nav-listado");$.removeAttribute("class"),console.log($),p=u,console.log(Number.isInteger(p)),console.log(p);let D=document.getElementById("MostrarDiscapacitado");D.setAttribute("class","fade"),console.log(D);const f=D.parentElement;console.log(f),f.insertBefore($,D),console.log("NO Entra al try de buscar");try{console.log("Entra al try de buscar");const I=await fetch(`https://proyectomascotas.onrender.com/get_discapacitadoV/${p}`,{method:"GET",headers:{"Content-Type":"application/json"}}),n=await I.json();console.log(I),console.log(n),console.log("Buscando al usuario seleccionado"),l(s,n.nombre),console.log(e(s)),document.getElementById("nombres").value=n.nombre,document.getElementById("genero").value=n.id_genero_discapacitado,document.getElementById("tipo_ceguera").value=n.id_tipo_ceguera,console.log("verificando el estado: "+n.estado);const x=n.estado?"1":"0";document.getElementById("estado").value=x;const r=document.getElementById("nombres");r.removeAttribute("readonly"),r.focus(),document.getElementById("genero").removeAttribute("readonly"),document.getElementById("tipo_ceguera").removeAttribute("readonly"),document.getElementById("estado").removeAttribute("readonly")}catch(I){l(i,I.message)}finally{l(v,!1)}}async function U(){console.log(p);let u=document.getElementById("nombres").value,N=document.getElementById("genero").value,$=document.getElementById("tipo_ceguera").value,D=document.getElementById("estado").value;console.log("ID DE ESTADO ENVIADO A LA BASE DE DATOS ES "+D);try{console.log("Entra al try de actualzar");const f=await fetch(`https://proyectomascotas.onrender.com/update_user/${p}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({nombre:u,genero:N,tipo_ceguera:$,estado:D})});console.log("Actualizado"),Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:n=>{n.onmouseenter=Swal.stopTimer,n.onmouseleave=Swal.resumeTimer}}).fire({icon:"success",iconColor:"white",color:"white",background:"#00bdff",title:"Discapacitado actualizado con exito"}),setTimeout(()=>{const n=document.getElementById("nav-listado");n.setAttribute("class","fade");let x=document.getElementById("MostrarDiscapacitado");x.removeAttribute("class"),n.parentElement.insertBefore(x,n),location.reload()},3e3)}catch(f){l(i,f.message)}finally{l(v,!1)}}async function E(u){let N=0,$=u,D=N!==0;try{const f=await fetch(`https://proyectomascotas.onrender.com/update_estado_discapacitado/${$}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({estado:D})}),I=await f.json();f.ok?(Swal.mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:x=>{x.onmouseenter=Swal.stopTimer,x.onmouseleave=Swal.resumeTimer}}).fire({icon:"error",iconColor:"white",color:"white",background:"#ff4e4e",title:"El Discapacitado a sido desactivado de manera exitosa"}),setTimeout(()=>{location.reload()},3500)):alert("Error al desactivar: "+I.message||"Error desconocido")}catch(f){alert("Error en la solicitud: "+f.message)}}async function ee(u){let N=1,$=u,D=N===1;try{const f=await fetch(`https://proyectomascotas.onrender.com/update_estado_discapacitado/${$}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({estado:D})}),I=await f.json();f.ok?(Swal.mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:x=>{x.onmouseenter=Swal.stopTimer,x.onmouseleave=Swal.resumeTimer}}).fire({icon:"success",iconColor:"#000000",color:"black",background:"#76fa78",title:"El Discapacitado se ha activado de manera exitosa"}),setTimeout(()=>{location.reload()},3500)):alert("Error al Activar: "+I.message||"Error desconocido")}catch(f){alert("Error en la solicitud: "+f.message)}}let k=O([]),g=O("");function _(u,N){if(!N||typeof u>"u")return u;const $=N.toLowerCase();return u.filter(D=>D.nombre&&D.nombre.toLowerCase().includes($)||D.genero&&D.genero.toLowerCase().includes($)||D.tipo_ceguera&&D.tipo_ceguera.toLowerCase().includes($))}function Y(u){l(g,u)}gt(()=>(e(s),e(g)),()=>{l(k,_(e(s),e(g)))}),_t(),De();var H=Ca(),F=qe(H),Z=a(F),B=o(a(Z),2),m=o(a(B),2);t(B);var y=o(B,2);{var z=u=>{var N=Ea();A(u,N)},P=(u,N)=>{{var $=f=>{var I=Ta(),n=a(I,!0);t(I),ue(()=>X(n,e(i))),A(f,I)},D=(f,I)=>{{var n=r=>{},x=(r,S)=>{{var M=h=>{var j=xa();A(h,j)},G=h=>{var j=Aa(),K=a(j),Q=o(a(K));Ce(Q,5,()=>e(k),Ae,(se,W)=>{var me=Sa(),ce=a(me),pe=a(ce,!0);t(ce);var he=o(ce),Ie=a(he,!0);t(he);var ge=o(he),fe=a(ge,!0);t(ge);var we=o(ge),Ee=a(we),Te=a(Ee,!0);t(Ee),t(we);var ve=o(we),_e=a(ve),je=a(_e),Ge=o(je,2);{var be=Se=>{var Ne=ka();J("click",Ne,()=>E(e(W).id)),A(Se,Ne)},xe=Se=>{var Ne=Ba();J("click",Ne,()=>ee(e(W).id)),A(Se,Ne)};oe(Ge,Se=>{e(W).estado?Se(be):Se(xe,!1)})}t(_e),t(ve),t(me),ue(()=>{X(pe,e(W).nombre),X(Ie,e(W).genero),X(fe,e(W).tipo_ceguera),Je(Ee,1,`mobile-badge ${e(W).estado?"active":"inactive"}`,"svelte-1i34bfc"),X(Te,e(W).estado?"Activo":"Desactivado")}),J("click",je,()=>L(e(W).id,e(W).nombre)),A(se,me)}),t(Q),t(K),t(j),A(h,j)};oe(r,h=>{e(s).length===0?h(M):h(G,!1)},S)}};oe(f,r=>{e(b)?r(n):r(x,!1)},I)}};oe(u,f=>{e(i)?f($):f(D,!1)},N)}};oe(y,u=>{e(v)?u(z):u(P,!1)})}t(Z),t(F);var T=o(F,2),q=a(T),R=a(q),te=o(a(R),2);t(R);var V=o(R,2),ae=o(a(V),6),ie=o(a(ae),2),le=a(ie);le.value=le.__value="1";var re=o(le);re.value=re.__value="0",t(ie),t(ae);var ne=o(ae,2),de=o(a(ne),2);t(ne),t(V),t(q),t(T),Be(2),J("input",m,u=>Y(u.target.value)),J("click",te,()=>w()),J("click",de,U),A(c,H),Oe()}var ja=C('<div class="mobile-loading svelte-1y4bypj"><div class="spinner-border text-primary" role="status"><span class="visually-hidden">Loading...</span></div> <div>Cargando datos...</div></div>'),Da=C('<div class="alert alert-danger text-center"> </div>'),Ra=C('<button class="mobile-btn deactivate svelte-1y4bypj"><i class="bi bi-lock"></i> <span>Desactivar</span></button>'),Oa=C('<button class="mobile-btn activate svelte-1y4bypj"><i class="bi bi-unlock"></i> <span>Activar</span></button>'),Na=C('<tr class="svelte-1y4bypj"><td data-label="Nombre" class="svelte-1y4bypj"> </td><td data-label="Estado" class="text-center svelte-1y4bypj"><span> </span></td><td data-label="Opciones" class="text-center svelte-1y4bypj"><div class="mobile-actions svelte-1y4bypj"><button class="mobile-btn edit svelte-1y4bypj"><i class="bi bi-pencil"></i> <span>Editar</span></button> <!></div></td></tr>'),Ma=C('<div class="mobile-table-responsive svelte-1y4bypj"><table class="mobile-table svelte-1y4bypj" id="myTable"><thead class="svelte-1y4bypj"><tr class="svelte-1y4bypj"><th>Nombre</th><th>Estado</th><th>Opciones</th></tr></thead><tbody></tbody></table></div>'),La=C('<div class="mobile-checkbox-wrapper"><input type="checkbox" class="svelte-1y4bypj"> <label class="mobile-checkbox-label svelte-1y4bypj"> </label></div>'),Pa=C(`<div class="form-wrapper svelte-1y4bypj"><div class="form-title svelte-1y4bypj">REGISTRO DE ROLES</div> <form class="vibrant-form svelte-1y4bypj"><input class="vibrant-input svelte-1y4bypj" placeholder="Nombre del Rol" type="text" autocomplete="off" required> <button class="vibrant-button svelte-1y4bypj">REGISTRAR ROL</button></form></div> <div id="MostrarRoles"><div class="roles-container svelte-1y4bypj"><h2 class="roles-title svelte-1y4bypj"><i class="bi bi-diagram-3"></i> Lista de Roles</h2> <!></div></div> <div class="mobile-modal fade svelte-1y4bypj" id="nav-listado" role="tabpanel" aria-labelledby="nav-listado-tab"><div class="mobile-modal-card svelte-1y4bypj"><div class="mobile-modal-header svelte-1y4bypj"><h5><b>Editando Rol</b></h5> <button class="mobile-close-btn svelte-1y4bypj" aria-label="Cerrar edición"><i class="bi bi-x-lg"></i></button></div> <div class="mobile-modal-body svelte-1y4bypj"><div class="mobile-form-group svelte-1y4bypj"><label for="nombre" class="svelte-1y4bypj"><b>Nombre:</b></label> <input type="text" id="nombre" placeholder="Nombre del Rol" maxlength="100" readonly="" class="svelte-1y4bypj"></div>  <div class="mobile-form-group svelte-1y4bypj"><fieldset><legend id="modules-legend"><b>Seleccione los módulos:</b></legend> <div class="mobile-checkbox-grid svelte-1y4bypj" role="group" aria-labelledby="modules-legend"></div></fieldset></div> <div class="mobile-form-group svelte-1y4bypj"><label for="estado" class="svelte-1y4bypj"><b>Estado:</b></label> <select id="estado" class="svelte-1y4bypj"><option>Activar</option><option>Desactivar</option></select></div> <div class="mobile-modal-footer"><p>¡Al terminar de editar, haga clic en actualizar para guardar
                    los cambios!</p> <button class="mobile-update-btn svelte-1y4bypj"><b>Actualizar</b></button></div></div></div></div>`,1);function Ua(c,d){Re(d,!1);const s=[];let v=O(""),i=!0,b=O({}),w=O({}),p=O(!0),L=O(null),U=O([]);Le(async()=>{const x=await(await fetch("https://proyectomascotas.onrender.com/get_modulos/")).json();l(w,x.resultado),console.log("ando ando",e(w))});const E=Xe();async function ee(){try{if((await Swal.fire({title:"¿Estás seguro?",text:"¡Desea registrar el siguiente Rol!? "+e(v),icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sí, registrar!",customClass:{popup:"swal-popup",title:"custom-title"}})).isConfirmed){E("showLoader");const x=await fetch("https://proyectomascotas.onrender.com/create_rol",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nombre:e(v),estado:i})}),r=await x.json();console.log(r),E("hideLoader"),x.ok?Swal.fire({title:"¡Se ha registrado el Rol llamado "+e(v)+" con exito!",icon:"success",customClass:{popup:"swal-popup",title:"custom-title"}}):alert("Error en el registro")}else console.log("Registro Cancelado")}catch(n){l(L,n.message),E("hideLoader"),alert("Error en la solicitud: "+e(L))}}Le(async()=>{try{console.log("2");const n=await fetch("https://proyectomascotas.onrender.com/get_roles");if(!n.ok)throw new Error("Error al cargar los datos");const x=await n.json();l(b,x.resultado),console.log(e(b)),setTimeout(()=>{globalThis.$("#myTable").DataTable()},0)}catch(n){l(L,n.message)}finally{l(p,!1)}});async function k(){document.getElementById("nav-listado").setAttribute("class","fade"),document.getElementById("MostrarRoles").removeAttribute("class"),location.reload()}var g=1;async function _(n,x){console.log("Editando el Rol "+x);const r=document.getElementById("nav-listado");r.removeAttribute("class"),console.log(r),g=n,console.log(Number.isInteger(g)),console.log(g);let S=document.getElementById("MostrarRoles");S.setAttribute("class","fade"),console.log(S);const M=S.parentElement;console.log(M),M.insertBefore(r,S),console.log("NO Entra al try de buscar");const h=await(await fetch("https://proyectomascotas.onrender.com/get_modulos/")).json();l(w,h.resultado),console.log("ando ando",e(w));try{console.log("Entra al try de buscar");const j=await fetch(`https://proyectomascotas.onrender.com/get_rol/${g}`,{method:"GET",headers:{"Content-Type":"application/json"}}),K=await j.json();console.log(j),console.log(K),console.log("Buscando el Rol seleccionado"),l(b,K.nombre),console.log(e(b)),document.getElementById("nombre").value=K.nombre,console.log("Verificando el estado: "+K.estado);const Q=K.estado?"1":"0";document.getElementById("estado").value=Q;const se=document.getElementById("nombre");se.removeAttribute("readonly"),se.focus(),document.getElementById("estado").removeAttribute("readonly")}catch(j){l(L,j.message)}finally{l(p,!1)}}async function Y(){console.log(g);let n=document.getElementById("nombre").value,x=document.getElementById("estado").value;console.log("ID DE ESTADO ENVIADO A LA BASE DE DATOS ES "+x);try{console.log("Entra al try de actualzar");const r=await fetch(`https://proyectomascotas.onrender.com/update_rol/${g}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({nombre:n,estado:x})});console.log("Actualizado");const S=await fetch(`https://proyectomascotas.onrender.com/update_moduloXrol02/${g}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_rol:g,id_modulo:e(U)})});console.log("Actualizado"),Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:G=>{G.onmouseenter=Swal.stopTimer,G.onmouseleave=Swal.resumeTimer}}).fire({icon:"success",iconColor:"white",color:"white",background:"#00bdff",title:"Rol actualizado exitosamente"}),setTimeout(()=>{const G=document.getElementById("nav-listado");G.setAttribute("class","fade");let h=document.getElementById("MostrarRoles");h.removeAttribute("class"),G.parentElement.insertBefore(h,G),location.reload()},3e3)}catch(r){l(L,r.message)}finally{l(p,!1)}}async function H(n){let x=0,r=n,S=x!==0;try{const M=await fetch(`https://proyectomascotas.onrender.com/update_estado_rol/${r}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({estado:S})}),G=await M.json();M.ok?(Swal.mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:j=>{j.onmouseenter=Swal.stopTimer,j.onmouseleave=Swal.resumeTimer}}).fire({icon:"error",iconColor:"white",color:"white",background:"#ff4e4e",title:"El Rol a sido desactivado de manera exitosa"}),setTimeout(()=>{location.reload()},3500)):alert("Error al desactivar: "+G.message||"Error desconocido")}catch(M){alert("Error en la solicitud: "+M.message)}}async function F(n){let x=1,r=n,S=x===1;try{const M=await fetch(`https://proyectomascotas.onrender.com/update_estado_rol/${r}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({estado:S})}),G=await M.json();M.ok?(Swal.mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:j=>{j.onmouseenter=Swal.stopTimer,j.onmouseleave=Swal.resumeTimer}}).fire({icon:"success",iconColor:"#000000",color:"black",background:"#76fa78",title:"El Rol se ha activado de manera exitosa"}),setTimeout(()=>{location.reload()},3500)):alert("Error al Activar: "+G.message||"Error desconocido")}catch(M){alert("Error en la solicitud: "+M.message)}}De();var Z=Pa(),B=qe(Z),m=o(a(B),2),y=a(m);ye(y),Be(2),t(m),t(B);var z=o(B,2),P=a(z),T=o(a(P),2);{var q=n=>{var x=ja();A(n,x)},R=(n,x)=>{{var r=M=>{var G=Da(),h=a(G,!0);t(G),ue(()=>X(h,e(L))),A(M,G)},S=M=>{var G=Ma(),h=a(G),j=o(a(h));Ce(j,5,()=>e(b),Ae,(K,Q)=>{var se=Na(),W=a(se),me=a(W,!0);t(W);var ce=o(W),pe=a(ce),he=a(pe,!0);t(pe),t(ce);var Ie=o(ce),ge=a(Ie),fe=a(ge),we=o(fe,2);{var Ee=ve=>{var _e=Ra();J("click",_e,()=>H(e(Q).id)),A(ve,_e)},Te=ve=>{var _e=Oa();J("click",_e,()=>F(e(Q).id)),A(ve,_e)};oe(we,ve=>{e(Q).estado?ve(Ee):ve(Te,!1)})}t(ge),t(Ie),t(se),ue(()=>{X(me,e(Q).nombre),Je(pe,1,`mobile-badge ${e(Q).estado?"active":"inactive"}`,"svelte-1y4bypj"),X(he,e(Q).estado?"Activo":"Desactivado")}),J("click",fe,()=>_(e(Q).id,e(Q).nombre)),A(K,se)}),t(j),t(h),t(G),A(M,G)};oe(n,M=>{e(L)?M(r):M(S,!1)},x)}};oe(T,n=>{e(p)?n(q):n(R,!1)})}t(P),t(z);var te=o(z,2),V=a(te),ae=a(V),ie=o(a(ae),2);t(ae);var le=o(ae,2),re=o(a(le),2),ne=a(re),de=o(a(ne),2);Ce(de,5,()=>e(w),Ae,(n,x)=>{var r=La(),S=a(r);ye(S);var M,G=o(S,2),h=a(G,!0);t(G),t(r),ue(()=>{Ze(S,"id",`modulo-${e(x).id??""}`),M!==(M=e(x).id)&&(S.value=(S.__value=e(x).id)??""),Ze(G,"for",`modulo-${e(x).id??""}`),X(h,e(x).nombre)}),ht(s,[],S,()=>(e(x).id,e(U)),j=>l(U,j)),A(n,r)}),t(de),t(ne),t(re);var u=o(re,2),N=o(a(u),2),$=a(N);$.value=$.__value="1";var D=o($);D.value=D.__value="0",t(N),t(u);var f=o(u,2),I=o(a(f),2);t(f),t(le),t(V),t(te),ke(y,()=>e(v),n=>l(v,n)),J("submit",m,Ye(ee)),J("click",ie,()=>k()),J("click",I,Y),A(c,Z),Oe()}var za=C('<div class="row justify-content-center text-center"><div class="col-12 mb-2">Cargando datos...</div> <div class="spinner-border text-primary" role="status"><span class="visually-hidden">Loading...</span></div></div>'),qa=C('<div class="alert alert-danger text-center"> </div>'),Ga=C('<button class="btn btn-sm btn-outline-danger"><i class="bi bi-lock"></i> <span class="d-none d-md-inline">Desactivar</span></button>'),$a=C('<button class="btn btn-sm btn-outline-success"><i class="bi bi-unlock"></i> <span class="d-none d-md-inline">Activar</span></button>'),Ja=C('<tr><td> </td><td> </td><td class="text-center"><span> </span></td><td class="text-center"><div class="d-flex flex-wrap gap-1 justify-content-center"><button class="btn btn-sm btn-outline-primary"><i class="bi bi-pencil"></i> <span class="d-none d-md-inline">Editar</span></button> <!></div></td></tr>'),Ha=C('<div class="table-responsive"><table class="table table-hover table-bordered align-middle" id="myTable"><thead><tr><th>Nombre</th><th>Descripcion</th><th>Estado</th><th>Opciones</th></tr></thead><tbody></tbody></table></div>'),Fa=C(`<div class="wrapper svelte-t5nwrd"><div class="title small-title svelte-t5nwrd" style="color: dodgerblue;">REGISTRO DE MODULOS</div> <form class="class-form svelte-t5nwrd"><input class="form__input small-input svelte-t5nwrd" placeholder="Nombre del Modulo" type="text" required> <input class="form__input small-input svelte-t5nwrd" placeholder="Descripcion del Modulo" type="text" required> <input class="form__input small-input svelte-t5nwrd" placeholder="Ubicacion del Modulo" type="text" required> <input class="form__input small-input svelte-t5nwrd" placeholder="Ingrese el icono que tendra el Modulo (Boostrap)" type="text" required> <button class="flip-card__btn small-btn svelte-t5nwrd">Confirmar</button></form></div> <div id="MostrarModulos"><div class="container py-4 bg-light rounded shadow"><h2 class="text-center mb-4 pb-2 border-bottom border-3 border-primary fw-bold"><i class="bi-grid-3x3-gap-fill me-2"></i>Lista de Modulos</h2> <!></div></div> <div class="fade" id="nav-listado" role="tabpanel" aria-labelledby="nav-listado-tab"><div class="container text-center"><p class="text-orange"></p></div> <div class="card border-dark shadow" style="width: 60%; margin-left: 20%;"><div class="card-header row g-2"><h5 class="card-title col-lg-11"><b>Editando Modulo</b></h5> <button class="btn btn-close col-lg-1" aria-label="Cerrar edición de usuario"></button></div> <div class="card-body" style="margin-left: 10%;"><div class="row"><div class="col-lg-2"><p class="card-text"><b>Nombre:</b></p></div> <div class="col-lg-10"><input type="text" placeholder="Nombre del Modulo" id="nombre" maxlength="100" style="border: none; width: 55%;" readonly=""></div></div> <div class="row pt-3"><div class="col-lg-2"><p class="card-text"><b>Descripcion:</b></p></div> <div class="col-lg-10"><input type="text" placeholder="Descripcion del Modulo" id="descripcion" style="border: none; width: 55%;" readonly=""></div></div> <div class="row pt-3"><div class="col-lg-2"><p class="card-text"><b>Ubicación:</b></p></div> <div class="col-lg-10"><input type="text" placeholder="Descripcion del Modulo" id="ubicacion" style="border: none; width: 55%;" readonly=""></div></div> <div class="row pt-3"><div class="col-lg-2"><p class="card-text"><b>Estilo:</b></p></div> <div class="col-lg-10"><input type="text" placeholder="Descripcion del Modulo" id="estilo" style="border: none; width: 55%;" readonly=""></div></div> <div class="row pt-3"><div class="col-lg-2"><p class="card-text"><b>Estado:</b></p></div> <div class="col-lg-10"><select id="estado" name="opciones" style="border: none; width: 55%;"><option>Activar</option><option>Desactivar</option></select></div></div> <div class="row" style="margin-top: 4%;"><div class="col-lg-9">¡Al terminar de editar, darle click en actualizar para
                    guardar los cambios!</div> <div class="col-lg-3 text-end"><button class="btn btn-outline-info"><b>Actualizar</b></button></div> <div id="estado" class="col-lg-10"></div></div></div></div></div>`,1);function Va(c,d){Re(d,!1);let s=O(""),v=O(""),i=O(""),b=O(""),w=!0,p=O({}),L=O(!0),U=O(null);const E=Xe();async function ee(){try{if((await Swal.fire({title:"¿Estás seguro?",text:"¡Desea registrar el siguiente Modulo!?: "+e(s),icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sí, registrar!",customClass:{popup:"swal-popup",title:"custom-title"}})).isConfirmed){E("showLoader");const S=await fetch("https://proyectomascotas.onrender.com/create_modulo",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nombre:e(s),descripcion:e(v),ubicacion:e(i),estado:w,estilo:e(b)})}),M=await S.json();console.log(M),E("hideLoader"),S.ok?(Swal.fire({title:"¡Se ha registrado el Modulo llamado "+e(s)+" con exito!",icon:"success",customClass:{popup:"swal-popup",title:"custom-title"}}),setTimeout(()=>{location.reload()},3500)):alert("Error en el registro")}else console.log("Registro Cancelado")}catch(r){l(U,r.message),E("hideLoader"),alert("Error en la solicitud: "+e(U))}}Le(async()=>{try{console.log("2");const r=await fetch("https://proyectomascotas.onrender.com/get_modulos");if(!r.ok)throw new Error("Error al cargar los datos");const S=await r.json();l(p,S.resultado),console.log(e(p)),setTimeout(()=>{globalThis.$("#myTable").DataTable()},0)}catch(r){l(U,r.message)}finally{l(L,!1)}});async function k(){document.getElementById("nav-listado").setAttribute("class","fade"),document.getElementById("MostrarModulos").removeAttribute("class"),location.reload()}var g=1;async function _(r,S){console.log("Editando el modulo "+S);const M=document.getElementById("nav-listado");M.removeAttribute("class"),console.log(M),g=r,console.log(Number.isInteger(g)),console.log(g);let G=document.getElementById("MostrarModulos");G.setAttribute("class","fade"),console.log(G);const h=G.parentElement;console.log(h),h.insertBefore(M,G),console.log("NO Entra al try de buscar");try{console.log("Entra al try de buscar");const j=await fetch(`https://proyectomascotas.onrender.com/get_modulo/${g}`,{method:"GET",headers:{"Content-Type":"application/json"}}),K=await j.json();console.log(j),console.log(K),console.log("Buscando el Modulo seleccionado"),l(p,K.nombre),console.log(e(p)),document.getElementById("nombre").value=K.nombre,document.getElementById("descripcion").value=K.descripcion,document.getElementById("ubicacion").value=K.ubicacion,document.getElementById("estilo").value=K.estilo,console.log("verificando el estado: "+K.estado);const Q=K.estado?"1":"0";document.getElementById("estado").value=Q;const se=document.getElementById("nombre");se.removeAttribute("readonly"),se.focus(),document.getElementById("descripcion").removeAttribute("readonly"),document.getElementById("ubicacion").removeAttribute("readonly"),document.getElementById("estilo").removeAttribute("readonly"),document.getElementById("estado").removeAttribute("readonly")}catch(j){l(U,j.message)}finally{l(L,!1)}}async function Y(){console.log(g);let r=document.getElementById("nombre").value,S=document.getElementById("descripcion").value,M=document.getElementById("ubicacion").value,G=document.getElementById("estilo").value,h=document.getElementById("estado").value;console.log("ID DE ESTADO ENVIADO A LA BASE DE DATOS ES "+h);try{console.log("Entra al try de actualzar");const j=await fetch(`https://proyectomascotas.onrender.com/update_modulo/${g}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({nombre:r,descripcion:S,ubicacion:M,estilo:G,estado:h})});console.log("Actualizado"),Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:Q=>{Q.onmouseenter=Swal.stopTimer,Q.onmouseleave=Swal.resumeTimer}}).fire({icon:"success",iconColor:"white",color:"white",background:"#00bdff",title:"Modulo actualizado exitosamente"}),setTimeout(()=>{const Q=document.getElementById("nav-listado");Q.setAttribute("class","fade");let se=document.getElementById("MostrarModulos");se.removeAttribute("class"),Q.parentElement.insertBefore(se,Q),location.reload()},3e3)}catch(j){l(U,j.message)}finally{l(L,!1)}}async function H(r){let S=0,M=r,G=S!==0;try{const h=await fetch(`https://proyectomascotas.onrender.com/update_estado_modulo/${M}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({estado:G})}),j=await h.json();h.ok?(Swal.mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:Q=>{Q.onmouseenter=Swal.stopTimer,Q.onmouseleave=Swal.resumeTimer}}).fire({icon:"error",iconColor:"white",color:"white",background:"#ff4e4e",title:"El Modulo a sido desactivado de manera exitosa"}),setTimeout(()=>{location.reload()},3500)):alert("Error al desactivar: "+j.message||"Error desconocido")}catch(h){alert("Error en la solicitud: "+h.message)}}async function F(r){let S=1,M=r,G=S===1;try{const h=await fetch(`https://proyectomascotas.onrender.com/update_estado_modulo/${M}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({estado:G})}),j=await h.json();h.ok?(Swal.mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:Q=>{Q.onmouseenter=Swal.stopTimer,Q.onmouseleave=Swal.resumeTimer}}).fire({icon:"success",iconColor:"#000000",color:"black",background:"#76fa78",title:"El Modulo se ha activado de manera exitosa"}),setTimeout(()=>{location.reload()},3500)):alert("Error al Activar: "+j.message||"Error desconocido")}catch(h){alert("Error en la solicitud: "+h.message)}}De();var Z=Fa(),B=qe(Z),m=o(a(B),2),y=a(m);ye(y);var z=o(y,2);ye(z);var P=o(z,2);ye(P);var T=o(P,2);ye(T),Be(2),t(m),t(B);var q=o(B,2),R=a(q),te=o(a(R),2);{var V=r=>{var S=za();A(r,S)},ae=(r,S)=>{{var M=h=>{var j=qa(),K=a(j,!0);t(j),ue(()=>X(K,e(U))),A(h,j)},G=h=>{var j=Ha(),K=a(j),Q=o(a(K));Ce(Q,5,()=>e(p),Ae,(se,W)=>{var me=Ja(),ce=a(me),pe=a(ce,!0);t(ce);var he=o(ce),Ie=a(he,!0);t(he);var ge=o(he),fe=a(ge),we=a(fe,!0);t(fe),t(ge);var Ee=o(ge),Te=a(Ee),ve=a(Te),_e=o(ve,2);{var je=be=>{var xe=Ga();J("click",xe,()=>H(e(W).id)),A(be,xe)},Ge=be=>{var xe=$a();J("click",xe,()=>F(e(W).id)),A(be,xe)};oe(_e,be=>{e(W).estado?be(je):be(Ge,!1)})}t(Te),t(Ee),t(me),ue(()=>{X(pe,e(W).nombre),X(Ie,e(W).descripcion),Je(fe,1,`badge ${e(W).estado?"bg-success":"bg-danger"}`),X(we,e(W).estado?"Activo":"Desactivado")}),J("click",ve,()=>_(e(W).id,e(W).nombre)),A(se,me)}),t(Q),t(K),t(j),A(h,j)};oe(r,h=>{e(U)?h(M):h(G,!1)},S)}};oe(te,r=>{e(L)?r(V):r(ae,!1)})}t(R),t(q);var ie=o(q,2),le=o(a(ie),2),re=a(le),ne=o(a(re),2);t(re);var de=o(re,2),u=o(a(de),8),N=o(a(u),2),$=a(N),D=a($);D.value=D.__value="1";var f=o(D);f.value=f.__value="0",t($),t(N),t(u);var I=o(u,2),n=o(a(I),2),x=a(n);t(n),Be(2),t(I),t(de),t(le),t(ie),ke(y,()=>e(s),r=>l(s,r)),ke(z,()=>e(v),r=>l(v,r)),ke(P,()=>e(i),r=>l(i,r)),ke(T,()=>e(b),r=>l(b,r)),J("submit",m,Ye(ee)),J("click",ne,()=>k()),J("click",x,Y),A(c,Z),Oe()}var Wa=C('<div class="admin-container svelte-frsr9g"><div class="admin-card svelte-frsr9g"><div class="card-header svelte-frsr9g"><h2>📊 Panel de Estadísticas</h2></div> <div class="card-body svelte-frsr9g"><div class="iframe-container svelte-frsr9g"><iframe title="SensuTrack - Estadísticas" src="https://app.powerbi.com/view?r=eyJrIjoiZWE4NDU5OWUtNDZiMi00M2RjLTk0NTUtZWUxZDkyMjMwZDQyIiwidCI6IjFlOWFhYmU4LTY3ZjgtNGYxYy1hMzI5LWE3NTRlOTI0OTlhZSIsImMiOjR9" frameborder="0" allowfullscreen="" class="svelte-frsr9g"></iframe></div></div></div></div>');function Ya(c){var d=Wa();A(c,d)}var Za=C('<div class="row justify-content-center text-center"><div class="col-12 mb-2">Cargando datos...</div> <div class="spinner-border text-primary" role="status"><span class="visually-hidden">Loading...</span></div></div>'),Xa=C('<div class="alert alert-danger text-center"> </div>'),Qa=C('<button class="btn btn-sm btn-outline-danger"><i class="bi bi-lock"></i> <span class="d-none d-md-inline">Desactivar</span></button>'),Ka=C('<button class="btn btn-sm btn-outline-success"><i class="bi bi-unlock"></i> <span class="d-none d-md-inline">Activar</span></button>'),eo=C('<tr><td> </td><td> </td><td> </td><td> </td><td> </td><td class="text-center"><span> </span></td><td class="text-center"><div class="d-flex flex-wrap gap-1 justify-content-center"><button class="btn btn-sm btn-outline-primary"><i class="bi bi-pencil"></i> <span class="d-none d-md-inline">Editar</span></button> <!></div></td></tr>'),to=C('<div class="table-responsive"><table class="table table-hover table-bordered align-middle" id="myTable"><thead class="thead-light text-center"><tr><th>ID</th><th>Usuario</th><th>Latitud</th><th>Longitud</th><th>Lugar</th><th>Estado</th><th>Opcion</th></tr></thead><tbody></tbody></table></div>'),ao=C('<div id="Mostrarusuario"><div class="container py-4"><h2 class="text-center mb-4 pb-2 border-bottom border-3 border-primary fw-bold"><i class="bi-clock-history me-2"></i>Historial de Ubicaciones</h2> <!></div></div>');function oo(c,d){Re(d,!1);let s=O([]),v=O(!0),i=O(null);Le(async()=>{try{const E=await fetch("http://localhost:3000/historial");if(!E.ok)throw new Error("Error al cargar los datos");const ee=await E.json();console.log(ee),l(s,Array.isArray(ee)?ee:[ee]),setTimeout(()=>{globalThis.$&&globalThis.$.fn.DataTable?globalThis.$("#myTable").DataTable():console.error("jQuery o DataTables no están cargados")},0)}catch(E){l(i,E.message)}finally{l(v,!1)}}),De();var b=ao(),w=a(b),p=o(a(w),2);{var L=E=>{var ee=Za();A(E,ee)},U=(E,ee)=>{{var k=_=>{var Y=Xa(),H=a(Y,!0);t(Y),ue(()=>X(H,e(i))),A(_,Y)},g=_=>{var Y=to(),H=a(Y),F=o(a(H));Ce(F,5,()=>e(s),Ae,(Z,B)=>{var m=eo(),y=a(m),z=a(y,!0);t(y);var P=o(y),T=a(P,!0);t(P);var q=o(P),R=a(q,!0);t(q);var te=o(q),V=a(te,!0);t(te);var ae=o(te),ie=a(ae,!0);t(ae);var le=o(ae),re=a(le),ne=a(re,!0);t(re),t(le);var de=o(le),u=a(de),N=a(u),$=o(N,2);{var D=I=>{var n=Qa();J("click",n,()=>desactivar(e(B).id)),A(I,n)},f=I=>{var n=Ka();J("click",n,()=>activar(e(B).id)),A(I,n)};oe($,I=>{e(B).estado?I(D):I(f,!1)})}t(u),t(de),t(m),ue(()=>{X(z,e(B).id),X(T,e(B).id_usuario),X(R,e(B).latitud),X(V,e(B).longitud),X(ie,e(B).lugar),Je(re,1,`badge ${e(B).estado?"bg-success":"bg-danger"}`),X(ne,e(B).estado?"Activo":"Desactivado")}),J("click",N,()=>editar(e(B).id,e(B).nombre)),A(Z,m)}),t(F),t(H),t(Y),A(_,Y)};oe(E,_=>{e(i)?_(k):_(g,!1)},ee)}};oe(p,E=>{e(v)?E(L):E(U,!1)})}t(w),t(b),A(c,b),Oe()}var so=C('<option class="svelte-1r4v3de"> </option>'),lo=C('<label class="checkbox-label svelte-1r4v3de"><input type="checkbox" name="modulo" class="svelte-1r4v3de"> </label>'),ro=C('<div class="wrapper svelte-1r4v3de"><div class="title small-title svelte-1r4v3de" style="color: dodgerblue;">REGISTRO DE MODULOSXROL</div> <form class="class-form svelte-1r4v3de"><span class="svelte-1r4v3de">Roles:</span> <select id="roles" class="form__input svelte-1r4v3de" required><option disabled selected class="svelte-1r4v3de">Selecciona un rol</option><!></select> <fieldset class="checkbox-group svelte-1r4v3de"><legend class="svelte-1r4v3de">Módulos:</legend> <span class="svelte-1r4v3de">Selecciona los Modulos que tendra el Rol seleccionado:</span> <div class="checkbox-container svelte-1r4v3de"></div></fieldset> <button class="flip-card__btn small-btn svelte-1r4v3de">Confirmar</button></form> <div class="loader-container svelte-1r4v3de"><div class="loader-text svelte-1r4v3de"><span class="svelte-1r4v3de">S</span> <span class="svelte-1r4v3de">e</span> <span class="svelte-1r4v3de">n</span> <span class="svelte-1r4v3de">s</span> <span class="svelte-1r4v3de">u</span> <span class="svelte-1r4v3de">T</span> <span class="svelte-1r4v3de">r</span> <span class="svelte-1r4v3de">a</span> <span class="svelte-1r4v3de">c</span> <span class="svelte-1r4v3de">k</span></div></div></div>');function io(c,d){Re(d,!1);const s=[];let v="",i=!0,b=O([]),w=[],p=O({}),L=O({}),U=null,E=O();Le(async()=>{const P=await(await fetch("https://proyectomascotas.onrender.com/get_modulos/")).json();l(p,P.resultado),console.log(e(p));const q=await(await fetch("https://proyectomascotas.onrender.com/get_roles/")).json();l(L,q.resultado),console.log(e(L))});function ee(z){z&&(z.style.display="flex")}function k(z){z&&(z.style.display="none")}async function g(){console.log(e(b)),console.log(w),v=document.getElementById("roles").value;try{if((await Swal.fire({title:"¿Estás seguro?",text:"¡Desea registrar el siguiente ModuloxRol!?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sí, registrar!",customClass:{popup:"swal-popup",title:"custom-title"}})).isConfirmed){ee(e(E));const P=await fetch("https://proyectomascotas.onrender.com/create_moduloXrol",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_modulo:e(b),id_rol:v,estado:i})}),T=await P.json();console.log(T),k(e(E)),P.ok?(Swal.fire({title:"¡Se ha registrado el ModuloxRol con exito ",icon:"success",customClass:{popup:"swal-popup",title:"custom-title"}}),setTimeout(()=>{location.reload()},3500)):alert("Error en el registro")}else console.log("Registro Cancelado")}catch(z){U=z.message,k(e(E)),alert("Error en la solicitud: "+U)}}De();var _=ro(),Y=o(a(_),2),H=o(a(Y),2),F=a(H);F.value=F.__value="";var Z=o(F);Ce(Z,1,()=>e(L),Ae,(z,P)=>{var T=so(),q={},R=a(T,!0);t(T),ue(()=>{q!==(q=e(P).id)&&(T.value=(T.__value=e(P).id)??""),X(R,e(P).nombre)}),A(z,T)}),t(H);var B=o(H,2),m=o(a(B),4);Ce(m,5,()=>e(p),Ae,(z,P)=>{var T=lo(),q=a(T);ye(q);var R,te=o(q);t(T),ue(()=>{Ze(q,"id",`modulo-${e(P).id??""}`),R!==(R=e(P).id)&&(q.value=(q.__value=e(P).id)??""),X(te,` ${e(P).nombre??""}`)}),ht(s,[],q,()=>(e(P).id,e(b)),V=>l(b,V)),A(z,T)}),t(m),t(B),Be(2),t(Y);var y=o(Y,2);yt(y,z=>l(E,z),()=>e(E)),t(_),J("submit",Y,Ye(g)),A(c,_),Oe()}var no=C('<button class="overlay svelte-1ig2dkm" aria-label="Cerrar menú"></button>'),co=C(`<div class="admin-welcome svelte-1ig2dkm"><h1 class="svelte-1ig2dkm">👋 ¡Bienvenido, Administrador!</h1> <p class="subtitle svelte-1ig2dkm">Este panel te permite tener el control total del sistema
                    para apoyar a las personas ciegas con eficiencia y
                    seguridad.</p></div>`),vo=C('<div class="mobile-layout svelte-1ig2dkm"><header class="mobile-header svelte-1ig2dkm"><button class="menu-button svelte-1ig2dkm"><i class="bi bi-list svelte-1ig2dkm"></i></button> <h1 class="svelte-1ig2dkm">Admin</h1> <div class="header-spacer svelte-1ig2dkm"></div></header> <div><nav class="svelte-1ig2dkm"><button class="svelte-1ig2dkm"><i class="bi bi-person-add svelte-1ig2dkm"></i> <span class="svelte-1ig2dkm">Registrar Usuario</span></button> <button class="svelte-1ig2dkm"><i class="bi bi-file-earmark-spreadsheet svelte-1ig2dkm"></i> <span class="svelte-1ig2dkm">Reportes</span></button> <button class="svelte-1ig2dkm"><i class="bi bi-geo-alt svelte-1ig2dkm"></i> <span class="svelte-1ig2dkm">Registrar GPS</span></button> <button class="svelte-1ig2dkm"><i class="bi bi-table svelte-1ig2dkm"></i> <span class="svelte-1ig2dkm">Tabla Usuarios</span></button> <button class="svelte-1ig2dkm"><i class="bi bi-table svelte-1ig2dkm"></i> <span class="svelte-1ig2dkm">Tabla Discapacitados</span></button> <button class="svelte-1ig2dkm"><i class="bi bi-person-badge svelte-1ig2dkm"></i> <span class="svelte-1ig2dkm">Registrar Roles</span></button> <button class="svelte-1ig2dkm"><i class="bi bi-stack svelte-1ig2dkm"></i> <span class="svelte-1ig2dkm">Registrar Módulos</span></button> <button class="svelte-1ig2dkm"><i class="bi bi-shield-lock svelte-1ig2dkm"></i> <span class="svelte-1ig2dkm">Asignar Módulo</span></button> <button class="svelte-1ig2dkm"><i class="bi bi-graph-up svelte-1ig2dkm"></i> <span class="svelte-1ig2dkm">Tablero</span></button> <button class="svelte-1ig2dkm"><i class="bi bi-map svelte-1ig2dkm"></i> <span class="svelte-1ig2dkm">Ubicaciones</span></button> <button class="logout svelte-1ig2dkm"><i class="bi bi-power svelte-1ig2dkm"></i> <span class="svelte-1ig2dkm">Cerrar Sesión</span></button></nav></div> <!> <main class="mobile-content svelte-1ig2dkm"><!> <div class="loader-container svelte-1ig2dkm"><div class="loader-text svelte-1ig2dkm"><span class="svelte-1ig2dkm">S</span> <span class="svelte-1ig2dkm">e</span> <span class="svelte-1ig2dkm">n</span> <span class="svelte-1ig2dkm">s</span> <span class="svelte-1ig2dkm">u</span> <span class="svelte-1ig2dkm">T</span> <span class="svelte-1ig2dkm">r</span> <span class="svelte-1ig2dkm">a</span> <span class="svelte-1ig2dkm">c</span> <span class="svelte-1ig2dkm">k</span></div></div></main></div> <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet" class="svelte-1ig2dkm">',1);function Eo(c,d){Re(d,!1);let s=O("X"),v=O(),i=O(!1);function b(){ct(v,e(v).style.display="flex")}function w(){ct(v,e(v).style.display="none")}function p(){l(i,!e(i))}function L(){localStorage.clear(),Wt("/")}function U(){l(s,"registro_usuario"),l(i,!1)}function E(){l(s,"reportes"),l(i,!1)}function ee(){l(s,"registro_gps"),l(i,!1)}function k(){l(s,"tabla_usuarios"),l(i,!1)}function g(){l(s,"tabla_discapacitados"),l(i,!1)}function _(){l(s,"registro_roles"),l(i,!1)}function Y(){l(s,"registro_modulos"),l(i,!1)}function H(){l(s,"modulos_por_rol"),l(i,!1)}function F(){l(s,"tablero"),l(i,!1)}function Z(){l(s,"historial_ubicaciones"),l(i,!1)}De();var B=vo(),m=qe(B),y=a(m),z=a(y);Be(4),t(y);var P=o(y,2),T=a(P),q=a(T),R=o(q,2),te=o(R,2),V=o(te,2),ae=o(V,2),ie=o(ae,2),le=o(ie,2),re=o(le,2),ne=o(re,2),de=o(ne,2),u=o(de,2);t(T),t(P);var N=o(P,2);{var $=r=>{var S=no();J("click",S,p),A(r,S)};oe(N,r=>{e(i)&&r($)})}var D=o(N,2),f=a(D);{var I=r=>{var S=co();A(r,S)},n=(r,S)=>{{var M=h=>{oa(h,{$$events:{showLoader:b,hideLoader:w}})},G=(h,j)=>{{var K=se=>{ca(se,{})},Q=(se,W)=>{{var me=pe=>{ua(pe,{$$events:{showLoader:b,hideLoader:w}})},ce=(pe,he)=>{{var Ie=fe=>{wa(fe,{})},ge=(fe,we)=>{{var Ee=ve=>{Ia(ve,{})},Te=(ve,_e)=>{{var je=be=>{Ua(be,{$$events:{showLoader:b,hideLoader:w}})},Ge=(be,xe)=>{{var Se=Pe=>{Va(Pe,{$$events:{showLoader:b,hideLoader:w}})},Ne=(Pe,Qe)=>{{var Ue=He=>{io(He,{})},$e=(He,xt)=>{{var kt=Fe=>{Ya(Fe)},Bt=(Fe,St)=>{{var At=Ke=>{oo(Ke,{})};oe(Fe,Ke=>{e(s)==="historial_ubicaciones"&&Ke(At)},St)}};oe(He,Fe=>{e(s)==="tablero"?Fe(kt):Fe(Bt,!1)},xt)}};oe(Pe,He=>{e(s)==="modulos_por_rol"?He(Ue):He($e,!1)},Qe)}};oe(be,Pe=>{e(s)==="registro_modulos"?Pe(Se):Pe(Ne,!1)},xe)}};oe(ve,be=>{e(s)==="registro_roles"?be(je):be(Ge,!1)},_e)}};oe(fe,ve=>{e(s)==="tabla_discapacitados"?ve(Ee):ve(Te,!1)},we)}};oe(pe,fe=>{e(s)==="tabla_usuarios"?fe(Ie):fe(ge,!1)},he)}};oe(se,pe=>{e(s)==="registro_gps"?pe(me):pe(ce,!1)},W)}};oe(h,se=>{e(s)==="reportes"?se(K):se(Q,!1)},j)}};oe(r,h=>{e(s)==="registro_usuario"?h(M):h(G,!1)},S)}};oe(f,r=>{e(s)==="X"?r(I):r(n,!1)})}var x=o(f,2);yt(x,r=>l(v,r),()=>e(v)),t(D),t(m),Be(2),ue(()=>{Ze(z,"aria-label",e(i)?"Cerrar menú":"Abrir menú"),Je(P,1,`mobile-sidebar ${e(i)?"open":""}`,"svelte-1ig2dkm")}),J("click",z,p),J("click",q,U),J("click",R,E),J("click",te,ee),J("click",V,k),J("click",ae,g),J("click",ie,_),J("click",le,Y),J("click",re,H),J("click",ne,F),J("click",de,Z),J("click",u,L),A(c,B),Oe()}export{Eo as component};
