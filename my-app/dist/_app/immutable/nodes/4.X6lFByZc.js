import{t as S,a as B}from"../chunks/nQzwvEh3.js";import{i as Oe}from"../chunks/BnUuZUax.js";import{h as De,a as Bt,b as St,l as e,ai as It,c as At,r as ot,s as Qe,d as Ke,g as Je,D as Ct,e as ct,f as dt,p as Dt,J as vt,Q as Rt,v as N,aw as st,ax as et,N as rt,ay as tt,az as lt,aA as Ot,I as jt,aB as Nt,a6 as Mt,aC as at,aD as Lt,B as Pt,A as zt,L as Ut,aE as ut,q as qt,aF as Gt,i as mt,Z as $t,k as je,w as l,n as o,o as a,a7 as me,aG as pt,t,x as Ee,m as Ne,y as qe,aH as Jt,aI as Ht,aJ as it}from"../chunks/BmWwM6au.js";import{l as Ft,e as q}from"../chunks/JbnazOOx.js";import{i as ne}from"../chunks/B8BZ22IT.js";import{r as _e,b as xe,a as bt,s as ft}from"../chunks/BeOCEM56.js";import{b as gt}from"../chunks/C1ormfhT.js";import{s as K}from"../chunks/BK6br9vx.js";import{o as Re,c as Ze}from"../chunks/DTJiLZCU.js";function ke(c,s){return s}function Vt(c,s,r,i){for(var d=[],p=s.length,u=0;u<p;u++)Ot(s[u].e,d,!0);var g=p>0&&d.length===0&&r!==null;if(g){var R=r.parentNode;jt(R),R.append(r),i.clear(),Ue(c,s[0].prev,s[p-1].next)}Nt(d,()=>{for(var M=0;M<p;M++){var y=s[M];g||(i.delete(y.k),Ue(c,y.prev,y.next)),Mt(y.e,!g)}})}function Be(c,s,r,i,d,p=null){var u=c,g={flags:s,items:new Map,first:null},R=(s&ut)!==0;if(R){var M=c;u=De?Qe(zt(M)):M.appendChild(Ut())}De&&Bt();var y=null,oe=!1,E=It(()=>{var b=r();return Rt(b)?b:b==null?[]:vt(b)});St(()=>{var b=e(E),m=b.length;if(oe&&m===0)return;oe=m===0;let H=!1;if(De){var G=u.data===At;G!==(m===0)&&(u=ot(),Qe(u),Ke(!1),H=!0)}if(De){for(var F=null,X,T=0;T<m;T++){if(Je.nodeType===8&&Je.data===Ct){u=Je,H=!0,Ke(!1);break}var v=b[T],_=i(v,T);X=_t(Je,g,F,null,v,_,T,d,s,r),g.items.set(_,X),F=X}m>0&&Qe(ot())}De||Zt(b,g,u,d,s,i,r),p!==null&&(m===0?y?ct(y):y=dt(()=>p(u)):y!==null&&Dt(y,()=>{y=null})),H&&Ke(!0),e(E)}),De&&(u=Je)}function Zt(c,s,r,i,d,p,u){var V,ee,re,ie;var g=(d&Gt)!==0,R=(d&(at|tt))!==0,M=c.length,y=s.items,oe=s.first,E=oe,b,m=null,H,G=[],F=[],X,T,v,_;if(g)for(_=0;_<M;_+=1)X=c[_],T=p(X,_),v=y.get(T),v!==void 0&&((V=v.a)==null||V.measure(),(H??(H=new Set)).add(v));for(_=0;_<M;_+=1){if(X=c[_],T=p(X,_),v=y.get(T),v===void 0){var A=E?E.e.nodes_start:r;m=_t(A,s,m,m===null?s.first:m.next,X,T,_,i,d,u),y.set(T,m),G=[],F=[],E=m.next;continue}if(R&&Yt(v,X,_,d),(v.e.f&et)!==0&&(ct(v.e),g&&((ee=v.a)==null||ee.unfix(),(H??(H=new Set)).delete(v))),v!==E){if(b!==void 0&&b.has(v)){if(G.length<F.length){var L=F[0],w;m=L.prev;var P=G[0],C=G[G.length-1];for(w=0;w<G.length;w+=1)nt(G[w],L,r);for(w=0;w<F.length;w+=1)b.delete(F[w]);Ue(s,P.prev,C.next),Ue(s,m,P),Ue(s,C,L),E=L,m=C,_-=1,G=[],F=[]}else b.delete(v),nt(v,E,r),Ue(s,v.prev,v.next),Ue(s,v,m===null?s.first:m.next),Ue(s,m,v),m=v;continue}for(G=[],F=[];E!==null&&E.k!==T;)(E.e.f&et)===0&&(b??(b=new Set)).add(E),F.push(E),E=E.next;if(E===null)continue;v=E}G.push(v),m=v,E=v.next}if(E!==null||b!==void 0){for(var se=b===void 0?[]:vt(b);E!==null;)(E.e.f&et)===0&&se.push(E),E=E.next;var $=se.length;if($>0){var le=(d&ut)!==0&&M===0?r:null;if(g){for(_=0;_<$;_+=1)(re=se[_].a)==null||re.measure();for(_=0;_<$;_+=1)(ie=se[_].a)==null||ie.fix()}Vt(s,se,le,y)}}g&&qt(()=>{var Z;if(H!==void 0)for(v of H)(Z=v.a)==null||Z.apply()}),rt.first=s.first&&s.first.e,rt.last=m&&m.e}function Yt(c,s,r,i){(i&at)!==0&&lt(c.v,s),(i&tt)!==0?lt(c.i,r):c.i=r}function _t(c,s,r,i,d,p,u,g,R,M){var y=(R&at)!==0,oe=(R&Lt)===0,E=y?oe?N(d):st(d):d,b=(R&tt)===0?u:st(u),m={i:b,v:E,k:p,a:null,e:null,prev:r,next:i};try{return m.e=dt(()=>g(c,E,b,M),De),m.e.prev=r&&r.e,m.e.next=i&&i.e,r===null?s.first=m:(r.next=m,r.e.next=m.e),i!==null&&(i.prev=m,i.e.prev=m.e),m}finally{}}function nt(c,s,r){for(var i=c.next?c.next.e.nodes_start:r,d=s?s.e.nodes_start:r,p=c.e.nodes_start;p!==i;){var u=Pt(p);d.before(p),p=u}}function Ue(c,s,r){s===null?c.first=r:(s.next=r,s.e.next=r&&r.e),r!==null&&(r.prev=s,r.e.prev=s&&s.e)}function Wt(c,s,r){var i=c==null?"":""+c;return s&&(i=i?i+" "+s:s),i===""?null:i}function Ge(c,s,r,i,d,p){var u=c.__className;if(De||u!==r||u===void 0){var g=Wt(r,i);(!De||g!==c.getAttribute("class"))&&(g==null?c.removeAttribute("class"):c.className=g),c.__className=r}return p}function ht(c,s,r){if(c.multiple)return Qt(c,s);for(var i of c.options){var d=He(i);if($t(d,s)){i.selected=!0;return}}(!r||s!==void 0)&&(c.selectedIndex=-1)}function Xt(c,s){mt(()=>{var r=new MutationObserver(()=>{var i=c.__value;ht(c,i)});return r.observe(c,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{r.disconnect()}})}function yt(c,s,r=s){var i=!0;Ft(c,"change",d=>{var p=d?"[selected]":":checked",u;if(c.multiple)u=[].map.call(c.querySelectorAll(p),He);else{var g=c.querySelector(p)??c.querySelector("option:not([disabled])");u=g&&He(g)}r(u)}),mt(()=>{var d=s();if(ht(c,d,i),i&&d===void 0){var p=c.querySelector(":checked");p!==null&&(d=He(p),r(d))}c.__value=d,i=!1}),Xt(c)}function Qt(c,s){for(var r of c.options)r.selected=~s.indexOf(He(r))}function He(c){return"__value"in c?c.__value:c.value}function Fe(c){return function(...s){var r=s[0];return r.preventDefault(),c==null?void 0:c.apply(this,s)}}var Kt=S("<option> </option>"),ea=S('<div class="form-wrapper svelte-3crwtj"><div class="form-title svelte-3crwtj">REGISTRO DE USUARIOS</div> <form class="vibrant-form svelte-3crwtj"><input class="vibrant-input svelte-3crwtj" placeholder="Nombre" type="text" autocomplete="off" required> <input class="vibrant-input svelte-3crwtj" placeholder="Apellido" type="text" autocomplete="off" required> <input class="vibrant-input svelte-3crwtj" placeholder="Documento" type="text" autocomplete="off" required> <input class="vibrant-input svelte-3crwtj" placeholder="Teléfono" type="text" autocomplete="off" required> <input class="vibrant-input svelte-3crwtj" placeholder="Correo Electrónico" type="email" autocomplete="off" required> <input class="vibrant-input svelte-3crwtj" placeholder="Contraseña" type="password" autocomplete="off" required> <input class="vibrant-input svelte-3crwtj" id="Confirmar_Contraseña" placeholder="Confirmar Contraseña" type="password" autocomplete="off" required> <select id="roles" class="vibrant-select svelte-3crwtj"><option disabled selected>Seleccione el Rol:</option><!></select> <button class="vibrant-button svelte-3crwtj">REGISTRAR USUARIO</button></form></div>');function ta(c,s){je(s,!1);let r=N(""),i=N(""),d=N(""),p="",u=N(""),g=N(""),R=N(""),M=N(""),y=N([]),oe=!0,E=null;Re(async()=>{const se=await(await fetch("https://proyectomascotas.onrender.com/get_roles/")).json();l(y,se.resultado),console.log(e(y))});const b=Ze();async function m(){if(p=document.getElementById("Confirmar_Contraseña").value,p===e(d))try{const C=await Swal.fire({title:"¿Estás seguro?",text:"¡Desea registrar un nuevo Usuario a SensuTrack!?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sí, registrar!",customClass:{popup:"swal-popup",title:"custom-title"}}),se=parseInt(e(M),10);if(isNaN(se)){alert("Por favor, seleccione un rol válido."),b("hideLoader");return}if(C.isConfirmed){b("showLoader");const le=await(await fetch("https://proyectomascotas.onrender.com/create_user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e(R),password:e(d),nombre:e(r),apellido:e(i),documento:e(u),telefono:e(g),id_rol:e(M),estado:oe})})).json();console.log("Respuesta del servidor:",le),b("hideLoader"),le.resultado==="Usuario creado"?Swal.fire({title:"¡Registrado!,¡Bienvenid@ "+e(r)+"!",icon:"success",customClass:{popup:"swal-popup",title:"custom-title"}}):le.resultado==="El usuario ya existe"&&Swal.fire({icon:"error",title:"Error",text:"Lo sentimos, el usuario ya existe."})}else Swal.fire({title:"REGISTRO CANCELADO",icon:"error",customClass:{popup:"swal-popup",title:"custom-title"}})}catch(C){E=C.message,b("hideLoader"),alert("Error en la solicitud: "+E)}else Swal.fire({title:"Parece que ha ocurrido un error",text:"No son iguales las contraseñas, porfavor intente de nuevo :]",icon:"error",customClass:{popup:"swal-popup",title:"custom-title"}})}Oe();var H=ea(),G=o(a(H),2),F=a(G);_e(F);var X=o(F,2);_e(X);var T=o(X,2);_e(T);var v=o(T,2);_e(v);var _=o(v,2);_e(_);var A=o(_,2);_e(A);var L=o(A,4);me(()=>{e(M),pt(()=>{e(y)})});var w=a(L);w.value=w.__value="";var P=o(w);Be(P,1,()=>e(y),ke,(C,se)=>{var $=Kt(),le={},V=a($,!0);t($),me(()=>{le!==(le=e(se).id)&&($.value=($.__value=e(se).id)??""),K(V,e(se).nombre)}),B(C,$)}),t(L),Ee(2),t(G),t(H),xe(F,()=>e(r),C=>l(r,C)),xe(X,()=>e(i),C=>l(i,C)),xe(T,()=>e(u),C=>l(u,C)),xe(v,()=>e(g),C=>l(g,C)),xe(_,()=>e(R),C=>l(R,C)),xe(A,()=>e(d),C=>l(d,C)),yt(L,()=>e(M),C=>l(M,C)),q("submit",G,Fe(m)),B(c,H),Ne()}var aa=S('<div class="vibrant-loader svelte-1cmc1uo"><div class="loader-bar svelte-1cmc1uo"></div></div>'),oa=S('<p class="error-message svelte-1cmc1uo"> </p>'),sa=S('<tr class="svelte-1cmc1uo"><td class="svelte-1cmc1uo"> </td><td class="svelte-1cmc1uo"> </td><td class="svelte-1cmc1uo"> </td><td class="svelte-1cmc1uo"> </td><td class="svelte-1cmc1uo"> </td><td class="svelte-1cmc1uo"> </td><td class="svelte-1cmc1uo"><span> </span></td></tr>'),ra=S('<h3 class="results-title svelte-1cmc1uo">Discapacitados Registrados</h3> <div class="table-container svelte-1cmc1uo"><table class="vibrant-table svelte-1cmc1uo"><thead class="svelte-1cmc1uo"><tr class="svelte-1cmc1uo"><th class="svelte-1cmc1uo">Id</th><th class="svelte-1cmc1uo">Nombre</th><th class="svelte-1cmc1uo">Género</th><th class="svelte-1cmc1uo">Tipo de Ceguera</th><th class="svelte-1cmc1uo">Cuidador</th><th class="svelte-1cmc1uo">Fecha y Hora</th><th class="svelte-1cmc1uo">Estado</th></tr></thead><tbody class="svelte-1cmc1uo"></tbody></table></div> <div class="export-action svelte-1cmc1uo"><button class="export-button svelte-1cmc1uo"><i class="bi bi-download svelte-1cmc1uo"></i> Exportar como PDF</button></div>',1),la=S('<div class="report-container svelte-1cmc1uo"><h2 class="report-title svelte-1cmc1uo">Reportes</h2> <div class="report-section svelte-1cmc1uo"><select class="vibrant-select svelte-1cmc1uo" id="opcion" required><option class="svelte-1cmc1uo">Discapacitados</option><option class="svelte-1cmc1uo">Usuarios</option><option class="svelte-1cmc1uo">Otro</option></select></div> <div class="date-range svelte-1cmc1uo"><div class="date-input svelte-1cmc1uo"><label for="desde_ciegos" class="vibrant-label svelte-1cmc1uo">Desde:</label> <input type="date" id="desde_ciegos" class="vibrant-date svelte-1cmc1uo"></div> <div class="date-input svelte-1cmc1uo"><label for="hasta_ciegos" class="vibrant-label svelte-1cmc1uo">Hasta:</label> <input type="date" id="hasta_ciegos" class="vibrant-date svelte-1cmc1uo"></div></div> <div class="report-action svelte-1cmc1uo"><button class="vibrant-button svelte-1cmc1uo"><i class="bi bi-file-earmark-text svelte-1cmc1uo"></i> Generar Reporte</button></div></div> <div class="report-results svelte-1cmc1uo" id="MostrarReporte"><!></div> <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet" class="svelte-1cmc1uo">',1);function ia(c,s){je(s,!1);let r=N([]),i=N(!1),d=N(null),p,u="",g="",R=N(!1);async function M(){try{if(l(i,!0),l(R,!1),l(d,null),p=document.getElementById("opcion").value,u=document.getElementById("desde_ciegos").value,g=document.getElementById("hasta_ciegos").value,console.log({fecha1:u,fecha2:g}),!u||!g){Swal.fire({icon:"error",title:"Error",text:"Por favor, selecciona ambas fechas."});return}const w=await fetch("https://proyectomascotas.onrender.com/Ciegos_Report",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fecha1:u,fecha2:g})});if(!w.ok)throw new Error("Error al cargar los datos");const P=await w.json();console.log(P),l(r,P.resultado),l(R,!0),setTimeout(()=>globalThis.$("#myTable").DataTable(),0)}catch(w){l(d,w.message),console.error("Error al generar reporte:",w)}finally{l(i,!1)}}function y(){const{jsPDF:w}=window.jspdf,P=new w,C=["Id","Nombre","Género","Tipo de Ceguera","Cuidador","Fecha","Estado"],se=e(r).map($=>[$.id,$.nombre,$.genero,$.tipo_ceguera,$.nombre_cuidador,$.fecha,$.estado]);P.text(20,20,"Reporte de discapacitados visuales registrados en la página"),P.autoTable(C,se,{startY:30}),P.save("ReporteDiscapacitados.pdf"),Swal.fire({position:"center",icon:"success",title:"Se exportó de manera exitosa",showConfirmButton:!1,timer:1500})}Oe();var oe=la(),E=qe(oe),b=o(a(E),2),m=a(b),H=a(m);H.value=H.__value="1";var G=o(H);G.value=G.__value="2";var F=o(G);F.value=F.__value="3",t(m),t(b);var X=o(b,4),T=a(X);t(X),t(E);var v=o(E,2),_=a(v);{var A=w=>{var P=aa();B(w,P)},L=(w,P)=>{{var C=$=>{var le=oa(),V=a(le);t(le),me(()=>K(V,`Error: ${e(d)??""}`)),B($,le)},se=($,le)=>{{var V=ee=>{var re=ra(),ie=o(qe(re),2),Z=a(ie),h=o(a(Z));Be(h,5,()=>e(r),ke,(te,I)=>{var J=sa(),W=a(J),x=a(W,!0);t(W);var n=o(W),O=a(n,!0);t(n);var z=o(n),D=a(z,!0);t(z);var f=o(z),j=a(f,!0);t(f);var Y=o(f),Q=a(Y,!0);t(Y);var ce=o(Y),ae=a(ce,!0);t(ce);var ve=o(ce),de=a(ve),fe=a(de,!0);t(de),t(ve),t(J),me(()=>{K(x,e(I).id),K(O,e(I).nombre),K(D,e(I).genero),K(j,e(I).tipo_ceguera),K(Q,e(I).nombre_cuidador),K(ae,e(I).fecha),Ge(de,1,`status-${e(I).estado?"active":"inactive"}`,"svelte-1cmc1uo"),K(fe,e(I).estado?"Activo":"Inactivo")}),B(te,J)}),t(h),t(Z),t(ie);var k=o(ie,2),U=a(k);t(k),q("click",U,y),B(ee,re)};ne($,ee=>{e(R)&&ee(V)},le)}};ne(w,$=>{e(d)?$(C):$(se,!1)},P)}};ne(_,w=>{e(i)?w(A):w(L,!1)})}t(v),Ee(2),q("click",T,M),B(c,oe),Ne()}var na=S('<option class="svelte-tkblz5"> </option>'),ca=S('<div class="gps-container svelte-tkblz5"><h2 class="gps-title svelte-tkblz5">REGISTRAR GPS</h2> <form class="vibrant-form svelte-tkblz5"><div class="input-group svelte-tkblz5"><p class="input-description svelte-tkblz5">Registre el Número de Serie del GPS:</p> <input id="numero_serie" type="text" class="vibrant-input svelte-tkblz5" placeholder="Ingrese el Serial del GPS" required></div> <div class="input-group svelte-tkblz5"><p class="input-description svelte-tkblz5">Usuarios Discapacitados Registrados:</p> <select id="ciegos" class="vibrant-select svelte-tkblz5" required><option disabled selected class="svelte-tkblz5">Selecciona el Discapacitado que tendrá el GPS</option><!></select></div> <button class="vibrant-button svelte-tkblz5"><i class="bi bi-check-circle-fill svelte-tkblz5"></i> CONFIRMAR REGISTRO</button></form></div> <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet" class="svelte-tkblz5">',1);function da(c,s){je(s,!1);let r=N(""),i=100,d=N(""),p=!0,u=null,g=null,R=N({});Re(async()=>{const _=await(await fetch("https://proyectomascotas.onrender.com/get_discapacitadosV_SIN_GPS/")).json();l(R,_.resultado),console.log(e(R))});const M=Ze();async function y(){try{M("showLoader");const v=await fetch("https://proyectomascotas.onrender.com/create_gps",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({numero_serie:e(r),nivel_bateria:i,id_ciego_vinculado:parseInt(e(d)),estado:p})}),_=await v.json();if(console.log(_),M("hideLoader"),v.ok)u=_.resultado,g=null,l(r,""),l(d,""),Swal.fire({title:"El GPS ha sido Registrado Exitosamente!",icon:"success",confirmButtonText:"OK"});else throw swalWithBootstrapButtons.fire({title:"Parece que ha ocurrido un error",text:"Revise que todo este correcto porfavor :]",icon:"error"}),new Error(_.detail||"Ocurrió un error")}catch(v){g=v.message,M("hideLoader"),u=null}}Oe();var oe=ca(),E=qe(oe),b=o(a(E),2),m=a(b),H=o(a(m),2);_e(H),t(m);var G=o(m,2),F=o(a(G),2);me(()=>{e(d),pt(()=>{e(R)})});var X=a(F);X.value=X.__value="";var T=o(X);Be(T,1,()=>e(R),ke,(v,_)=>{var A=na(),L={},w=a(A,!0);t(A),me(()=>{L!==(L=e(_).id)&&(A.value=(A.__value=e(_).id)??""),K(w,e(_).nombre)}),B(v,A)}),t(F),t(G),Ee(2),t(b),t(E),Ee(2),xe(H,()=>e(r),v=>l(r,v)),yt(F,()=>e(d),v=>l(d,v)),q("submit",b,Fe(y)),B(c,oe),Ne()}var va=S('<div class="mobile-loading svelte-1vxva86"><div class="spinner-border text-primary" role="status"><span class="visually-hidden">Loading...</span></div> <div>Cargando datos...</div></div>'),ua=S('<div class="alert alert-danger text-center"> </div>'),ma=S('<div class="no-results-message svelte-1vxva86"><i class="bi bi-exclamation-circle svelte-1vxva86"></i> No se encontraron resultados</div>'),pa=S('<button class="mobile-btn deactivate svelte-1vxva86"><i class="bi bi-lock"></i> <span>Desactivar</span></button>'),ba=S('<button class="mobile-btn activate svelte-1vxva86"><i class="bi bi-unlock"></i> <span>Activar</span></button>'),fa=S('<tr class="svelte-1vxva86"><td data-label="Usuario" class="svelte-1vxva86"> </td><td data-label="Nombre" class="svelte-1vxva86"> </td><td data-label="Apellido" class="svelte-1vxva86"> </td><td data-label="Documento" class="svelte-1vxva86"> </td><td data-label="Teléfono" class="svelte-1vxva86"> </td><td data-label="Estado" class="text-center svelte-1vxva86"><span> </span></td><td data-label="Acciones" class="text-center svelte-1vxva86"><div class="mobile-actions svelte-1vxva86"><button class="mobile-btn edit svelte-1vxva86"><i class="bi bi-pencil"></i> <span>Editar</span></button> <!></div></td></tr>'),ga=S('<div class="mobile-table-responsive svelte-1vxva86"><table class="mobile-table svelte-1vxva86" id="myTable"><thead class="svelte-1vxva86"><tr class="svelte-1vxva86"><th>Usuario</th><th>Nombre</th><th>Apellido</th><th>Documento</th><th>Teléfono</th><th>Estado</th><th>Acciones</th></tr></thead><tbody></tbody></table></div>'),_a=S(`<div id="Mostrarusuario"><div class="mobile-users-container svelte-1vxva86"><h2 class="mobile-users-title svelte-1vxva86"><i class="bi bi-people-fill me-2"></i>USUARIOS</h2> <div class="mobile-search-container svelte-1vxva86"><i class="bi bi-search svelte-1vxva86"></i> <input type="text" class="mobile-search-input svelte-1vxva86" placeholder="Buscar por nombre, correo o documento..."></div> <!></div></div> <div class="mobile-modal fade svelte-1vxva86" id="nav-listado" role="tabpanel" aria-labelledby="nav-listado-tab"><div class="container text-center"><p class="text-warning"></p></div> <div class="mobile-modal-card svelte-1vxva86"><div class="mobile-modal-header svelte-1vxva86"><h5><b>Editando Usuario</b></h5> <button class="mobile-close-btn svelte-1vxva86" aria-label="Cerrar edición de usuario"><i class="bi bi-x-lg"></i></button></div> <div class="mobile-modal-body svelte-1vxva86"><div class="mobile-form-group svelte-1vxva86"><label for="nombres" class="svelte-1vxva86"><b>Nombre:</b></label> <input type="text" id="nombres" placeholder="Nombres" maxlength="100" readonly="" class="svelte-1vxva86"></div> <div class="mobile-form-group svelte-1vxva86"><label for="apellidos" class="svelte-1vxva86"><b>Apellido:</b></label> <input type="text" id="apellidos" placeholder="Apellidos" readonly="" class="svelte-1vxva86"></div> <div class="mobile-form-group svelte-1vxva86"><label for="documento" class="svelte-1vxva86"><b>Documento:</b></label> <input type="text" id="documento" placeholder="Documento de identidad" readonly="" class="svelte-1vxva86"></div> <div class="mobile-form-group svelte-1vxva86"><label for="telefono" class="svelte-1vxva86"><b>Teléfono:</b></label> <input type="text" id="telefono" placeholder="Teléfono" maxlength="20" readonly="" class="svelte-1vxva86"></div> <div class="mobile-form-group svelte-1vxva86"><label for="correo" class="svelte-1vxva86"><b>Correo:</b></label> <input type="text" id="correo" placeholder="Correo electrónico" readonly="" class="svelte-1vxva86"></div> <div class="mobile-form-group svelte-1vxva86"><label for="estado" class="svelte-1vxva86"><b>Estado:</b></label> <select id="estado" class="svelte-1vxva86"><option>Activar</option><option>Desactivar</option></select></div> <div class="mobile-modal-footer svelte-1vxva86"><p>¡Al terminar de editar, haga clic en actualizar para guardar
                    los cambios!</p> <button class="mobile-update-btn svelte-1vxva86"><b>Actualizar</b></button></div></div></div></div> <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">`,1);function ha(c,s){je(s,!1);let r=N({}),i=N(!0),d=N(null),p=N(!1);Re(async()=>{try{console.log("2");const h=await fetch("https://proyectomascotas.onrender.com/get_users");if(!h.ok)throw new Error("Error al cargar los datos");const k=await h.json();l(r,k.resultado),console.log(e(r)),setTimeout(()=>{globalThis.$("#myTable").DataTable()},0)}catch(h){l(d,h.message)}finally{l(i,!1)}});async function u(){l(p,!1),document.getElementById("nav-listado").setAttribute("class","fade"),document.getElementById("Mostrarusuario").removeAttribute("class"),location.reload()}var g=1;async function R(h,k){l(p,!0),console.log("Editando a "+k);const U=document.getElementById("nav-listado");U.removeAttribute("class"),console.log(U),g=h,console.log(Number.isInteger(g)),console.log(g);let te=document.getElementById("Mostrarusuario");te.setAttribute("class","fade"),console.log(te);const I=te.parentElement;console.log(I),I.insertBefore(U,te),console.log("NO Entra al try de buscar");try{console.log("Entra al try de buscar");const J=await fetch(`https://proyectomascotas.onrender.com/get_user/${g}`,{method:"GET",headers:{"Content-Type":"application/json"}}),W=await J.json();console.log(J),console.log(W),console.log("Buscando al usuario seleccionado"),l(r,W.apellido),console.log(e(r)),document.getElementById("nombres").value=W.nombre,document.getElementById("apellidos").value=W.apellido,document.getElementById("documento").value=W.documento,document.getElementById("telefono").value=W.telefono,document.getElementById("correo").value=W.email,console.log("verificando el estado: "+W.estado);const x=W.estado?"1":"0";document.getElementById("estado").value=x;const n=document.getElementById("nombres");n.removeAttribute("readonly"),n.focus(),document.getElementById("apellidos").removeAttribute("readonly"),document.getElementById("documento").removeAttribute("readonly"),document.getElementById("telefono").removeAttribute("readonly"),document.getElementById("correo").removeAttribute("readonly"),document.getElementById("estado").removeAttribute("readonly")}catch(J){l(d,J.message)}finally{l(i,!1)}}async function M(){console.log(g);let h=document.getElementById("nombres").value,k=document.getElementById("apellidos").value,U=document.getElementById("documento").value,te=document.getElementById("telefono").value,I=document.getElementById("correo").value,J=document.getElementById("estado").value;J=J==="1",console.log("ID DE ESTADO ENVIADO A LA BASE DE DATOS ES "+J);try{console.log("Entra al try de actualzar");const W=await fetch(`https://proyectomascotas.onrender.com/update_user_admin/${g}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:I,nombre:h,apellido:k,documento:U,telefono:te,estado:J})});console.log("Actualizado"),Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:n=>{n.onmouseenter=Swal.stopTimer,n.onmouseleave=Swal.resumeTimer}}).fire({icon:"success",iconColor:"white",color:"white",background:"#00bdff",title:"usuario actualizado con exito"}),setTimeout(()=>{const n=document.getElementById("nav-listado");n.setAttribute("class","fade");let O=document.getElementById("Mostrarusuario");O.removeAttribute("class"),n.parentElement.insertBefore(O,n),location.reload()},3e3)}catch(W){console.error("Error al actualizar el usuario:",W),Swal.fire({icon:"error",title:"Error",text:W.message})}finally{l(i,!1)}}async function y(h){let k=0,U=h,te=k!==0;try{const I=await fetch(`https://proyectomascotas.onrender.com/update_estado_user/${U}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({estado:te})}),J=await I.json();I.ok?(Swal.mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:x=>{x.onmouseenter=Swal.stopTimer,x.onmouseleave=Swal.resumeTimer}}).fire({icon:"error",iconColor:"white",color:"white",background:"#ff4e4e",title:"El Usuario a sido desactivado de manera exitosa"}),setTimeout(()=>{location.reload()},3500)):alert("Error al desactivar: "+J.message||"Error desconocido")}catch(I){alert("Error en la solicitud: "+I.message)}}async function oe(h){let k=1,U=h,te=k===1;try{const I=await fetch(`https://proyectomascotas.onrender.com/update_estado_user/${U}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({estado:te})}),J=await I.json();I.ok?(Swal.mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:x=>{x.onmouseenter=Swal.stopTimer,x.onmouseleave=Swal.resumeTimer}}).fire({icon:"success",iconColor:"#000000",color:"black",background:"#76fa78",title:"El usuario se ha activado de manera exitosa"}),setTimeout(()=>{location.reload()},3500)):alert("Error al Activar: "+J.message||"Error desconocido")}catch(I){alert("Error en la solicitud: "+I.message)}}let E=N([]),b=N("");function m(h,k){if(!k)return h;const U=k.toLowerCase();return h.filter(te=>te.nombre.toLowerCase().includes(U)||te.email.toLowerCase().includes(U)||te.documento.toLowerCase().includes(U)||te.apellido.toLowerCase().includes(U))}function H(h){l(b,h)}Jt(()=>(e(r),e(b)),()=>{l(E,m(e(r),e(b)))}),Ht(),Oe();var G=_a(),F=qe(G),X=a(F),T=o(a(X),2),v=o(a(T),2);t(T);var _=o(T,2);{var A=h=>{var k=va();B(h,k)},L=(h,k)=>{{var U=I=>{var J=ua(),W=a(J,!0);t(J),me(()=>K(W,e(d))),B(I,J)},te=(I,J)=>{{var W=n=>{},x=(n,O)=>{{var z=f=>{var j=ma();B(f,j)},D=f=>{var j=ga(),Y=a(j),Q=o(a(Y));Be(Q,5,()=>e(E),ke,(ce,ae)=>{var ve=fa(),de=a(ve),fe=a(de,!0);t(de);var ue=o(de),he=a(ue,!0);t(ue);var pe=o(ue),Se=a(pe,!0);t(pe);var Ie=o(pe),Me=a(Ie,!0);t(Ie);var be=o(Ie),Le=a(be,!0);t(be);var ge=o(be),ye=a(ge),Ae=a(ye,!0);t(ye),t(ge);var Te=o(ge),Ce=a(Te),Ve=a(Ce),Pe=o(Ve,2);{var Ye=ze=>{var we=pa();q("click",we,()=>y(e(ae).id)),B(ze,we)},We=ze=>{var we=ba();q("click",we,()=>oe(e(ae).id)),B(ze,we)};ne(Pe,ze=>{e(ae).estado?ze(Ye):ze(We,!1)})}t(Ce),t(Te),t(ve),me(()=>{K(fe,e(ae).email),K(he,e(ae).nombre),K(Se,e(ae).apellido),K(Me,e(ae).documento),K(Le,e(ae).telefono),Ge(ye,1,`mobile-badge ${e(ae).estado?"active":"inactive"}`,"svelte-1vxva86"),K(Ae,e(ae).estado?"Activo":"Desactivado")}),q("click",Ve,()=>R(e(ae).id)),B(ce,ve)}),t(Q),t(Y),t(j),B(f,j)};ne(n,f=>{e(E).length===0?f(z):f(D,!1)},O)}};ne(I,n=>{e(p)?n(W):n(x,!1)},J)}};ne(h,I=>{e(d)?I(U):I(te,!1)},k)}};ne(_,h=>{e(i)?h(A):h(L,!1)})}t(X),t(F);var w=o(F,2),P=o(a(w),2),C=a(P),se=o(a(C),2);t(C);var $=o(C,2),le=o(a($),10),V=o(a(le),2),ee=a(V);ee.value=ee.__value="1";var re=o(ee);re.value=re.__value="0",t(V),t(le);var ie=o(le,2),Z=o(a(ie),2);t(ie),t($),t(P),t(w),Ee(2),q("input",v,h=>H(h.target.value)),q("click",se,()=>u()),q("click",Z,M),B(c,G),Ne()}var ya=S('<div class="row justify-content-center text-center"><div class="col-12 mb-2">Cargando datos...</div> <div class="spinner-border text-primary" role="status"><span class="visually-hidden">Loading...</span></div></div>'),wa=S('<div class="alert alert-danger text-center"> </div>'),xa=S('<button class="btn btn-sm btn-outline-danger"><i class="bi bi-lock"></i> <span class="d-none d-md-inline">Desactivar</span></button>'),Ea=S('<button class="btn btn-sm btn-outline-success"><i class="bi bi-unlock"></i> <span class="d-none d-md-inline">Activar</span></button>'),Ta=S('<tr><td> </td><td> </td><td> </td><td class="text-center"><span> </span></td><td class="text-center"><div class="d-flex flex-wrap gap-1 justify-content-center"><button class="btn btn-sm btn-outline-primary"><i class="bi bi-pencil"></i> <span class="d-none d-md-inline">Editar</span></button> <!></div></td></tr>'),ka=S('<div class="table-responsive"><table class="table table-hover table-bordered align-middle" id="myTable"><thead class="thead-light text-center"><tr><th class="px-4 py-2 border">Nombre</th><th class="px-4 py-2 border">Genero</th><th class="px-4 py-2 border">Tipo_Ceguera</th><th class="px-4 py-2 border">Estado</th><th class="px-4 py-2 border">Opcion</th></tr></thead><tbody></tbody></table></div>'),Ba=S(`<div id="MostrarDiscapacitado"><div class="container py-4 bg-light rounded shadow"><h2 class="text-center mb-4 pb-2 border-bottom border-3 border-primary fw-bold"><i class="bi bi-people-fill me-2"></i>Lista de discapacitados</h2> <!></div></div> <div class="fade" id="nav-listado" role="tabpanel" aria-labelledby="nav-listado-tab"><div class="container text-center"><p class="text-warning"></p></div> <div class="card border-dark shadow-lg" style="width: 50%; margin: 5% auto;"><div class="card-header d-flex justify-content-between align-items-center"><h5 class="card-title mb-0"><b>Editando Discapacitado</b></h5> <button class="btn btn-close" aria-label="Cerrar edición de usuario"></button></div> <div class="card-body"><div class="mb-3 row"><label for="nombres" class="col-lg-3 col-form-label"><b>Nombre:</b></label> <div class="col-lg-9"><input type="text" id="nombres" class="form-control" placeholder="Nombres" maxlength="100" readonly=""></div></div> <div class="mb-3 row"><label for="genero" class="col-lg-3 col-form-label"><b>Género:</b></label> <div class="col-lg-9"><input type="text" id="genero" class="form-control" placeholder="Género" readonly=""></div></div> <div class="mb-3 row"><label for="tipo_ceguera" class="col-lg-3 col-form-label"><b>Tipo de Ceguera:</b></label> <div class="col-lg-9"><input type="text" id="tipo_ceguera" class="form-control" placeholder="Tipo de Ceguera" readonly=""></div></div> <div class="mb-3 row"><label for="estado" class="col-lg-3 col-form-label"><b>Estado:</b></label> <div class="col-lg-9"><select id="estado" class="form-control"><option>Activar</option><option>Desactivar</option></select></div></div> <div class="d-flex justify-content-between align-items-center"><div class="col-lg-9 text-muted">¡Al terminar de editar, haga clic en actualizar para guardar
                    los cambios!</div> <div class="col-lg-3 text-end"><button class="btn btn-outline-info"><b>Actualizar</b></button></div></div></div></div></div>`,1);function Sa(c,s){je(s,!1);let r=N({}),i=N(!0),d=N(null);Re(async()=>{try{console.log("2");const V=await fetch("https://proyectomascotas.onrender.com/get_discapacitadosVCOMPLETOS");if(!V.ok)throw new Error("Error al cargar los datos");const ee=await V.json();l(r,ee.resultado),console.log(e(r)),setTimeout(()=>{globalThis.$("#myTable").DataTable()},0)}catch(V){l(d,V.message)}finally{l(i,!1)}});async function p(){document.getElementById("nav-listado").setAttribute("class","fade"),document.getElementById("MostrarDiscapacitado").removeAttribute("class"),location.reload()}var u=1;async function g(V,ee){console.log("Editando a "+ee);const re=document.getElementById("nav-listado");re.removeAttribute("class"),console.log(re),u=V,console.log(Number.isInteger(u)),console.log(u);let ie=document.getElementById("MostrarDiscapacitado");ie.setAttribute("class","fade"),console.log(ie);const Z=ie.parentElement;console.log(Z),Z.insertBefore(re,ie),console.log("NO Entra al try de buscar");try{console.log("Entra al try de buscar");const h=await fetch(`https://proyectomascotas.onrender.com/get_discapacitadoV/${u}`,{method:"GET",headers:{"Content-Type":"application/json"}}),k=await h.json();console.log(h),console.log(k),console.log("Buscando al usuario seleccionado"),l(r,k.nombre),console.log(e(r)),document.getElementById("nombres").value=k.nombre,document.getElementById("genero").value=k.id_genero_discapacitado,document.getElementById("tipo_ceguera").value=k.id_tipo_ceguera,console.log("verificando el estado: "+k.estado);const U=k.estado?"1":"0";document.getElementById("estado").value=U;const te=document.getElementById("nombres");te.removeAttribute("readonly"),te.focus(),document.getElementById("genero").removeAttribute("readonly"),document.getElementById("tipo_ceguera").removeAttribute("readonly"),document.getElementById("estado").removeAttribute("readonly")}catch(h){l(d,h.message)}finally{l(i,!1)}}async function R(){console.log(u);let V=document.getElementById("nombres").value,ee=document.getElementById("genero").value,re=document.getElementById("tipo_ceguera").value,ie=document.getElementById("estado").value;console.log("ID DE ESTADO ENVIADO A LA BASE DE DATOS ES "+ie);try{console.log("Entra al try de actualzar");const Z=await fetch(`https://proyectomascotas.onrender.com/update_user/${u}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({nombre:V,genero:ee,tipo_ceguera:re,estado:ie})});console.log("Actualizado"),Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:k=>{k.onmouseenter=Swal.stopTimer,k.onmouseleave=Swal.resumeTimer}}).fire({icon:"success",iconColor:"white",color:"white",background:"#00bdff",title:"Discapacitado actualizado con exito"}),setTimeout(()=>{const k=document.getElementById("nav-listado");k.setAttribute("class","fade");let U=document.getElementById("MostrarDiscapacitado");U.removeAttribute("class"),k.parentElement.insertBefore(U,k),location.reload()},3e3)}catch(Z){l(d,Z.message)}finally{l(i,!1)}}async function M(V){let ee=0,re=V,ie=ee!==0;try{const Z=await fetch(`https://proyectomascotas.onrender.com/update_estado_discapacitado/${re}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({estado:ie})}),h=await Z.json();Z.ok?(Swal.mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:U=>{U.onmouseenter=Swal.stopTimer,U.onmouseleave=Swal.resumeTimer}}).fire({icon:"error",iconColor:"white",color:"white",background:"#ff4e4e",title:"El Discapacitado a sido desactivado de manera exitosa"}),setTimeout(()=>{location.reload()},3500)):alert("Error al desactivar: "+h.message||"Error desconocido")}catch(Z){alert("Error en la solicitud: "+Z.message)}}async function y(V){let ee=1,re=V,ie=ee===1;try{const Z=await fetch(`https://proyectomascotas.onrender.com/update_estado_discapacitado/${re}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({estado:ie})}),h=await Z.json();Z.ok?(Swal.mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:U=>{U.onmouseenter=Swal.stopTimer,U.onmouseleave=Swal.resumeTimer}}).fire({icon:"success",iconColor:"#000000",color:"black",background:"#76fa78",title:"El Discapacitado se ha activado de manera exitosa"}),setTimeout(()=>{location.reload()},3500)):alert("Error al Activar: "+h.message||"Error desconocido")}catch(Z){alert("Error en la solicitud: "+Z.message)}}Oe();var oe=Ba(),E=qe(oe),b=a(E),m=o(a(b),2);{var H=V=>{var ee=ya();B(V,ee)},G=(V,ee)=>{{var re=Z=>{var h=wa(),k=a(h,!0);t(h),me(()=>K(k,e(d))),B(Z,h)},ie=Z=>{var h=ka(),k=a(h),U=o(a(k));Be(U,5,()=>e(r),ke,(te,I)=>{var J=Ta(),W=a(J),x=a(W,!0);t(W);var n=o(W),O=a(n,!0);t(n);var z=o(n),D=a(z,!0);t(z);var f=o(z),j=a(f),Y=a(j,!0);t(j),t(f);var Q=o(f),ce=a(Q),ae=a(ce),ve=o(ae,2);{var de=ue=>{var he=xa();q("click",he,()=>M(e(I).id)),B(ue,he)},fe=ue=>{var he=Ea();q("click",he,()=>y(e(I).id)),B(ue,he)};ne(ve,ue=>{e(I).estado?ue(de):ue(fe,!1)})}t(ce),t(Q),t(J),me(()=>{K(x,e(I).nombre),K(O,e(I).genero),K(D,e(I).tipo_ceguera),Ge(j,1,`badge ${e(I).estado?"bg-success":"bg-danger"}`),K(Y,e(I).estado?"Activo":"Desactivado")}),q("click",ae,()=>g(e(I).id,e(I).nombre)),B(te,J)}),t(U),t(k),t(h),B(Z,h)};ne(V,Z=>{e(d)?Z(re):Z(ie,!1)},ee)}};ne(m,V=>{e(i)?V(H):V(G,!1)})}t(b),t(E);var F=o(E,2),X=o(a(F),2),T=a(X),v=o(a(T),2);t(T);var _=o(T,2),A=o(a(_),6),L=o(a(A),2),w=a(L),P=a(w);P.value=P.__value="1";var C=o(P);C.value=C.__value="0",t(w),t(L),t(A);var se=o(A,2),$=o(a(se),2),le=a($);t($),t(se),t(_),t(X),t(F),q("click",v,()=>p()),q("click",le,R),B(c,oe),Ne()}var Ia=S('<div class="row justify-content-center text-center"><div class="col-12 mb-2">Cargando datos...</div> <div class="spinner-border text-primary" role="status"><span class="visually-hidden">Loading...</span></div></div>'),Aa=S('<div class="alert alert-danger text-center"> </div>'),Ca=S('<button class="btn btn-sm btn-outline-danger"><i class="bi bi-lock"></i> <span class="d-none d-md-inline">Desactivar</span></button>'),Da=S('<button class="btn btn-sm btn-outline-success"><i class="bi bi-unlock"></i> <span class="d-none d-md-inline">Activar</span></button>'),Ra=S('<tr><td> </td><td class="text-center"><span> </span></td><td class="text-center"><div class="d-flex flex-wrap gap-1 justify-content-center"><button class="btn btn-sm btn-outline-primary"><i class="bi bi-pencil"></i> <span class="d-none d-md-inline">Editar</span></button> <!></div></td></tr>'),Oa=S('<div class="table-responsive"><table class="table table-hover table-bordered align-middle" id="myTable"><thead class="thead-light text-center"><tr><th>Nombre</th><th>Estado</th><th>Opciones</th></tr></thead><tbody></tbody></table></div>'),ja=S('<label class="checkbox-label svelte-1stzg1k"><input type="checkbox"> </label>'),Na=S(`<div class="wrapper svelte-1stzg1k"><div class="title small-title svelte-1stzg1k" style="color: dodgerblue;">REGISTRO DE ROLES</div> <form class="class-form svelte-1stzg1k"><input class="form__input small-input svelte-1stzg1k" placeholder="Nombre del Rol" type="text" required> <button class="flip-card__btn small-btn svelte-1stzg1k">Confirmar</button></form></div> <div id="MostrarRoles"><div class="container py-4 bg-light rounded shadow"><h2 class="text-center mb-4 pb-2 border-bottom border-3 border-primary fw-bold"><i class="bi bi-diagram-3 me-2"></i> Lista de Roles</h2> <!></div></div> <div class="fade" id="nav-listado" role="tabpanel" aria-labelledby="nav-listado-tab"><div class="container text-center"><p class="text-orange"></p></div> <div class="card border-dark shadow" style="width: 60%; margin-left: 20%;"><div class="card-header row g-2"><h5 class="card-title col-lg-11"><b>Editando Rol</b></h5> <button class="btn btn-close col-lg-1" aria-label="Cerrar edición de usuario"></button></div> <div class="card-body" style="margin-left: 10%;"><div class="row"><div class="col-lg-2"><p class="card-text"><b>Nombre:</b></p></div> <div class="col-lg-10"><input type="text" placeholder="Nombre del Modulo" id="nombre" maxlength="100" style="border: none; width: 55%;" readonly=""></div></div> <fieldset class="checkbox-group svelte-1stzg1k"><legend class="svelte-1stzg1k">Seleccione los módulos:</legend> <div class="checkbox-container svelte-1stzg1k"></div></fieldset> <div class="row pt-3"><div class="col-lg-2"><p class="card-text"><b>Estado:</b></p></div> <div class="col-lg-10"><select id="estado" name="opciones" style="border: none; width: 55%;"><option>Activar</option><option>Desactivar</option></select></div></div> <div class="row" style="margin-top: 4%;"><div class="col-lg-9">¡Al terminar de editar, darle click en actualizar para
                    guardar los cambios!</div> <div class="col-lg-3 text-end"><button class="btn btn-outline-info"><b>Actualizar</b></button></div> <div id="estado" class="col-lg-10"></div></div></div></div></div>`,1);function Ma(c,s){je(s,!1);const r=[];let i=N(""),d=!0,p=N({}),u=N({}),g=N(!0),R=N(null),M=N([]);Re(async()=>{const n=await(await fetch("https://proyectomascotas.onrender.com/get_modulos/")).json();l(u,n.resultado),console.log("ando ando",e(u))});const y=Ze();async function oe(){try{if((await Swal.fire({title:"¿Estás seguro?",text:"¡Desea registrar el siguiente Rol!? "+e(i),icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sí, registrar!",customClass:{popup:"swal-popup",title:"custom-title"}})).isConfirmed){y("showLoader");const n=await fetch("https://proyectomascotas.onrender.com/create_rol",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nombre:e(i),estado:d})}),O=await n.json();console.log(O),y("hideLoader"),n.ok?Swal.fire({title:"¡Se ha registrado el Rol llamado "+e(i)+" con exito!",icon:"success",customClass:{popup:"swal-popup",title:"custom-title"}}):alert("Error en el registro")}else console.log("Registro Cancelado")}catch(x){l(R,x.message),y("hideLoader"),alert("Error en la solicitud: "+e(R))}}Re(async()=>{try{console.log("2");const x=await fetch("https://proyectomascotas.onrender.com/get_roles");if(!x.ok)throw new Error("Error al cargar los datos");const n=await x.json();l(p,n.resultado),console.log(e(p)),setTimeout(()=>{globalThis.$("#myTable").DataTable()},0)}catch(x){l(R,x.message)}finally{l(g,!1)}});async function E(){document.getElementById("nav-listado").setAttribute("class","fade"),document.getElementById("MostrarRoles").removeAttribute("class"),location.reload()}var b=1;async function m(x,n){console.log("Editando el Rol "+n);const O=document.getElementById("nav-listado");O.removeAttribute("class"),console.log(O),b=x,console.log(Number.isInteger(b)),console.log(b);let z=document.getElementById("MostrarRoles");z.setAttribute("class","fade"),console.log(z);const D=z.parentElement;console.log(D),D.insertBefore(O,z),console.log("NO Entra al try de buscar");const j=await(await fetch("https://proyectomascotas.onrender.com/get_modulos/")).json();l(u,j.resultado),console.log("ando ando",e(u));try{console.log("Entra al try de buscar");const Y=await fetch(`https://proyectomascotas.onrender.com/get_rol/${b}`,{method:"GET",headers:{"Content-Type":"application/json"}}),Q=await Y.json();console.log(Y),console.log(Q),console.log("Buscando el Rol seleccionado"),l(p,Q.nombre),console.log(e(p)),document.getElementById("nombre").value=Q.nombre,console.log("Verificando el estado: "+Q.estado);const ce=Q.estado?"1":"0";document.getElementById("estado").value=ce;const ae=document.getElementById("nombre");ae.removeAttribute("readonly"),ae.focus(),document.getElementById("estado").removeAttribute("readonly")}catch(Y){l(R,Y.message)}finally{l(g,!1)}}async function H(){console.log(b);let x=document.getElementById("nombre").value,n=document.getElementById("estado").value;console.log("ID DE ESTADO ENVIADO A LA BASE DE DATOS ES "+n);try{console.log("Entra al try de actualzar");const O=await fetch(`https://proyectomascotas.onrender.com/update_rol/${b}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({nombre:x,estado:n})});console.log("Actualizado");const z=await fetch(`https://proyectomascotas.onrender.com/update_moduloXrol02/${b}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_rol:b,id_modulo:e(M)})});console.log("Actualizado"),Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:f=>{f.onmouseenter=Swal.stopTimer,f.onmouseleave=Swal.resumeTimer}}).fire({icon:"success",iconColor:"white",color:"white",background:"#00bdff",title:"Rol actualizado exitosamente"}),setTimeout(()=>{const f=document.getElementById("nav-listado");f.setAttribute("class","fade");let j=document.getElementById("MostrarRoles");j.removeAttribute("class"),f.parentElement.insertBefore(j,f),location.reload()},3e3)}catch(O){l(R,O.message)}finally{l(g,!1)}}async function G(x){let n=0,O=x,z=n!==0;try{const D=await fetch(`https://proyectomascotas.onrender.com/update_estado_rol/${O}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({estado:z})}),f=await D.json();D.ok?(Swal.mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:Y=>{Y.onmouseenter=Swal.stopTimer,Y.onmouseleave=Swal.resumeTimer}}).fire({icon:"error",iconColor:"white",color:"white",background:"#ff4e4e",title:"El Rol a sido desactivado de manera exitosa"}),setTimeout(()=>{location.reload()},3500)):alert("Error al desactivar: "+f.message||"Error desconocido")}catch(D){alert("Error en la solicitud: "+D.message)}}async function F(x){let n=1,O=x,z=n===1;try{const D=await fetch(`https://proyectomascotas.onrender.com/update_estado_rol/${O}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({estado:z})}),f=await D.json();D.ok?(Swal.mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:Y=>{Y.onmouseenter=Swal.stopTimer,Y.onmouseleave=Swal.resumeTimer}}).fire({icon:"success",iconColor:"#000000",color:"black",background:"#76fa78",title:"El Rol se ha activado de manera exitosa"}),setTimeout(()=>{location.reload()},3500)):alert("Error al Activar: "+f.message||"Error desconocido")}catch(D){alert("Error en la solicitud: "+D.message)}}Oe();var X=Na(),T=qe(X),v=o(a(T),2),_=a(v);_e(_),Ee(2),t(v),t(T);var A=o(T,2),L=a(A),w=o(a(L),2);{var P=x=>{var n=Ia();B(x,n)},C=(x,n)=>{{var O=D=>{var f=Aa(),j=a(f,!0);t(f),me(()=>K(j,e(R))),B(D,f)},z=D=>{var f=Oa(),j=a(f),Y=o(a(j));Be(Y,5,()=>e(p),ke,(Q,ce)=>{var ae=Ra(),ve=a(ae),de=a(ve,!0);t(ve);var fe=o(ve),ue=a(fe),he=a(ue,!0);t(ue),t(fe);var pe=o(fe),Se=a(pe),Ie=a(Se),Me=o(Ie,2);{var be=ge=>{var ye=Ca();q("click",ye,()=>G(e(ce).id)),B(ge,ye)},Le=ge=>{var ye=Da();q("click",ye,()=>F(e(ce).id)),B(ge,ye)};ne(Me,ge=>{e(ce).estado?ge(be):ge(Le,!1)})}t(Se),t(pe),t(ae),me(()=>{K(de,e(ce).nombre),Ge(ue,1,`badge fs-6 ${e(ce).estado?"bg-success":"bg-danger"}`),K(he,e(ce).estado?"Activo":"Desactivado")}),q("click",Ie,()=>m(e(ce).id,e(ce).nombre)),B(Q,ae)}),t(Y),t(j),t(f),B(D,f)};ne(x,D=>{e(R)?D(O):D(z,!1)},n)}};ne(w,x=>{e(g)?x(P):x(C,!1)})}t(L),t(A);var se=o(A,2),$=o(a(se),2),le=a($),V=o(a(le),2);t(le);var ee=o(le,2),re=o(a(ee),2),ie=o(a(re),2);Be(ie,5,()=>e(u),ke,(x,n)=>{var O=ja(),z=a(O);_e(z);var D,f=o(z);t(O),me(()=>{D!==(D=e(n).id)&&(z.value=(z.__value=e(n).id)??""),K(f,` ${e(n).nombre??""}`)}),bt(r,[],z,()=>(e(n).id,e(M)),j=>l(M,j)),B(x,O)}),t(ie),t(re);var Z=o(re,2),h=o(a(Z),2),k=a(h),U=a(k);U.value=U.__value="1";var te=o(U);te.value=te.__value="0",t(k),t(h),t(Z);var I=o(Z,2),J=o(a(I),2),W=a(J);t(J),Ee(2),t(I),t(ee),t($),t(se),xe(_,()=>e(i),x=>l(i,x)),q("submit",v,Fe(oe)),q("click",V,()=>E()),q("click",W,H),B(c,X),Ne()}var La=S('<div class="row justify-content-center text-center"><div class="col-12 mb-2">Cargando datos...</div> <div class="spinner-border text-primary" role="status"><span class="visually-hidden">Loading...</span></div></div>'),Pa=S('<div class="alert alert-danger text-center"> </div>'),za=S('<button class="btn btn-sm btn-outline-danger"><i class="bi bi-lock"></i> <span class="d-none d-md-inline">Desactivar</span></button>'),Ua=S('<button class="btn btn-sm btn-outline-success"><i class="bi bi-unlock"></i> <span class="d-none d-md-inline">Activar</span></button>'),qa=S('<tr><td> </td><td> </td><td class="text-center"><span> </span></td><td class="text-center"><div class="d-flex flex-wrap gap-1 justify-content-center"><button class="btn btn-sm btn-outline-primary"><i class="bi bi-pencil"></i> <span class="d-none d-md-inline">Editar</span></button> <!></div></td></tr>'),Ga=S('<div class="table-responsive"><table class="table table-hover table-bordered align-middle" id="myTable"><thead><tr><th>Nombre</th><th>Descripcion</th><th>Estado</th><th>Opciones</th></tr></thead><tbody></tbody></table></div>'),$a=S(`<div class="wrapper svelte-t5nwrd"><div class="title small-title svelte-t5nwrd" style="color: dodgerblue;">REGISTRO DE MODULOS</div> <form class="class-form svelte-t5nwrd"><input class="form__input small-input svelte-t5nwrd" placeholder="Nombre del Modulo" type="text" required> <input class="form__input small-input svelte-t5nwrd" placeholder="Descripcion del Modulo" type="text" required> <input class="form__input small-input svelte-t5nwrd" placeholder="Ubicacion del Modulo" type="text" required> <input class="form__input small-input svelte-t5nwrd" placeholder="Ingrese el icono que tendra el Modulo (Boostrap)" type="text" required> <button class="flip-card__btn small-btn svelte-t5nwrd">Confirmar</button></form></div> <div id="MostrarModulos"><div class="container py-4 bg-light rounded shadow"><h2 class="text-center mb-4 pb-2 border-bottom border-3 border-primary fw-bold"><i class="bi-grid-3x3-gap-fill me-2"></i>Lista de Modulos</h2> <!></div></div> <div class="fade" id="nav-listado" role="tabpanel" aria-labelledby="nav-listado-tab"><div class="container text-center"><p class="text-orange"></p></div> <div class="card border-dark shadow" style="width: 60%; margin-left: 20%;"><div class="card-header row g-2"><h5 class="card-title col-lg-11"><b>Editando Modulo</b></h5> <button class="btn btn-close col-lg-1" aria-label="Cerrar edición de usuario"></button></div> <div class="card-body" style="margin-left: 10%;"><div class="row"><div class="col-lg-2"><p class="card-text"><b>Nombre:</b></p></div> <div class="col-lg-10"><input type="text" placeholder="Nombre del Modulo" id="nombre" maxlength="100" style="border: none; width: 55%;" readonly=""></div></div> <div class="row pt-3"><div class="col-lg-2"><p class="card-text"><b>Descripcion:</b></p></div> <div class="col-lg-10"><input type="text" placeholder="Descripcion del Modulo" id="descripcion" style="border: none; width: 55%;" readonly=""></div></div> <div class="row pt-3"><div class="col-lg-2"><p class="card-text"><b>Ubicación:</b></p></div> <div class="col-lg-10"><input type="text" placeholder="Descripcion del Modulo" id="ubicacion" style="border: none; width: 55%;" readonly=""></div></div> <div class="row pt-3"><div class="col-lg-2"><p class="card-text"><b>Estilo:</b></p></div> <div class="col-lg-10"><input type="text" placeholder="Descripcion del Modulo" id="estilo" style="border: none; width: 55%;" readonly=""></div></div> <div class="row pt-3"><div class="col-lg-2"><p class="card-text"><b>Estado:</b></p></div> <div class="col-lg-10"><select id="estado" name="opciones" style="border: none; width: 55%;"><option>Activar</option><option>Desactivar</option></select></div></div> <div class="row" style="margin-top: 4%;"><div class="col-lg-9">¡Al terminar de editar, darle click en actualizar para
                    guardar los cambios!</div> <div class="col-lg-3 text-end"><button class="btn btn-outline-info"><b>Actualizar</b></button></div> <div id="estado" class="col-lg-10"></div></div></div></div></div>`,1);function Ja(c,s){je(s,!1);let r=N(""),i=N(""),d=N(""),p=N(""),u=!0,g=N({}),R=N(!0),M=N(null);const y=Ze();async function oe(){try{if((await Swal.fire({title:"¿Estás seguro?",text:"¡Desea registrar el siguiente Modulo!?: "+e(r),icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sí, registrar!",customClass:{popup:"swal-popup",title:"custom-title"}})).isConfirmed){y("showLoader");const O=await fetch("https://proyectomascotas.onrender.com/create_modulo",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nombre:e(r),descripcion:e(i),ubicacion:e(d),estado:u,estilo:e(p)})}),z=await O.json();console.log(z),y("hideLoader"),O.ok?(Swal.fire({title:"¡Se ha registrado el Modulo llamado "+e(r)+" con exito!",icon:"success",customClass:{popup:"swal-popup",title:"custom-title"}}),setTimeout(()=>{location.reload()},3500)):alert("Error en el registro")}else console.log("Registro Cancelado")}catch(n){l(M,n.message),y("hideLoader"),alert("Error en la solicitud: "+e(M))}}Re(async()=>{try{console.log("2");const n=await fetch("https://proyectomascotas.onrender.com/get_modulos");if(!n.ok)throw new Error("Error al cargar los datos");const O=await n.json();l(g,O.resultado),console.log(e(g)),setTimeout(()=>{globalThis.$("#myTable").DataTable()},0)}catch(n){l(M,n.message)}finally{l(R,!1)}});async function E(){document.getElementById("nav-listado").setAttribute("class","fade"),document.getElementById("MostrarModulos").removeAttribute("class"),location.reload()}var b=1;async function m(n,O){console.log("Editando el modulo "+O);const z=document.getElementById("nav-listado");z.removeAttribute("class"),console.log(z),b=n,console.log(Number.isInteger(b)),console.log(b);let D=document.getElementById("MostrarModulos");D.setAttribute("class","fade"),console.log(D);const f=D.parentElement;console.log(f),f.insertBefore(z,D),console.log("NO Entra al try de buscar");try{console.log("Entra al try de buscar");const j=await fetch(`https://proyectomascotas.onrender.com/get_modulo/${b}`,{method:"GET",headers:{"Content-Type":"application/json"}}),Y=await j.json();console.log(j),console.log(Y),console.log("Buscando el Modulo seleccionado"),l(g,Y.nombre),console.log(e(g)),document.getElementById("nombre").value=Y.nombre,document.getElementById("descripcion").value=Y.descripcion,document.getElementById("ubicacion").value=Y.ubicacion,document.getElementById("estilo").value=Y.estilo,console.log("verificando el estado: "+Y.estado);const Q=Y.estado?"1":"0";document.getElementById("estado").value=Q;const ce=document.getElementById("nombre");ce.removeAttribute("readonly"),ce.focus(),document.getElementById("descripcion").removeAttribute("readonly"),document.getElementById("ubicacion").removeAttribute("readonly"),document.getElementById("estilo").removeAttribute("readonly"),document.getElementById("estado").removeAttribute("readonly")}catch(j){l(M,j.message)}finally{l(R,!1)}}async function H(){console.log(b);let n=document.getElementById("nombre").value,O=document.getElementById("descripcion").value,z=document.getElementById("ubicacion").value,D=document.getElementById("estilo").value,f=document.getElementById("estado").value;console.log("ID DE ESTADO ENVIADO A LA BASE DE DATOS ES "+f);try{console.log("Entra al try de actualzar");const j=await fetch(`https://proyectomascotas.onrender.com/update_modulo/${b}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({nombre:n,descripcion:O,ubicacion:z,estilo:D,estado:f})});console.log("Actualizado"),Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:Q=>{Q.onmouseenter=Swal.stopTimer,Q.onmouseleave=Swal.resumeTimer}}).fire({icon:"success",iconColor:"white",color:"white",background:"#00bdff",title:"Modulo actualizado exitosamente"}),setTimeout(()=>{const Q=document.getElementById("nav-listado");Q.setAttribute("class","fade");let ce=document.getElementById("MostrarModulos");ce.removeAttribute("class"),Q.parentElement.insertBefore(ce,Q),location.reload()},3e3)}catch(j){l(M,j.message)}finally{l(R,!1)}}async function G(n){let O=0,z=n,D=O!==0;try{const f=await fetch(`https://proyectomascotas.onrender.com/update_estado_modulo/${z}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({estado:D})}),j=await f.json();f.ok?(Swal.mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:Q=>{Q.onmouseenter=Swal.stopTimer,Q.onmouseleave=Swal.resumeTimer}}).fire({icon:"error",iconColor:"white",color:"white",background:"#ff4e4e",title:"El Modulo a sido desactivado de manera exitosa"}),setTimeout(()=>{location.reload()},3500)):alert("Error al desactivar: "+j.message||"Error desconocido")}catch(f){alert("Error en la solicitud: "+f.message)}}async function F(n){let O=1,z=n,D=O===1;try{const f=await fetch(`https://proyectomascotas.onrender.com/update_estado_modulo/${z}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({estado:D})}),j=await f.json();f.ok?(Swal.mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:Q=>{Q.onmouseenter=Swal.stopTimer,Q.onmouseleave=Swal.resumeTimer}}).fire({icon:"success",iconColor:"#000000",color:"black",background:"#76fa78",title:"El Modulo se ha activado de manera exitosa"}),setTimeout(()=>{location.reload()},3500)):alert("Error al Activar: "+j.message||"Error desconocido")}catch(f){alert("Error en la solicitud: "+f.message)}}Oe();var X=$a(),T=qe(X),v=o(a(T),2),_=a(v);_e(_);var A=o(_,2);_e(A);var L=o(A,2);_e(L);var w=o(L,2);_e(w),Ee(2),t(v),t(T);var P=o(T,2),C=a(P),se=o(a(C),2);{var $=n=>{var O=La();B(n,O)},le=(n,O)=>{{var z=f=>{var j=Pa(),Y=a(j,!0);t(j),me(()=>K(Y,e(M))),B(f,j)},D=f=>{var j=Ga(),Y=a(j),Q=o(a(Y));Be(Q,5,()=>e(g),ke,(ce,ae)=>{var ve=qa(),de=a(ve),fe=a(de,!0);t(de);var ue=o(de),he=a(ue,!0);t(ue);var pe=o(ue),Se=a(pe),Ie=a(Se,!0);t(Se),t(pe);var Me=o(pe),be=a(Me),Le=a(be),ge=o(Le,2);{var ye=Te=>{var Ce=za();q("click",Ce,()=>G(e(ae).id)),B(Te,Ce)},Ae=Te=>{var Ce=Ua();q("click",Ce,()=>F(e(ae).id)),B(Te,Ce)};ne(ge,Te=>{e(ae).estado?Te(ye):Te(Ae,!1)})}t(be),t(Me),t(ve),me(()=>{K(fe,e(ae).nombre),K(he,e(ae).descripcion),Ge(Se,1,`badge ${e(ae).estado?"bg-success":"bg-danger"}`),K(Ie,e(ae).estado?"Activo":"Desactivado")}),q("click",Le,()=>m(e(ae).id,e(ae).nombre)),B(ce,ve)}),t(Q),t(Y),t(j),B(f,j)};ne(n,f=>{e(M)?f(z):f(D,!1)},O)}};ne(se,n=>{e(R)?n($):n(le,!1)})}t(C),t(P);var V=o(P,2),ee=o(a(V),2),re=a(ee),ie=o(a(re),2);t(re);var Z=o(re,2),h=o(a(Z),8),k=o(a(h),2),U=a(k),te=a(U);te.value=te.__value="1";var I=o(te);I.value=I.__value="0",t(U),t(k),t(h);var J=o(h,2),W=o(a(J),2),x=a(W);t(W),Ee(2),t(J),t(Z),t(ee),t(V),xe(_,()=>e(r),n=>l(r,n)),xe(A,()=>e(i),n=>l(i,n)),xe(L,()=>e(d),n=>l(d,n)),xe(w,()=>e(p),n=>l(p,n)),q("submit",v,Fe(oe)),q("click",ie,()=>E()),q("click",x,H),B(c,X),Ne()}var Ha=S('<div class="admin-container svelte-frsr9g"><div class="admin-card svelte-frsr9g"><div class="card-header svelte-frsr9g"><h2>📊 Panel de Estadísticas</h2></div> <div class="card-body svelte-frsr9g"><div class="iframe-container svelte-frsr9g"><iframe title="SensuTrack - Estadísticas" src="https://app.powerbi.com/view?r=eyJrIjoiZWE4NDU5OWUtNDZiMi00M2RjLTk0NTUtZWUxZDkyMjMwZDQyIiwidCI6IjFlOWFhYmU4LTY3ZjgtNGYxYy1hMzI5LWE3NTRlOTI0OTlhZSIsImMiOjR9" frameborder="0" allowfullscreen="" class="svelte-frsr9g"></iframe></div></div></div></div>');function Fa(c){var s=Ha();B(c,s)}var Va=S('<div class="row justify-content-center text-center"><div class="col-12 mb-2">Cargando datos...</div> <div class="spinner-border text-primary" role="status"><span class="visually-hidden">Loading...</span></div></div>'),Za=S('<div class="alert alert-danger text-center"> </div>'),Ya=S('<button class="btn btn-sm btn-outline-danger"><i class="bi bi-lock"></i> <span class="d-none d-md-inline">Desactivar</span></button>'),Wa=S('<button class="btn btn-sm btn-outline-success"><i class="bi bi-unlock"></i> <span class="d-none d-md-inline">Activar</span></button>'),Xa=S('<tr><td> </td><td> </td><td> </td><td> </td><td> </td><td class="text-center"><span> </span></td><td class="text-center"><div class="d-flex flex-wrap gap-1 justify-content-center"><button class="btn btn-sm btn-outline-primary"><i class="bi bi-pencil"></i> <span class="d-none d-md-inline">Editar</span></button> <!></div></td></tr>'),Qa=S('<div class="table-responsive"><table class="table table-hover table-bordered align-middle" id="myTable"><thead class="thead-light text-center"><tr><th>ID</th><th>Usuario</th><th>Latitud</th><th>Longitud</th><th>Lugar</th><th>Estado</th><th>Opcion</th></tr></thead><tbody></tbody></table></div>'),Ka=S('<div id="Mostrarusuario"><div class="container py-4"><h2 class="text-center mb-4 pb-2 border-bottom border-3 border-primary fw-bold"><i class="bi-clock-history me-2"></i>Historial de Ubicaciones</h2> <!></div></div>');function eo(c,s){je(s,!1);let r=N([]),i=N(!0),d=N(null);Re(async()=>{try{const y=await fetch("http://localhost:3000/historial");if(!y.ok)throw new Error("Error al cargar los datos");const oe=await y.json();console.log(oe),l(r,Array.isArray(oe)?oe:[oe]),setTimeout(()=>{globalThis.$&&globalThis.$.fn.DataTable?globalThis.$("#myTable").DataTable():console.error("jQuery o DataTables no están cargados")},0)}catch(y){l(d,y.message)}finally{l(i,!1)}}),Oe();var p=Ka(),u=a(p),g=o(a(u),2);{var R=y=>{var oe=Va();B(y,oe)},M=(y,oe)=>{{var E=m=>{var H=Za(),G=a(H,!0);t(H),me(()=>K(G,e(d))),B(m,H)},b=m=>{var H=Qa(),G=a(H),F=o(a(G));Be(F,5,()=>e(r),ke,(X,T)=>{var v=Xa(),_=a(v),A=a(_,!0);t(_);var L=o(_),w=a(L,!0);t(L);var P=o(L),C=a(P,!0);t(P);var se=o(P),$=a(se,!0);t(se);var le=o(se),V=a(le,!0);t(le);var ee=o(le),re=a(ee),ie=a(re,!0);t(re),t(ee);var Z=o(ee),h=a(Z),k=a(h),U=o(k,2);{var te=J=>{var W=Ya();q("click",W,()=>desactivar(e(T).id)),B(J,W)},I=J=>{var W=Wa();q("click",W,()=>activar(e(T).id)),B(J,W)};ne(U,J=>{e(T).estado?J(te):J(I,!1)})}t(h),t(Z),t(v),me(()=>{K(A,e(T).id),K(w,e(T).id_usuario),K(C,e(T).latitud),K($,e(T).longitud),K(V,e(T).lugar),Ge(re,1,`badge ${e(T).estado?"bg-success":"bg-danger"}`),K(ie,e(T).estado?"Activo":"Desactivado")}),q("click",k,()=>editar(e(T).id,e(T).nombre)),B(X,v)}),t(F),t(G),t(H),B(m,H)};ne(y,m=>{e(d)?m(E):m(b,!1)},oe)}};ne(g,y=>{e(i)?y(R):y(M,!1)})}t(u),t(p),B(c,p),Ne()}var to=S('<option class="svelte-1r4v3de"> </option>'),ao=S('<label class="checkbox-label svelte-1r4v3de"><input type="checkbox" name="modulo" class="svelte-1r4v3de"> </label>'),oo=S('<div class="wrapper svelte-1r4v3de"><div class="title small-title svelte-1r4v3de" style="color: dodgerblue;">REGISTRO DE MODULOSXROL</div> <form class="class-form svelte-1r4v3de"><span class="svelte-1r4v3de">Roles:</span> <select id="roles" class="form__input svelte-1r4v3de" required><option disabled selected class="svelte-1r4v3de">Selecciona un rol</option><!></select> <fieldset class="checkbox-group svelte-1r4v3de"><legend class="svelte-1r4v3de">Módulos:</legend> <span class="svelte-1r4v3de">Selecciona los Modulos que tendra el Rol seleccionado:</span> <div class="checkbox-container svelte-1r4v3de"></div></fieldset> <button class="flip-card__btn small-btn svelte-1r4v3de">Confirmar</button></form> <div class="loader-container svelte-1r4v3de"><div class="loader-text svelte-1r4v3de"><span class="svelte-1r4v3de">S</span> <span class="svelte-1r4v3de">e</span> <span class="svelte-1r4v3de">n</span> <span class="svelte-1r4v3de">s</span> <span class="svelte-1r4v3de">u</span> <span class="svelte-1r4v3de">T</span> <span class="svelte-1r4v3de">r</span> <span class="svelte-1r4v3de">a</span> <span class="svelte-1r4v3de">c</span> <span class="svelte-1r4v3de">k</span></div></div></div>');function so(c,s){je(s,!1);const r=[];let i="",d=!0,p=N([]),u=[],g=N({}),R=N({}),M=null,y=N();Re(async()=>{const L=await(await fetch("https://proyectomascotas.onrender.com/get_modulos/")).json();l(g,L.resultado),console.log(e(g));const P=await(await fetch("https://proyectomascotas.onrender.com/get_roles/")).json();l(R,P.resultado),console.log(e(R))});function oe(A){A&&(A.style.display="flex")}function E(A){A&&(A.style.display="none")}async function b(){console.log(e(p)),console.log(u),i=document.getElementById("roles").value;try{if((await Swal.fire({title:"¿Estás seguro?",text:"¡Desea registrar el siguiente ModuloxRol!?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sí, registrar!",customClass:{popup:"swal-popup",title:"custom-title"}})).isConfirmed){oe(e(y));const L=await fetch("https://proyectomascotas.onrender.com/create_moduloXrol",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_modulo:e(p),id_rol:i,estado:d})}),w=await L.json();console.log(w),E(e(y)),L.ok?(Swal.fire({title:"¡Se ha registrado el ModuloxRol con exito ",icon:"success",customClass:{popup:"swal-popup",title:"custom-title"}}),setTimeout(()=>{location.reload()},3500)):alert("Error en el registro")}else console.log("Registro Cancelado")}catch(A){M=A.message,E(e(y)),alert("Error en la solicitud: "+M)}}Oe();var m=oo(),H=o(a(m),2),G=o(a(H),2),F=a(G);F.value=F.__value="";var X=o(F);Be(X,1,()=>e(R),ke,(A,L)=>{var w=to(),P={},C=a(w,!0);t(w),me(()=>{P!==(P=e(L).id)&&(w.value=(w.__value=e(L).id)??""),K(C,e(L).nombre)}),B(A,w)}),t(G);var T=o(G,2),v=o(a(T),4);Be(v,5,()=>e(g),ke,(A,L)=>{var w=ao(),P=a(w);_e(P);var C,se=o(P);t(w),me(()=>{ft(P,"id",`modulo-${e(L).id??""}`),C!==(C=e(L).id)&&(P.value=(P.__value=e(L).id)??""),K(se,` ${e(L).nombre??""}`)}),bt(r,[],P,()=>(e(L).id,e(p)),$=>l(p,$)),B(A,w)}),t(v),t(T),Ee(2),t(H);var _=o(H,2);gt(_,A=>l(y,A),()=>e(y)),t(m),q("submit",H,Fe(b)),B(c,m),Ne()}var ro=S('<button class="overlay svelte-1ig2dkm" aria-label="Cerrar menú"></button>'),lo=S(`<div class="admin-welcome svelte-1ig2dkm"><h1 class="svelte-1ig2dkm">👋 ¡Bienvenido, Administrador!</h1> <p class="subtitle svelte-1ig2dkm">Este panel te permite tener el control total del sistema
                    para apoyar a las personas ciegas con eficiencia y
                    seguridad.</p></div>`),io=S('<div class="mobile-layout svelte-1ig2dkm"><header class="mobile-header svelte-1ig2dkm"><button class="menu-button svelte-1ig2dkm"><i class="bi bi-list svelte-1ig2dkm"></i></button> <h1 class="svelte-1ig2dkm">Admin</h1> <div class="header-spacer svelte-1ig2dkm"></div></header> <div><nav class="svelte-1ig2dkm"><button class="svelte-1ig2dkm"><i class="bi bi-person-add svelte-1ig2dkm"></i> <span class="svelte-1ig2dkm">Registrar Usuario</span></button> <button class="svelte-1ig2dkm"><i class="bi bi-file-earmark-spreadsheet svelte-1ig2dkm"></i> <span class="svelte-1ig2dkm">Reportes</span></button> <button class="svelte-1ig2dkm"><i class="bi bi-geo-alt svelte-1ig2dkm"></i> <span class="svelte-1ig2dkm">Registrar GPS</span></button> <button class="svelte-1ig2dkm"><i class="bi bi-table svelte-1ig2dkm"></i> <span class="svelte-1ig2dkm">Tabla Usuarios</span></button> <button class="svelte-1ig2dkm"><i class="bi bi-table svelte-1ig2dkm"></i> <span class="svelte-1ig2dkm">Tabla Discapacitados</span></button> <button class="svelte-1ig2dkm"><i class="bi bi-person-badge svelte-1ig2dkm"></i> <span class="svelte-1ig2dkm">Registrar Roles</span></button> <button class="svelte-1ig2dkm"><i class="bi bi-stack svelte-1ig2dkm"></i> <span class="svelte-1ig2dkm">Registrar Módulos</span></button> <button class="svelte-1ig2dkm"><i class="bi bi-shield-lock svelte-1ig2dkm"></i> <span class="svelte-1ig2dkm">Asignar Módulo</span></button> <button class="svelte-1ig2dkm"><i class="bi bi-graph-up svelte-1ig2dkm"></i> <span class="svelte-1ig2dkm">Tablero</span></button> <button class="svelte-1ig2dkm"><i class="bi bi-map svelte-1ig2dkm"></i> <span class="svelte-1ig2dkm">Ubicaciones</span></button> <button class="logout svelte-1ig2dkm"><i class="bi bi-power svelte-1ig2dkm"></i> <span class="svelte-1ig2dkm">Cerrar Sesión</span></button></nav></div> <!> <main class="mobile-content svelte-1ig2dkm"><!> <div class="loader-container svelte-1ig2dkm"><div class="loader-text svelte-1ig2dkm"><span class="svelte-1ig2dkm">S</span> <span class="svelte-1ig2dkm">e</span> <span class="svelte-1ig2dkm">n</span> <span class="svelte-1ig2dkm">s</span> <span class="svelte-1ig2dkm">u</span> <span class="svelte-1ig2dkm">T</span> <span class="svelte-1ig2dkm">r</span> <span class="svelte-1ig2dkm">a</span> <span class="svelte-1ig2dkm">c</span> <span class="svelte-1ig2dkm">k</span></div></div></main></div> <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet" class="svelte-1ig2dkm">',1);function _o(c){let s=N("X"),r=N(),i=N(!1);function d(){it(r,e(r).style.display="flex")}function p(){it(r,e(r).style.display="none")}function u(){l(i,!e(i))}function g(){localStorage.clear(),window.location.href="/"}function R(){l(s,"registro_usuario"),l(i,!1)}function M(){l(s,"reportes"),l(i,!1)}function y(){l(s,"registro_gps"),l(i,!1)}function oe(){l(s,"tabla_usuarios"),l(i,!1)}function E(){l(s,"tabla_discapacitados"),l(i,!1)}function b(){l(s,"registro_roles"),l(i,!1)}function m(){l(s,"registro_modulos"),l(i,!1)}function H(){l(s,"modulos_por_rol"),l(i,!1)}function G(){l(s,"tablero"),l(i,!1)}function F(){l(s,"historial_ubicaciones"),l(i,!1)}var X=io(),T=qe(X),v=a(T),_=a(v);Ee(4),t(v);var A=o(v,2),L=a(A),w=a(L),P=o(w,2),C=o(P,2),se=o(C,2),$=o(se,2),le=o($,2),V=o(le,2),ee=o(V,2),re=o(ee,2),ie=o(re,2),Z=o(ie,2);t(L),t(A);var h=o(A,2);{var k=x=>{var n=ro();q("click",n,u),B(x,n)};ne(h,x=>{e(i)&&x(k)})}var U=o(h,2),te=a(U);{var I=x=>{var n=lo();B(x,n)},J=(x,n)=>{{var O=D=>{ta(D,{$$events:{showLoader:d,hideLoader:p}})},z=(D,f)=>{{var j=Q=>{ia(Q,{})},Y=(Q,ce)=>{{var ae=de=>{da(de,{$$events:{showLoader:d,hideLoader:p}})},ve=(de,fe)=>{{var ue=pe=>{ha(pe,{})},he=(pe,Se)=>{{var Ie=be=>{Sa(be,{})},Me=(be,Le)=>{{var ge=Ae=>{Ma(Ae,{$$events:{showLoader:d,hideLoader:p}})},ye=(Ae,Te)=>{{var Ce=Pe=>{Ja(Pe,{$$events:{showLoader:d,hideLoader:p}})},Ve=(Pe,Ye)=>{{var We=we=>{so(we,{})},ze=(we,wt)=>{{var xt=$e=>{Fa($e)},Et=($e,Tt)=>{{var kt=Xe=>{eo(Xe,{})};ne($e,Xe=>{e(s)==="historial_ubicaciones"&&Xe(kt)},Tt)}};ne(we,$e=>{e(s)==="tablero"?$e(xt):$e(Et,!1)},wt)}};ne(Pe,we=>{e(s)==="modulos_por_rol"?we(We):we(ze,!1)},Ye)}};ne(Ae,Pe=>{e(s)==="registro_modulos"?Pe(Ce):Pe(Ve,!1)},Te)}};ne(be,Ae=>{e(s)==="registro_roles"?Ae(ge):Ae(ye,!1)},Le)}};ne(pe,be=>{e(s)==="tabla_discapacitados"?be(Ie):be(Me,!1)},Se)}};ne(de,pe=>{e(s)==="tabla_usuarios"?pe(ue):pe(he,!1)},fe)}};ne(Q,de=>{e(s)==="registro_gps"?de(ae):de(ve,!1)},ce)}};ne(D,Q=>{e(s)==="reportes"?Q(j):Q(Y,!1)},f)}};ne(x,D=>{e(s)==="registro_usuario"?D(O):D(z,!1)},n)}};ne(te,x=>{e(s)==="X"?x(I):x(J,!1)})}var W=o(te,2);gt(W,x=>l(r,x),()=>e(r)),t(U),t(T),Ee(2),me(()=>{ft(_,"aria-label",e(i)?"Cerrar menú":"Abrir menú"),Ge(A,1,`mobile-sidebar ${e(i)?"open":""}`,"svelte-1ig2dkm")}),q("click",_,u),q("click",w,R),q("click",P,M),q("click",C,y),q("click",se,oe),q("click",$,E),q("click",le,b),q("click",V,m),q("click",ee,H),q("click",re,G),q("click",ie,F),q("click",Z,g),B(c,X)}export{_o as component};
